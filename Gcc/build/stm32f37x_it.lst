ARM GAS  C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 1
   4              		.eabi_attribute 28, 1
   5              		.fpu fpv4-sp-d16
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.thumb
  16              		.syntax unified
  17              		.file	"stm32f37x_it.c"
  18              		.text
  19              	.Ltext0:
  20              		.cfi_sections	.debug_frame
  21              		.section	.text.NMI_Handler,"ax",%progbits
  22              		.align	2
  23              		.global	NMI_Handler
  24              		.thumb
  25              		.thumb_func
  27              	NMI_Handler:
  28              	.LFB111:
  29              		.file 1 "../user/source/stm32f37x_it.c"
   1:../user/source/stm32f37x_it.c **** /**
   2:../user/source/stm32f37x_it.c ****   ******************************************************************************
   3:../user/source/stm32f37x_it.c ****   * @file    Project/STM32F37x_StdPeriph_Templates/stm32f37x_it.c 
   4:../user/source/stm32f37x_it.c ****   * @author  MCD Application Team
   5:../user/source/stm32f37x_it.c ****   * @version V1.0.0
   6:../user/source/stm32f37x_it.c ****   * @date    20-September-2012
   7:../user/source/stm32f37x_it.c ****   * @brief   Main Interrupt Service Routines.
   8:../user/source/stm32f37x_it.c ****   *          This file provides template for all exceptions handler and 
   9:../user/source/stm32f37x_it.c ****   *          peripherals interrupt service routine.
  10:../user/source/stm32f37x_it.c ****   ******************************************************************************
  11:../user/source/stm32f37x_it.c ****   * @attention
  12:../user/source/stm32f37x_it.c ****   *
  13:../user/source/stm32f37x_it.c ****   * <h2><center>&copy; COPYRIGHT 2012 STMicroelectronics</center></h2>
  14:../user/source/stm32f37x_it.c ****   *
  15:../user/source/stm32f37x_it.c ****   * Licensed under MCD-ST Liberty SW License Agreement V2, (the "License");
  16:../user/source/stm32f37x_it.c ****   * You may not use this file except in compliance with the License.
  17:../user/source/stm32f37x_it.c ****   * You may obtain a copy of the License at:
  18:../user/source/stm32f37x_it.c ****   *
  19:../user/source/stm32f37x_it.c ****   *        http://www.st.com/software_license_agreement_liberty_v2
  20:../user/source/stm32f37x_it.c ****   *
  21:../user/source/stm32f37x_it.c ****   * Unless required by applicable law or agreed to in writing, software 
  22:../user/source/stm32f37x_it.c ****   * distributed under the License is distributed on an "AS IS" BASIS, 
  23:../user/source/stm32f37x_it.c ****   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  24:../user/source/stm32f37x_it.c ****   * See the License for the specific language governing permissions and
  25:../user/source/stm32f37x_it.c ****   * limitations under the License.
  26:../user/source/stm32f37x_it.c ****   *
  27:../user/source/stm32f37x_it.c ****   ******************************************************************************
  28:../user/source/stm32f37x_it.c ****   */
  29:../user/source/stm32f37x_it.c **** 
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s 			page 2


  30:../user/source/stm32f37x_it.c **** /* Includes ------------------------------------------------------------------*/
  31:../user/source/stm32f37x_it.c **** //#include "stdlib.h"
  32:../user/source/stm32f37x_it.c **** #include "stm32f37x_it.h"
  33:../user/source/stm32f37x_it.c **** #include "main.h"
  34:../user/source/stm32f37x_it.c **** #include "Uart.h"
  35:../user/source/stm32f37x_it.c **** #include "Time.h"
  36:../user/source/stm32f37x_it.c **** 
  37:../user/source/stm32f37x_it.c **** extern UartDef *pUartZD;
  38:../user/source/stm32f37x_it.c **** extern UartDef *pUartDB;
  39:../user/source/stm32f37x_it.c **** extern UartDef *pUartIR;
  40:../user/source/stm32f37x_it.c **** 
  41:../user/source/stm32f37x_it.c **** static uint16_t TICKS;
  42:../user/source/stm32f37x_it.c **** uint16_t capture = 0;
  43:../user/source/stm32f37x_it.c **** /** @addtogroup Template_Project
  44:../user/source/stm32f37x_it.c ****   * @{
  45:../user/source/stm32f37x_it.c ****   */
  46:../user/source/stm32f37x_it.c **** 
  47:../user/source/stm32f37x_it.c **** /* Private typedef -----------------------------------------------------------*/
  48:../user/source/stm32f37x_it.c **** /* Private define ------------------------------------------------------------*/
  49:../user/source/stm32f37x_it.c **** /* Private macro -------------------------------------------------------------*/
  50:../user/source/stm32f37x_it.c **** /* Private variables ---------------------------------------------------------*/
  51:../user/source/stm32f37x_it.c **** /* Private function prototypes -----------------------------------------------*/
  52:../user/source/stm32f37x_it.c **** /* Private functions ---------------------------------------------------------*/
  53:../user/source/stm32f37x_it.c **** 
  54:../user/source/stm32f37x_it.c **** /******************************************************************************/
  55:../user/source/stm32f37x_it.c **** /*            Cortex-M4 Processor Exceptions Handlers                         */
  56:../user/source/stm32f37x_it.c **** /******************************************************************************/
  57:../user/source/stm32f37x_it.c **** 
  58:../user/source/stm32f37x_it.c **** /**
  59:../user/source/stm32f37x_it.c ****   * @brief  This function handles NMI exception.
  60:../user/source/stm32f37x_it.c ****   * @param  None
  61:../user/source/stm32f37x_it.c ****   * @retval None
  62:../user/source/stm32f37x_it.c ****   */
  63:../user/source/stm32f37x_it.c **** void NMI_Handler(void)
  64:../user/source/stm32f37x_it.c **** {
  30              		.loc 1 64 0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
  35 0000 7047     		bx	lr
  36              		.cfi_endproc
  37              	.LFE111:
  39 0002 00BF     		.section	.text.HardFault_Handler,"ax",%progbits
  40              		.align	2
  41              		.global	HardFault_Handler
  42              		.thumb
  43              		.thumb_func
  45              	HardFault_Handler:
  46              	.LFB112:
  65:../user/source/stm32f37x_it.c **** }
  66:../user/source/stm32f37x_it.c **** 
  67:../user/source/stm32f37x_it.c **** /**
  68:../user/source/stm32f37x_it.c ****   * @brief  This function handles Hard Fault exception.
  69:../user/source/stm32f37x_it.c ****   * @param  None
  70:../user/source/stm32f37x_it.c ****   * @retval None
  71:../user/source/stm32f37x_it.c ****   */
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s 			page 3


  72:../user/source/stm32f37x_it.c **** void HardFault_Handler(void)
  73:../user/source/stm32f37x_it.c **** {
  47              		.loc 1 73 0
  48              		.cfi_startproc
  49              		@ Volatile: function does not return.
  50              		@ args = 0, pretend = 0, frame = 0
  51              		@ frame_needed = 0, uses_anonymous_args = 0
  52              		@ link register save eliminated.
  53              	.L3:
  54 0000 FEE7     		b	.L3
  55              		.cfi_endproc
  56              	.LFE112:
  58 0002 00BF     		.section	.text.MemManage_Handler,"ax",%progbits
  59              		.align	2
  60              		.global	MemManage_Handler
  61              		.thumb
  62              		.thumb_func
  64              	MemManage_Handler:
  65              	.LFB113:
  74:../user/source/stm32f37x_it.c ****     //	if (CoreDebug->DHCSR & 1) {  //check C_DEBUGEN == 1 -> Debugger Connected
  75:../user/source/stm32f37x_it.c ****     //      __breakpoint(0);  // halt program execution here
  76:../user/source/stm32f37x_it.c ****     //  }
  77:../user/source/stm32f37x_it.c **** 
  78:../user/source/stm32f37x_it.c ****     /* Go to infinite loop when Hard Fault exception occurs */
  79:../user/source/stm32f37x_it.c ****     while (1)
  80:../user/source/stm32f37x_it.c ****     {
  81:../user/source/stm32f37x_it.c ****     }
  82:../user/source/stm32f37x_it.c **** }
  83:../user/source/stm32f37x_it.c **** 
  84:../user/source/stm32f37x_it.c **** /**
  85:../user/source/stm32f37x_it.c ****   * @brief  This function handles Memory Manage exception.
  86:../user/source/stm32f37x_it.c ****   * @param  None
  87:../user/source/stm32f37x_it.c ****   * @retval None
  88:../user/source/stm32f37x_it.c ****   */
  89:../user/source/stm32f37x_it.c **** void MemManage_Handler(void)
  90:../user/source/stm32f37x_it.c **** {
  66              		.loc 1 90 0
  67              		.cfi_startproc
  68              		@ Volatile: function does not return.
  69              		@ args = 0, pretend = 0, frame = 0
  70              		@ frame_needed = 0, uses_anonymous_args = 0
  71              		@ link register save eliminated.
  72              	.L5:
  73 0000 FEE7     		b	.L5
  74              		.cfi_endproc
  75              	.LFE113:
  77 0002 00BF     		.section	.text.BusFault_Handler,"ax",%progbits
  78              		.align	2
  79              		.global	BusFault_Handler
  80              		.thumb
  81              		.thumb_func
  83              	BusFault_Handler:
  84              	.LFB114:
  91:../user/source/stm32f37x_it.c ****     /* Go to infinite loop when Memory Manage exception occurs */
  92:../user/source/stm32f37x_it.c ****     while (1)
  93:../user/source/stm32f37x_it.c ****     {
  94:../user/source/stm32f37x_it.c ****     }
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s 			page 4


  95:../user/source/stm32f37x_it.c **** }
  96:../user/source/stm32f37x_it.c **** 
  97:../user/source/stm32f37x_it.c **** /**
  98:../user/source/stm32f37x_it.c ****   * @brief  This function handles Bus Fault exception.
  99:../user/source/stm32f37x_it.c ****   * @param  None
 100:../user/source/stm32f37x_it.c ****   * @retval None
 101:../user/source/stm32f37x_it.c ****   */
 102:../user/source/stm32f37x_it.c **** void BusFault_Handler(void)
 103:../user/source/stm32f37x_it.c **** {
  85              		.loc 1 103 0
  86              		.cfi_startproc
  87              		@ Volatile: function does not return.
  88              		@ args = 0, pretend = 0, frame = 0
  89              		@ frame_needed = 0, uses_anonymous_args = 0
  90              		@ link register save eliminated.
  91              	.L7:
  92 0000 FEE7     		b	.L7
  93              		.cfi_endproc
  94              	.LFE114:
  96 0002 00BF     		.section	.text.UsageFault_Handler,"ax",%progbits
  97              		.align	2
  98              		.global	UsageFault_Handler
  99              		.thumb
 100              		.thumb_func
 102              	UsageFault_Handler:
 103              	.LFB115:
 104:../user/source/stm32f37x_it.c ****     /* Go to infinite loop when Bus Fault exception occurs */
 105:../user/source/stm32f37x_it.c ****     while (1)
 106:../user/source/stm32f37x_it.c ****     {
 107:../user/source/stm32f37x_it.c ****     }
 108:../user/source/stm32f37x_it.c **** }
 109:../user/source/stm32f37x_it.c **** 
 110:../user/source/stm32f37x_it.c **** /**
 111:../user/source/stm32f37x_it.c ****   * @brief  This function handles Usage Fault exception.
 112:../user/source/stm32f37x_it.c ****   * @param  None
 113:../user/source/stm32f37x_it.c ****   * @retval None
 114:../user/source/stm32f37x_it.c ****   */
 115:../user/source/stm32f37x_it.c **** void UsageFault_Handler(void)
 116:../user/source/stm32f37x_it.c **** {
 104              		.loc 1 116 0
 105              		.cfi_startproc
 106              		@ Volatile: function does not return.
 107              		@ args = 0, pretend = 0, frame = 0
 108              		@ frame_needed = 0, uses_anonymous_args = 0
 109              		@ link register save eliminated.
 110              	.L9:
 111 0000 FEE7     		b	.L9
 112              		.cfi_endproc
 113              	.LFE115:
 115 0002 00BF     		.section	.text.SVC_Handler,"ax",%progbits
 116              		.align	2
 117              		.global	SVC_Handler
 118              		.thumb
 119              		.thumb_func
 121              	SVC_Handler:
 122              	.LFB116:
 117:../user/source/stm32f37x_it.c ****     /* Go to infinite loop when Usage Fault exception occurs */
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s 			page 5


 118:../user/source/stm32f37x_it.c ****     while (1)
 119:../user/source/stm32f37x_it.c ****     {
 120:../user/source/stm32f37x_it.c ****     }
 121:../user/source/stm32f37x_it.c **** }
 122:../user/source/stm32f37x_it.c **** 
 123:../user/source/stm32f37x_it.c **** /**
 124:../user/source/stm32f37x_it.c ****   * @brief  This function handles SVCall exception.
 125:../user/source/stm32f37x_it.c ****   * @param  None
 126:../user/source/stm32f37x_it.c ****   * @retval None
 127:../user/source/stm32f37x_it.c ****   */
 128:../user/source/stm32f37x_it.c **** void SVC_Handler(void)
 129:../user/source/stm32f37x_it.c **** {
 123              		.loc 1 129 0
 124              		.cfi_startproc
 125              		@ args = 0, pretend = 0, frame = 0
 126              		@ frame_needed = 0, uses_anonymous_args = 0
 127              		@ link register save eliminated.
 128 0000 7047     		bx	lr
 129              		.cfi_endproc
 130              	.LFE116:
 132 0002 00BF     		.section	.text.DebugMon_Handler,"ax",%progbits
 133              		.align	2
 134              		.global	DebugMon_Handler
 135              		.thumb
 136              		.thumb_func
 138              	DebugMon_Handler:
 139              	.LFB117:
 130:../user/source/stm32f37x_it.c **** }
 131:../user/source/stm32f37x_it.c **** 
 132:../user/source/stm32f37x_it.c **** /**
 133:../user/source/stm32f37x_it.c ****   * @brief  This function handles Debug Monitor exception.
 134:../user/source/stm32f37x_it.c ****   * @param  None
 135:../user/source/stm32f37x_it.c ****   * @retval None
 136:../user/source/stm32f37x_it.c ****   */
 137:../user/source/stm32f37x_it.c **** void DebugMon_Handler(void)
 138:../user/source/stm32f37x_it.c **** {
 140              		.loc 1 138 0
 141              		.cfi_startproc
 142              		@ args = 0, pretend = 0, frame = 0
 143              		@ frame_needed = 0, uses_anonymous_args = 0
 144              		@ link register save eliminated.
 145 0000 7047     		bx	lr
 146              		.cfi_endproc
 147              	.LFE117:
 149 0002 00BF     		.section	.text.PendSV_Handler,"ax",%progbits
 150              		.align	2
 151              		.global	PendSV_Handler
 152              		.thumb
 153              		.thumb_func
 155              	PendSV_Handler:
 156              	.LFB118:
 139:../user/source/stm32f37x_it.c **** }
 140:../user/source/stm32f37x_it.c **** 
 141:../user/source/stm32f37x_it.c **** /**
 142:../user/source/stm32f37x_it.c ****   * @brief  This function handles PendSVC exception.
 143:../user/source/stm32f37x_it.c ****   * @param  None
 144:../user/source/stm32f37x_it.c ****   * @retval None
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s 			page 6


 145:../user/source/stm32f37x_it.c ****   */
 146:../user/source/stm32f37x_it.c **** void PendSV_Handler(void)
 147:../user/source/stm32f37x_it.c **** {
 157              		.loc 1 147 0
 158              		.cfi_startproc
 159              		@ args = 0, pretend = 0, frame = 0
 160              		@ frame_needed = 0, uses_anonymous_args = 0
 161              		@ link register save eliminated.
 162 0000 7047     		bx	lr
 163              		.cfi_endproc
 164              	.LFE118:
 166 0002 00BF     		.section	.text.SysTick_Handler,"ax",%progbits
 167              		.align	2
 168              		.global	SysTick_Handler
 169              		.thumb
 170              		.thumb_func
 172              	SysTick_Handler:
 173              	.LFB119:
 148:../user/source/stm32f37x_it.c **** }
 149:../user/source/stm32f37x_it.c **** 
 150:../user/source/stm32f37x_it.c **** /**
 151:../user/source/stm32f37x_it.c ****   * @brief  This function handles SysTick Handler.
 152:../user/source/stm32f37x_it.c ****   * @param  None
 153:../user/source/stm32f37x_it.c ****   * @retval None
 154:../user/source/stm32f37x_it.c ****   */
 155:../user/source/stm32f37x_it.c **** void SysTick_Handler(void)
 156:../user/source/stm32f37x_it.c **** {
 174              		.loc 1 156 0
 175              		.cfi_startproc
 176              		@ args = 0, pretend = 0, frame = 0
 177              		@ frame_needed = 0, uses_anonymous_args = 0
 178              		@ link register save eliminated.
 157:../user/source/stm32f37x_it.c ****     if (TICKS++ & 0x07 == 0)
 179              		.loc 1 157 0
 180 0000 024A     		ldr	r2, .L14
 181 0002 1388     		ldrh	r3, [r2]
 182 0004 0133     		adds	r3, r3, #1
 183 0006 1380     		strh	r3, [r2]	@ movhi
 184 0008 7047     		bx	lr
 185              	.L15:
 186 000a 00BF     		.align	2
 187              	.L14:
 188 000c 00000000 		.word	.LANCHOR0
 189              		.cfi_endproc
 190              	.LFE119:
 192              		.section	.text.USART1_IRQHandler,"ax",%progbits
 193              		.align	2
 194              		.global	USART1_IRQHandler
 195              		.thumb
 196              		.thumb_func
 198              	USART1_IRQHandler:
 199              	.LFB120:
 158:../user/source/stm32f37x_it.c ****     {
 159:../user/source/stm32f37x_it.c ****         if (Bit_SET == GPIO_ReadOutputDataBit(GPIOC, GPIO_Pin_13))
 160:../user/source/stm32f37x_it.c ****         {
 161:../user/source/stm32f37x_it.c ****             GPIO_WriteBit(GPIOC, GPIO_Pin_13, Bit_RESET); //拉低PC13
 162:../user/source/stm32f37x_it.c ****         }
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s 			page 7


 163:../user/source/stm32f37x_it.c ****         else
 164:../user/source/stm32f37x_it.c ****         {
 165:../user/source/stm32f37x_it.c ****             GPIO_WriteBit(GPIOC, GPIO_Pin_13, Bit_SET);
 166:../user/source/stm32f37x_it.c ****         }
 167:../user/source/stm32f37x_it.c ****     }
 168:../user/source/stm32f37x_it.c **** }
 169:../user/source/stm32f37x_it.c **** 
 170:../user/source/stm32f37x_it.c **** /******************************************************************************/
 171:../user/source/stm32f37x_it.c **** /*                 STM32F37x Peripherals Interrupt Handlers                   */
 172:../user/source/stm32f37x_it.c **** /*  Add here the Interrupt Handler for the used peripheral(s) (PPP), for the  */
 173:../user/source/stm32f37x_it.c **** /*  available peripheral interrupt handler's name please refer to the startup */
 174:../user/source/stm32f37x_it.c **** /*  file (startup_stm32f37x.s).                                            */
 175:../user/source/stm32f37x_it.c **** /******************************************************************************/
 176:../user/source/stm32f37x_it.c **** 
 177:../user/source/stm32f37x_it.c **** /**
 178:../user/source/stm32f37x_it.c ****   * @brief  This function handles PPP interrupt request.
 179:../user/source/stm32f37x_it.c ****   * @param  None
 180:../user/source/stm32f37x_it.c ****   * @retval None
 181:../user/source/stm32f37x_it.c ****   */
 182:../user/source/stm32f37x_it.c **** /*void PPP_IRQHandler(void)
 183:../user/source/stm32f37x_it.c **** {
 184:../user/source/stm32f37x_it.c **** }*/
 185:../user/source/stm32f37x_it.c **** 
 186:../user/source/stm32f37x_it.c **** /********************************************************************
 187:../user/source/stm32f37x_it.c **** * 功    能：USART1_IRQHandler中断函数
 188:../user/source/stm32f37x_it.c ****             将串口数据写到Uart1缓存结构体中的数组
 189:../user/source/stm32f37x_it.c **** * 输    入：None
 190:../user/source/stm32f37x_it.c **** * 输    出：None
 191:../user/source/stm32f37x_it.c **** *           
 192:../user/source/stm32f37x_it.c **** * 编 写 人：王君龙
 193:../user/source/stm32f37x_it.c **** * 编写日期：2016.6.23
 194:../user/source/stm32f37x_it.c **** **********************************************************************/
 195:../user/source/stm32f37x_it.c **** void USART1_IRQHandler(void)
 196:../user/source/stm32f37x_it.c **** {
 200              		.loc 1 196 0
 201              		.cfi_startproc
 202              		@ args = 0, pretend = 0, frame = 0
 203              		@ frame_needed = 0, uses_anonymous_args = 0
 204 0000 70B5     		push	{r4, r5, r6, lr}
 205              	.LCFI0:
 206              		.cfi_def_cfa_offset 16
 207              		.cfi_offset 4, -16
 208              		.cfi_offset 5, -12
 209              		.cfi_offset 6, -8
 210              		.cfi_offset 14, -4
 197:../user/source/stm32f37x_it.c ****     if (USART_GetFlagStatus(pUartZD->handler, USART_FLAG_ORE))
 211              		.loc 1 197 0
 212 0002 394B     		ldr	r3, .L22
 213 0004 1B68     		ldr	r3, [r3]
 214 0006 0821     		movs	r1, #8
 215 0008 1868     		ldr	r0, [r3]
 216 000a FFF7FEFF 		bl	USART_GetFlagStatus
 217              	.LVL0:
 218 000e 28B1     		cbz	r0, .L17
 198:../user/source/stm32f37x_it.c ****     {
 199:../user/source/stm32f37x_it.c ****         USART_ClearFlag(pUartZD->handler, USART_FLAG_ORE);
 219              		.loc 1 199 0
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s 			page 8


 220 0010 354B     		ldr	r3, .L22
 221 0012 1B68     		ldr	r3, [r3]
 222 0014 0821     		movs	r1, #8
 223 0016 1868     		ldr	r0, [r3]
 224 0018 FFF7FEFF 		bl	USART_ClearFlag
 225              	.LVL1:
 226              	.L17:
 200:../user/source/stm32f37x_it.c ****     }
 201:../user/source/stm32f37x_it.c **** 
 202:../user/source/stm32f37x_it.c ****     if (USART_GetITStatus(pUartZD->handler, USART_IT_RXNE) != RESET)
 227              		.loc 1 202 0
 228 001c 324B     		ldr	r3, .L22
 229 001e 1B68     		ldr	r3, [r3]
 230 0020 3249     		ldr	r1, .L22+4
 231 0022 1868     		ldr	r0, [r3]
 232 0024 FFF7FEFF 		bl	USART_GetITStatus
 233              	.LVL2:
 234 0028 E8B1     		cbz	r0, .L18
 203:../user/source/stm32f37x_it.c ****     {
 204:../user/source/stm32f37x_it.c ****         if (blDrv_Buf_IsFull(pUartZD->pRsvbuf) != true) //if串口1接收缓存区不满
 235              		.loc 1 204 0
 236 002a 2F4B     		ldr	r3, .L22
 237 002c 1B68     		ldr	r3, [r3]
 238 002e 5868     		ldr	r0, [r3, #4]
 239 0030 FFF7FEFF 		bl	blDrv_Buf_IsFull
 240              	.LVL3:
 241 0034 B8B9     		cbnz	r0, .L18
 205:../user/source/stm32f37x_it.c ****         {
 206:../user/source/stm32f37x_it.c ****             pUartZD->pRsvbuf->data[pUartZD->pRsvbuf->wr] = (uint8_t)USART_ReceiveData(pUartZD->hand
 242              		.loc 1 206 0
 243 0036 2C4C     		ldr	r4, .L22
 244 0038 2368     		ldr	r3, [r4]
 245 003a 5D68     		ldr	r5, [r3, #4]
 246 003c D5F8EC63 		ldr	r6, [r5, #1004]
 247 0040 1868     		ldr	r0, [r3]
 248 0042 FFF7FEFF 		bl	USART_ReceiveData
 249              	.LVL4:
 250 0046 A855     		strb	r0, [r5, r6]
 207:../user/source/stm32f37x_it.c ****             //ucDrv_Buf_Uart1_Rcv.ucBuf[ucDrv_Buf_Uart1_Rcv.WR_Index] = (uint8_t)USART_ReceiveData(
 208:../user/source/stm32f37x_it.c ****             //ucDrv_Buf_Uart1_Rcv.WR_Index = (ucDrv_Buf_Uart1_Rcv.WR_Index + 1) % DRV_BUF_SIZE;
 209:../user/source/stm32f37x_it.c ****             pUartZD->pRsvbuf->wr = (pUartZD->pRsvbuf->wr + 1) % DRV_BUF_SIZE;
 251              		.loc 1 209 0
 252 0048 2368     		ldr	r3, [r4]
 253 004a 5968     		ldr	r1, [r3, #4]
 254 004c D1F8EC23 		ldr	r2, [r1, #1004]
 255 0050 0132     		adds	r2, r2, #1
 256 0052 274B     		ldr	r3, .L22+8
 257 0054 A3FB0203 		umull	r0, r3, r3, r2
 258 0058 9B09     		lsrs	r3, r3, #6
 259 005a 4FF47A70 		mov	r0, #1000
 260 005e 00FB1323 		mls	r3, r0, r3, r2
 261 0062 C1F8EC33 		str	r3, [r1, #1004]
 262              	.L18:
 210:../user/source/stm32f37x_it.c ****         }
 211:../user/source/stm32f37x_it.c ****     };
 212:../user/source/stm32f37x_it.c **** 
 213:../user/source/stm32f37x_it.c ****     //从串口1的发送缓存向外发一个字节
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s 			page 9


 214:../user/source/stm32f37x_it.c ****     if (USART_GetITStatus(pUartZD->handler, USART_IT_TXE) != RESET)
 263              		.loc 1 214 0
 264 0066 204B     		ldr	r3, .L22
 265 0068 1B68     		ldr	r3, [r3]
 266 006a 2249     		ldr	r1, .L22+12
 267 006c 1868     		ldr	r0, [r3]
 268 006e FFF7FEFF 		bl	USART_GetITStatus
 269              	.LVL5:
 270 0072 38B3     		cbz	r0, .L19
 215:../user/source/stm32f37x_it.c ****     {
 216:../user/source/stm32f37x_it.c ****         USART_ClearITPendingBit(pUartZD->handler, USART_IT_TXE);
 271              		.loc 1 216 0
 272 0074 1C4C     		ldr	r4, .L22
 273 0076 2368     		ldr	r3, [r4]
 274 0078 1E49     		ldr	r1, .L22+12
 275 007a 1868     		ldr	r0, [r3]
 276 007c FFF7FEFF 		bl	USART_ClearITPendingBit
 277              	.LVL6:
 217:../user/source/stm32f37x_it.c ****         //USART_SendData(pUartZD->handler, (uint16_t)ucDrv_Buf_Uart1_Snd.ucBuf[ucDrv_Buf_Uart1_Snd.
 218:../user/source/stm32f37x_it.c ****         USART_SendData(pUartZD->handler, (uint16_t)pUartZD->pSndbuf->data[pUartZD->pSndbuf->rd]);
 278              		.loc 1 218 0
 279 0080 2368     		ldr	r3, [r4]
 280 0082 9A68     		ldr	r2, [r3, #8]
 281 0084 D2F8E813 		ldr	r1, [r2, #1000]
 282 0088 515C     		ldrb	r1, [r2, r1]	@ zero_extendqisi2
 283 008a 1868     		ldr	r0, [r3]
 284 008c FFF7FEFF 		bl	USART_SendData
 285              	.LVL7:
 219:../user/source/stm32f37x_it.c ****         //ucDrv_Buf_Uart1_Snd.RD_Index = (ucDrv_Buf_Uart1_Snd.RD_Index + 1) % DRV_BUF_SIZE;
 220:../user/source/stm32f37x_it.c ****         pUartZD->pSndbuf->rd = (pUartZD->pSndbuf->rd + 1) % DRV_BUF_SIZE;
 286              		.loc 1 220 0
 287 0090 2168     		ldr	r1, [r4]
 288 0092 8868     		ldr	r0, [r1, #8]
 289 0094 D0F8E823 		ldr	r2, [r0, #1000]
 290 0098 0132     		adds	r2, r2, #1
 291 009a 154B     		ldr	r3, .L22+8
 292 009c A3FB0243 		umull	r4, r3, r3, r2
 293 00a0 9B09     		lsrs	r3, r3, #6
 294 00a2 4FF47A74 		mov	r4, #1000
 295 00a6 04FB1323 		mls	r3, r4, r3, r2
 296 00aa C0F8E833 		str	r3, [r0, #1000]
 221:../user/source/stm32f37x_it.c ****         if (blDrv_Buf_IsEmpty(pUartZD->pSndbuf) == true)
 297              		.loc 1 221 0
 298 00ae 8868     		ldr	r0, [r1, #8]
 299 00b0 FFF7FEFF 		bl	blDrv_Buf_IsEmpty
 300              	.LVL8:
 301 00b4 30B1     		cbz	r0, .L19
 222:../user/source/stm32f37x_it.c ****         {
 223:../user/source/stm32f37x_it.c ****             USART_ITConfig(pUartZD->handler, USART_IT_TXE, DISABLE);
 302              		.loc 1 223 0
 303 00b6 0C4B     		ldr	r3, .L22
 304 00b8 1B68     		ldr	r3, [r3]
 305 00ba 0022     		movs	r2, #0
 306 00bc 0D49     		ldr	r1, .L22+12
 307 00be 1868     		ldr	r0, [r3]
 308 00c0 FFF7FEFF 		bl	USART_ITConfig
 309              	.LVL9:
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s 			page 10


 310              	.L19:
 224:../user/source/stm32f37x_it.c ****         }
 225:../user/source/stm32f37x_it.c ****     }
 226:../user/source/stm32f37x_it.c ****     /*接收超时一个字节时间内未收到数据，大约1ms*/
 227:../user/source/stm32f37x_it.c ****     /*隐患：DLT645规约规定字节超时时间为500ms*/
 228:../user/source/stm32f37x_it.c ****     if (USART_GetITStatus(pUartZD->handler, USART_IT_IDLE) != RESET)
 311              		.loc 1 228 0
 312 00c4 084B     		ldr	r3, .L22
 313 00c6 1B68     		ldr	r3, [r3]
 314 00c8 0B49     		ldr	r1, .L22+16
 315 00ca 1868     		ldr	r0, [r3]
 316 00cc FFF7FEFF 		bl	USART_GetITStatus
 317              	.LVL10:
 318 00d0 40B1     		cbz	r0, .L16
 229:../user/source/stm32f37x_it.c ****     {
 230:../user/source/stm32f37x_it.c ****         USART_ClearITPendingBit(pUartZD->handler, USART_IT_IDLE);
 319              		.loc 1 230 0
 320 00d2 054B     		ldr	r3, .L22
 321 00d4 1B68     		ldr	r3, [r3]
 322 00d6 0849     		ldr	r1, .L22+16
 323 00d8 1868     		ldr	r0, [r3]
 324 00da FFF7FEFF 		bl	USART_ClearITPendingBit
 325              	.LVL11:
 231:../user/source/stm32f37x_it.c ****         FLAG_UartZD_HasData = true;
 326              		.loc 1 231 0
 327 00de 0122     		movs	r2, #1
 328 00e0 064B     		ldr	r3, .L22+20
 329 00e2 1A70     		strb	r2, [r3]
 330              	.L16:
 331 00e4 70BD     		pop	{r4, r5, r6, pc}
 332              	.L23:
 333 00e6 00BF     		.align	2
 334              	.L22:
 335 00e8 00000000 		.word	pUartZD
 336 00ec 05010500 		.word	327941
 337 00f0 D34D6210 		.word	274877907
 338 00f4 07010700 		.word	459015
 339 00f8 04010400 		.word	262404
 340 00fc 00000000 		.word	FLAG_UartZD_HasData
 341              		.cfi_endproc
 342              	.LFE120:
 344              		.section	.text.USART2_IRQHandler,"ax",%progbits
 345              		.align	2
 346              		.global	USART2_IRQHandler
 347              		.thumb
 348              		.thumb_func
 350              	USART2_IRQHandler:
 351              	.LFB121:
 232:../user/source/stm32f37x_it.c ****     }
 233:../user/source/stm32f37x_it.c **** }
 234:../user/source/stm32f37x_it.c **** 
 235:../user/source/stm32f37x_it.c **** /********************************************************************
 236:../user/source/stm32f37x_it.c **** * 功    能：USART2_IRQHandler中断函数
 237:../user/source/stm32f37x_it.c ****             将串口数据读取到Uart2缓存结构体中的数组
 238:../user/source/stm32f37x_it.c **** * 输    入：None
 239:../user/source/stm32f37x_it.c **** * 输    出：None
 240:../user/source/stm32f37x_it.c **** *           
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s 			page 11


 241:../user/source/stm32f37x_it.c **** * 编 写 人：王君龙
 242:../user/source/stm32f37x_it.c **** * 编写日期：2018.4.17
 243:../user/source/stm32f37x_it.c **** **********************************************************************/
 244:../user/source/stm32f37x_it.c **** void USART2_IRQHandler(void)
 245:../user/source/stm32f37x_it.c **** {
 352              		.loc 1 245 0
 353              		.cfi_startproc
 354              		@ args = 0, pretend = 0, frame = 0
 355              		@ frame_needed = 0, uses_anonymous_args = 0
 356 0000 70B5     		push	{r4, r5, r6, lr}
 357              	.LCFI1:
 358              		.cfi_def_cfa_offset 16
 359              		.cfi_offset 4, -16
 360              		.cfi_offset 5, -12
 361              		.cfi_offset 6, -8
 362              		.cfi_offset 14, -4
 246:../user/source/stm32f37x_it.c **** #ifdef ENABLE_INFR
 247:../user/source/stm32f37x_it.c ****     if (USART_GetFlagStatus(pUartIR->handler, USART_FLAG_ORE) == SET)
 363              		.loc 1 247 0
 364 0002 3B4B     		ldr	r3, .L30
 365 0004 1B68     		ldr	r3, [r3]
 366 0006 0821     		movs	r1, #8
 367 0008 1868     		ldr	r0, [r3]
 368 000a FFF7FEFF 		bl	USART_GetFlagStatus
 369              	.LVL12:
 370 000e 0128     		cmp	r0, #1
 371 0010 05D1     		bne	.L25
 248:../user/source/stm32f37x_it.c ****         USART_ClearFlag(pUartIR->handler, USART_FLAG_ORE);
 372              		.loc 1 248 0
 373 0012 374B     		ldr	r3, .L30
 374 0014 1B68     		ldr	r3, [r3]
 375 0016 0821     		movs	r1, #8
 376 0018 1868     		ldr	r0, [r3]
 377 001a FFF7FEFF 		bl	USART_ClearFlag
 378              	.LVL13:
 379              	.L25:
 249:../user/source/stm32f37x_it.c ****     if (USART_GetITStatus(pUartIR->handler, USART_IT_RXNE) != RESET)
 380              		.loc 1 249 0
 381 001e 344B     		ldr	r3, .L30
 382 0020 1B68     		ldr	r3, [r3]
 383 0022 3449     		ldr	r1, .L30+4
 384 0024 1868     		ldr	r0, [r3]
 385 0026 FFF7FEFF 		bl	USART_GetITStatus
 386              	.LVL14:
 387 002a 08B3     		cbz	r0, .L26
 250:../user/source/stm32f37x_it.c ****     {
 251:../user/source/stm32f37x_it.c ****         USART_ClearITPendingBit(pUartIR->handler, USART_IT_RXNE);
 388              		.loc 1 251 0
 389 002c 304C     		ldr	r4, .L30
 390 002e 2368     		ldr	r3, [r4]
 391 0030 3049     		ldr	r1, .L30+4
 392 0032 1868     		ldr	r0, [r3]
 393 0034 FFF7FEFF 		bl	USART_ClearITPendingBit
 394              	.LVL15:
 252:../user/source/stm32f37x_it.c ****         //if (blDrv_Buf_IsFull(&ucDrv_Buf_Uart2_Rcv) != true) //if串口2接收缓存区不满
 253:../user/source/stm32f37x_it.c ****         if (blDrv_Buf_IsFull(pUartIR->pRsvbuf) != true) //if串口2接收缓存区不满
 395              		.loc 1 253 0
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s 			page 12


 396 0038 2368     		ldr	r3, [r4]
 397 003a 5868     		ldr	r0, [r3, #4]
 398 003c FFF7FEFF 		bl	blDrv_Buf_IsFull
 399              	.LVL16:
 400 0040 B0B9     		cbnz	r0, .L26
 254:../user/source/stm32f37x_it.c ****         {
 255:../user/source/stm32f37x_it.c ****             //ucDrv_Buf_Uart2_Rcv.ucBuf[ucDrv_Buf_Uart2_Rcv.WR_Index] = (uint8_t)USART_ReceiveData(
 256:../user/source/stm32f37x_it.c ****             pUartIR->pRsvbuf->data[pUartIR->pRsvbuf->wr] = (uint8_t)USART_ReceiveData(pUartIR->hand
 401              		.loc 1 256 0
 402 0042 2368     		ldr	r3, [r4]
 403 0044 5D68     		ldr	r5, [r3, #4]
 404 0046 D5F8EC63 		ldr	r6, [r5, #1004]
 405 004a 1868     		ldr	r0, [r3]
 406 004c FFF7FEFF 		bl	USART_ReceiveData
 407              	.LVL17:
 408 0050 A855     		strb	r0, [r5, r6]
 257:../user/source/stm32f37x_it.c ****             //ucDrv_Buf_Uart2_Rcv.WR_Index = (ucDrv_Buf_Uart2_Rcv.WR_Index + 1) % DRV_BUF_SIZE;
 258:../user/source/stm32f37x_it.c ****             pUartIR->pRsvbuf->wr = (pUartIR->pRsvbuf->wr + 1) % DRV_BUF_SIZE;
 409              		.loc 1 258 0
 410 0052 2368     		ldr	r3, [r4]
 411 0054 5968     		ldr	r1, [r3, #4]
 412 0056 D1F8EC23 		ldr	r2, [r1, #1004]
 413 005a 0132     		adds	r2, r2, #1
 414 005c 264B     		ldr	r3, .L30+8
 415 005e A3FB0203 		umull	r0, r3, r3, r2
 416 0062 9B09     		lsrs	r3, r3, #6
 417 0064 4FF47A70 		mov	r0, #1000
 418 0068 00FB1323 		mls	r3, r0, r3, r2
 419 006c C1F8EC33 		str	r3, [r1, #1004]
 420              	.L26:
 259:../user/source/stm32f37x_it.c ****         }
 260:../user/source/stm32f37x_it.c ****     };
 261:../user/source/stm32f37x_it.c ****     if (USART_GetITStatus(pUartIR->handler, USART_IT_TXE) != RESET)
 421              		.loc 1 261 0
 422 0070 1F4B     		ldr	r3, .L30
 423 0072 1B68     		ldr	r3, [r3]
 424 0074 2149     		ldr	r1, .L30+12
 425 0076 1868     		ldr	r0, [r3]
 426 0078 FFF7FEFF 		bl	USART_GetITStatus
 427              	.LVL18:
 428 007c 0028     		cmp	r0, #0
 429 007e 36D0     		beq	.L24
 262:../user/source/stm32f37x_it.c ****     {
 263:../user/source/stm32f37x_it.c ****         USART_ClearITPendingBit(pUartIR->handler, USART_IT_TXE);
 430              		.loc 1 263 0
 431 0080 1B4C     		ldr	r4, .L30
 432 0082 2368     		ldr	r3, [r4]
 433 0084 1D49     		ldr	r1, .L30+12
 434 0086 1868     		ldr	r0, [r3]
 435 0088 FFF7FEFF 		bl	USART_ClearITPendingBit
 436              	.LVL19:
 264:../user/source/stm32f37x_it.c ****         //USART_SendData(pUartIR->handler, (uint16_t)ucDrv_Buf_Uart2_Snd.ucBuf[ucDrv_Buf_Uart2_Snd.
 265:../user/source/stm32f37x_it.c ****         USART_SendData(pUartIR->handler, (uint16_t)pUartIR->pSndbuf->data[pUartIR->pSndbuf->rd]);
 437              		.loc 1 265 0
 438 008c 2368     		ldr	r3, [r4]
 439 008e 9A68     		ldr	r2, [r3, #8]
 440 0090 D2F8E813 		ldr	r1, [r2, #1000]
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s 			page 13


 441 0094 515C     		ldrb	r1, [r2, r1]	@ zero_extendqisi2
 442 0096 1868     		ldr	r0, [r3]
 443 0098 FFF7FEFF 		bl	USART_SendData
 444              	.LVL20:
 266:../user/source/stm32f37x_it.c ****         //ucDrv_Buf_Uart2_Snd.RD_Index = (ucDrv_Buf_Uart2_Snd.RD_Index + 1) % DRV_BUF_SIZE;
 267:../user/source/stm32f37x_it.c ****         pUartIR->pSndbuf->rd = (pUartIR->pSndbuf->rd + 1) % DRV_BUF_SIZE;
 445              		.loc 1 267 0
 446 009c 2168     		ldr	r1, [r4]
 447 009e 8868     		ldr	r0, [r1, #8]
 448 00a0 D0F8E823 		ldr	r2, [r0, #1000]
 449 00a4 0132     		adds	r2, r2, #1
 450 00a6 144B     		ldr	r3, .L30+8
 451 00a8 A3FB0243 		umull	r4, r3, r3, r2
 452 00ac 9B09     		lsrs	r3, r3, #6
 453 00ae 4FF47A74 		mov	r4, #1000
 454 00b2 04FB1323 		mls	r3, r4, r3, r2
 455 00b6 C0F8E833 		str	r3, [r0, #1000]
 268:../user/source/stm32f37x_it.c ****         if (blDrv_Buf_IsEmpty(pUartIR->pSndbuf) == true)
 456              		.loc 1 268 0
 457 00ba 8868     		ldr	r0, [r1, #8]
 458 00bc FFF7FEFF 		bl	blDrv_Buf_IsEmpty
 459              	.LVL21:
 460 00c0 A8B1     		cbz	r0, .L24
 269:../user/source/stm32f37x_it.c ****         {
 270:../user/source/stm32f37x_it.c ****             USART_ITConfig(pUartIR->handler, USART_IT_TXE, DISABLE);
 461              		.loc 1 270 0
 462 00c2 0B4B     		ldr	r3, .L30
 463 00c4 1B68     		ldr	r3, [r3]
 464 00c6 0022     		movs	r2, #0
 465 00c8 0C49     		ldr	r1, .L30+12
 466 00ca 1868     		ldr	r0, [r3]
 467 00cc FFF7FEFF 		bl	USART_ITConfig
 468              	.LVL22:
 469              	.L28:
 271:../user/source/stm32f37x_it.c ****             //TIM_CCxCmd(TIM5, TIM_Channel_2, TIM_CCx_Disable);
 272:../user/source/stm32f37x_it.c ****             while (RESET == USART_GetFlagStatus(pUartIR->handler, USART_FLAG_TC))
 470              		.loc 1 272 0 discriminator 1
 471 00d0 074B     		ldr	r3, .L30
 472 00d2 1B68     		ldr	r3, [r3]
 473 00d4 4021     		movs	r1, #64
 474 00d6 1868     		ldr	r0, [r3]
 475 00d8 FFF7FEFF 		bl	USART_GetFlagStatus
 476              	.LVL23:
 477 00dc 0028     		cmp	r0, #0
 478 00de F7D0     		beq	.L28
 273:../user/source/stm32f37x_it.c ****             {
 274:../user/source/stm32f37x_it.c ****             }
 275:../user/source/stm32f37x_it.c ****             USART_ITConfig(pUartIR->handler, USART_IT_RXNE, ENABLE);
 479              		.loc 1 275 0
 480 00e0 034B     		ldr	r3, .L30
 481 00e2 1B68     		ldr	r3, [r3]
 482 00e4 0122     		movs	r2, #1
 483 00e6 0349     		ldr	r1, .L30+4
 484 00e8 1868     		ldr	r0, [r3]
 485 00ea FFF7FEFF 		bl	USART_ITConfig
 486              	.LVL24:
 487              	.L24:
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s 			page 14


 488 00ee 70BD     		pop	{r4, r5, r6, pc}
 489              	.L31:
 490              		.align	2
 491              	.L30:
 492 00f0 00000000 		.word	pUartIR
 493 00f4 05010500 		.word	327941
 494 00f8 D34D6210 		.word	274877907
 495 00fc 07010700 		.word	459015
 496              		.cfi_endproc
 497              	.LFE121:
 499              		.section	.text.USART3_IRQHandler,"ax",%progbits
 500              		.align	2
 501              		.global	USART3_IRQHandler
 502              		.thumb
 503              		.thumb_func
 505              	USART3_IRQHandler:
 506              	.LFB122:
 276:../user/source/stm32f37x_it.c ****         }
 277:../user/source/stm32f37x_it.c ****     }
 278:../user/source/stm32f37x_it.c **** #endif
 279:../user/source/stm32f37x_it.c **** }
 280:../user/source/stm32f37x_it.c **** 
 281:../user/source/stm32f37x_it.c **** /********************************************************************
 282:../user/source/stm32f37x_it.c **** * 功    能：USART3_IRQHandler中断函数
 283:../user/source/stm32f37x_it.c ****             将串口数据读取到Uart3缓存结构体中的数组
 284:../user/source/stm32f37x_it.c **** * 输    入：None
 285:../user/source/stm32f37x_it.c **** * 输    出：None
 286:../user/source/stm32f37x_it.c **** *           
 287:../user/source/stm32f37x_it.c **** * 编 写 人：王君龙
 288:../user/source/stm32f37x_it.c **** * 编写日期：2016.6.23
 289:../user/source/stm32f37x_it.c **** **********************************************************************/
 290:../user/source/stm32f37x_it.c **** void USART3_IRQHandler(void)
 291:../user/source/stm32f37x_it.c **** {
 507              		.loc 1 291 0
 508              		.cfi_startproc
 509              		@ args = 0, pretend = 0, frame = 0
 510              		@ frame_needed = 0, uses_anonymous_args = 0
 511 0000 70B5     		push	{r4, r5, r6, lr}
 512              	.LCFI2:
 513              		.cfi_def_cfa_offset 16
 514              		.cfi_offset 4, -16
 515              		.cfi_offset 5, -12
 516              		.cfi_offset 6, -8
 517              		.cfi_offset 14, -4
 292:../user/source/stm32f37x_it.c ****     if (USART_GetFlagStatus(pUartDB->handler, USART_FLAG_ORE))
 518              		.loc 1 292 0
 519 0002 364B     		ldr	r3, .L38
 520 0004 1B68     		ldr	r3, [r3]
 521 0006 0821     		movs	r1, #8
 522 0008 1868     		ldr	r0, [r3]
 523 000a FFF7FEFF 		bl	USART_GetFlagStatus
 524              	.LVL25:
 525 000e 28B1     		cbz	r0, .L33
 293:../user/source/stm32f37x_it.c ****     {
 294:../user/source/stm32f37x_it.c ****         USART_ClearFlag(pUartDB->handler, USART_FLAG_ORE);
 526              		.loc 1 294 0
 527 0010 324B     		ldr	r3, .L38
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s 			page 15


 528 0012 1B68     		ldr	r3, [r3]
 529 0014 0821     		movs	r1, #8
 530 0016 1868     		ldr	r0, [r3]
 531 0018 FFF7FEFF 		bl	USART_ClearFlag
 532              	.LVL26:
 533              	.L33:
 295:../user/source/stm32f37x_it.c ****     }
 296:../user/source/stm32f37x_it.c ****     if (RESET != USART_GetITStatus(pUartDB->handler, USART_IT_RXNE)) //读一个字节入串口3接收缓存
 534              		.loc 1 296 0
 535 001c 2F4B     		ldr	r3, .L38
 536 001e 1B68     		ldr	r3, [r3]
 537 0020 2F49     		ldr	r1, .L38+4
 538 0022 1868     		ldr	r0, [r3]
 539 0024 FFF7FEFF 		bl	USART_GetITStatus
 540              	.LVL27:
 541 0028 E8B1     		cbz	r0, .L34
 297:../user/source/stm32f37x_it.c ****     {
 298:../user/source/stm32f37x_it.c ****         if (blDrv_Buf_IsFull(pUartDB->pRsvbuf) != true) //if串口3接收缓存区不满
 542              		.loc 1 298 0
 543 002a 2C4B     		ldr	r3, .L38
 544 002c 1B68     		ldr	r3, [r3]
 545 002e 5868     		ldr	r0, [r3, #4]
 546 0030 FFF7FEFF 		bl	blDrv_Buf_IsFull
 547              	.LVL28:
 548 0034 B8B9     		cbnz	r0, .L34
 299:../user/source/stm32f37x_it.c ****         {
 300:../user/source/stm32f37x_it.c ****             //ucDrv_Buf_Uart3_Rcv.ucBuf[ucDrv_Buf_Uart3_Rcv.WR_Index] = (uint8_t)USART_ReceiveData(
 301:../user/source/stm32f37x_it.c ****             pUartDB->pRsvbuf->data[pUartDB->pRsvbuf->wr] = (uint8_t)USART_ReceiveData(pUartDB->hand
 549              		.loc 1 301 0
 550 0036 294C     		ldr	r4, .L38
 551 0038 2368     		ldr	r3, [r4]
 552 003a 5D68     		ldr	r5, [r3, #4]
 553 003c D5F8EC63 		ldr	r6, [r5, #1004]
 554 0040 1868     		ldr	r0, [r3]
 555 0042 FFF7FEFF 		bl	USART_ReceiveData
 556              	.LVL29:
 557 0046 A855     		strb	r0, [r5, r6]
 302:../user/source/stm32f37x_it.c ****             //ucDrv_Buf_Uart3_Rcv.WR_Index = (ucDrv_Buf_Uart3_Rcv.WR_Index + 1) % DRV_BUF_SIZE;
 303:../user/source/stm32f37x_it.c ****             pUartDB->pRsvbuf->wr = (pUartDB->pRsvbuf->wr + 1) % DRV_BUF_SIZE;
 558              		.loc 1 303 0
 559 0048 2368     		ldr	r3, [r4]
 560 004a 5968     		ldr	r1, [r3, #4]
 561 004c D1F8EC23 		ldr	r2, [r1, #1004]
 562 0050 0132     		adds	r2, r2, #1
 563 0052 244B     		ldr	r3, .L38+8
 564 0054 A3FB0203 		umull	r0, r3, r3, r2
 565 0058 9B09     		lsrs	r3, r3, #6
 566 005a 4FF47A70 		mov	r0, #1000
 567 005e 00FB1323 		mls	r3, r0, r3, r2
 568 0062 C1F8EC33 		str	r3, [r1, #1004]
 569              	.L34:
 304:../user/source/stm32f37x_it.c ****         }
 305:../user/source/stm32f37x_it.c ****     }
 306:../user/source/stm32f37x_it.c ****     if (USART_GetITStatus(pUartDB->handler, USART_IT_TXE) != RESET)
 570              		.loc 1 306 0
 571 0066 1D4B     		ldr	r3, .L38
 572 0068 1B68     		ldr	r3, [r3]
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s 			page 16


 573 006a 1F49     		ldr	r1, .L38+12
 574 006c 1868     		ldr	r0, [r3]
 575 006e FFF7FEFF 		bl	USART_GetITStatus
 576              	.LVL30:
 577 0072 10B3     		cbz	r0, .L35
 307:../user/source/stm32f37x_it.c ****     {
 308:../user/source/stm32f37x_it.c ****         //USART_ClearITPendingBit(pUartDB->handler,USART_IT_TXE);
 309:../user/source/stm32f37x_it.c ****         //USART_SendData(pUartDB->handler, (uint16_t)ucDrv_Buf_Uart3_Snd.ucBuf[ucDrv_Buf_Uart3_Snd.
 310:../user/source/stm32f37x_it.c ****         USART_SendData(pUartDB->handler, (uint16_t)pUartDB->pSndbuf->data[pUartDB->pSndbuf->rd]);
 578              		.loc 1 310 0
 579 0074 194C     		ldr	r4, .L38
 580 0076 2368     		ldr	r3, [r4]
 581 0078 9A68     		ldr	r2, [r3, #8]
 582 007a D2F8E813 		ldr	r1, [r2, #1000]
 583 007e 515C     		ldrb	r1, [r2, r1]	@ zero_extendqisi2
 584 0080 1868     		ldr	r0, [r3]
 585 0082 FFF7FEFF 		bl	USART_SendData
 586              	.LVL31:
 311:../user/source/stm32f37x_it.c ****         //ucDrv_Buf_Uart3_Snd.RD_Index = (ucDrv_Buf_Uart3_Snd.RD_Index + 1) % DRV_BUF_SIZE;
 312:../user/source/stm32f37x_it.c ****         pUartDB->pSndbuf->rd = (pUartDB->pSndbuf->rd + 1) % DRV_BUF_SIZE;
 587              		.loc 1 312 0
 588 0086 2168     		ldr	r1, [r4]
 589 0088 8868     		ldr	r0, [r1, #8]
 590 008a D0F8E823 		ldr	r2, [r0, #1000]
 591 008e 0132     		adds	r2, r2, #1
 592 0090 144B     		ldr	r3, .L38+8
 593 0092 A3FB0243 		umull	r4, r3, r3, r2
 594 0096 9B09     		lsrs	r3, r3, #6
 595 0098 4FF47A74 		mov	r4, #1000
 596 009c 04FB1323 		mls	r3, r4, r3, r2
 597 00a0 C0F8E833 		str	r3, [r0, #1000]
 313:../user/source/stm32f37x_it.c ****         if (blDrv_Buf_IsEmpty(pUartDB->pSndbuf) == true)
 598              		.loc 1 313 0
 599 00a4 8868     		ldr	r0, [r1, #8]
 600 00a6 FFF7FEFF 		bl	blDrv_Buf_IsEmpty
 601              	.LVL32:
 602 00aa 30B1     		cbz	r0, .L35
 314:../user/source/stm32f37x_it.c ****             USART_ITConfig(pUartDB->handler, USART_IT_TXE, DISABLE);
 603              		.loc 1 314 0
 604 00ac 0B4B     		ldr	r3, .L38
 605 00ae 1B68     		ldr	r3, [r3]
 606 00b0 0022     		movs	r2, #0
 607 00b2 0D49     		ldr	r1, .L38+12
 608 00b4 1868     		ldr	r0, [r3]
 609 00b6 FFF7FEFF 		bl	USART_ITConfig
 610              	.LVL33:
 611              	.L35:
 315:../user/source/stm32f37x_it.c ****     }
 316:../user/source/stm32f37x_it.c ****     /*接收超时一个字节时间内未收到数据，大约1ms*/
 317:../user/source/stm32f37x_it.c ****     /*隐患：DLT645规约规定字节超时时间为500ms*/
 318:../user/source/stm32f37x_it.c ****     if (USART_GetITStatus(pUartDB->handler, USART_IT_IDLE) != RESET)
 612              		.loc 1 318 0
 613 00ba 084B     		ldr	r3, .L38
 614 00bc 1B68     		ldr	r3, [r3]
 615 00be 0B49     		ldr	r1, .L38+16
 616 00c0 1868     		ldr	r0, [r3]
 617 00c2 FFF7FEFF 		bl	USART_GetITStatus
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s 			page 17


 618              	.LVL34:
 619 00c6 40B1     		cbz	r0, .L32
 319:../user/source/stm32f37x_it.c ****     {
 320:../user/source/stm32f37x_it.c ****         USART_ClearITPendingBit(pUartDB->handler, USART_IT_IDLE);
 620              		.loc 1 320 0
 621 00c8 044B     		ldr	r3, .L38
 622 00ca 1B68     		ldr	r3, [r3]
 623 00cc 0749     		ldr	r1, .L38+16
 624 00ce 1868     		ldr	r0, [r3]
 625 00d0 FFF7FEFF 		bl	USART_ClearITPendingBit
 626              	.LVL35:
 321:../user/source/stm32f37x_it.c ****         FLAG_UartDB_HasData = true;
 627              		.loc 1 321 0
 628 00d4 0122     		movs	r2, #1
 629 00d6 064B     		ldr	r3, .L38+20
 630 00d8 1A70     		strb	r2, [r3]
 631              	.L32:
 632 00da 70BD     		pop	{r4, r5, r6, pc}
 633              	.L39:
 634              		.align	2
 635              	.L38:
 636 00dc 00000000 		.word	pUartDB
 637 00e0 05010500 		.word	327941
 638 00e4 D34D6210 		.word	274877907
 639 00e8 07010700 		.word	459015
 640 00ec 04010400 		.word	262404
 641 00f0 00000000 		.word	FLAG_UartDB_HasData
 642              		.cfi_endproc
 643              	.LFE122:
 645              		.section	.text.TIM2_IRQHandler,"ax",%progbits
 646              		.align	2
 647              		.global	TIM2_IRQHandler
 648              		.thumb
 649              		.thumb_func
 651              	TIM2_IRQHandler:
 652              	.LFB123:
 322:../user/source/stm32f37x_it.c ****     }
 323:../user/source/stm32f37x_it.c **** }
 324:../user/source/stm32f37x_it.c **** 
 325:../user/source/stm32f37x_it.c **** /********************************************************************
 326:../user/source/stm32f37x_it.c **** * 功    能：TIM2_IRQHandler断函数
 327:../user/source/stm32f37x_it.c ****             计时累加
 328:../user/source/stm32f37x_it.c **** * 输    入：None
 329:../user/source/stm32f37x_it.c **** * 输    出：None
 330:../user/source/stm32f37x_it.c **** *           
 331:../user/source/stm32f37x_it.c **** * 编 写 人：王君龙
 332:../user/source/stm32f37x_it.c **** * 编写日期：2016.6.23
 333:../user/source/stm32f37x_it.c **** **********************************************************************/
 334:../user/source/stm32f37x_it.c **** void TIM2_IRQHandler(void)
 335:../user/source/stm32f37x_it.c **** {
 653              		.loc 1 335 0
 654              		.cfi_startproc
 655              		@ args = 0, pretend = 0, frame = 0
 656              		@ frame_needed = 0, uses_anonymous_args = 0
 657 0000 08B5     		push	{r3, lr}
 658              	.LCFI3:
 659              		.cfi_def_cfa_offset 8
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s 			page 18


 660              		.cfi_offset 3, -8
 661              		.cfi_offset 14, -4
 336:../user/source/stm32f37x_it.c ****     if (TIM_GetITStatus(TIM2, TIM_IT_Update) != RESET)
 662              		.loc 1 336 0
 663 0002 0121     		movs	r1, #1
 664 0004 4FF08040 		mov	r0, #1073741824
 665 0008 FFF7FEFF 		bl	TIM_GetITStatus
 666              	.LVL36:
 667 000c 90B1     		cbz	r0, .L40
 337:../user/source/stm32f37x_it.c ****     {
 338:../user/source/stm32f37x_it.c ****         TIM_ClearITPendingBit(TIM2, TIM_IT_Update);
 668              		.loc 1 338 0
 669 000e 0121     		movs	r1, #1
 670 0010 4FF08040 		mov	r0, #1073741824
 671 0014 FFF7FEFF 		bl	TIM_ClearITPendingBit
 672              	.LVL37:
 339:../user/source/stm32f37x_it.c ****         if (blWordsCounterStatus == true)
 673              		.loc 1 339 0
 674 0018 074B     		ldr	r3, .L44
 675 001a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 676 001c 1BB1     		cbz	r3, .L42
 340:../user/source/stm32f37x_it.c ****         {
 341:../user/source/stm32f37x_it.c ****             uwTime2WordsCounter++;
 677              		.loc 1 341 0
 678 001e 074A     		ldr	r2, .L44+4
 679 0020 1388     		ldrh	r3, [r2]
 680 0022 0133     		adds	r3, r3, #1
 681 0024 1380     		strh	r3, [r2]	@ movhi
 682              	.L42:
 342:../user/source/stm32f37x_it.c ****         }
 343:../user/source/stm32f37x_it.c ****         if (blFramesCounterStatus == true)
 683              		.loc 1 343 0
 684 0026 064B     		ldr	r3, .L44+8
 685 0028 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 686 002a 1BB1     		cbz	r3, .L40
 344:../user/source/stm32f37x_it.c ****         {
 345:../user/source/stm32f37x_it.c ****             uwTime2FramesCounter++;
 687              		.loc 1 345 0
 688 002c 054A     		ldr	r2, .L44+12
 689 002e 1388     		ldrh	r3, [r2]
 690 0030 0133     		adds	r3, r3, #1
 691 0032 1380     		strh	r3, [r2]	@ movhi
 692              	.L40:
 693 0034 08BD     		pop	{r3, pc}
 694              	.L45:
 695 0036 00BF     		.align	2
 696              	.L44:
 697 0038 00000000 		.word	blWordsCounterStatus
 698 003c 00000000 		.word	uwTime2WordsCounter
 699 0040 00000000 		.word	blFramesCounterStatus
 700 0044 00000000 		.word	uwTime2FramesCounter
 701              		.cfi_endproc
 702              	.LFE123:
 704              		.section	.text.TIM5_IRQHandler,"ax",%progbits
 705              		.align	2
 706              		.global	TIM5_IRQHandler
 707              		.thumb
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s 			page 19


 708              		.thumb_func
 710              	TIM5_IRQHandler:
 711              	.LFB124:
 346:../user/source/stm32f37x_it.c ****         }
 347:../user/source/stm32f37x_it.c ****     }
 348:../user/source/stm32f37x_it.c **** }
 349:../user/source/stm32f37x_it.c **** 
 350:../user/source/stm32f37x_it.c **** /********************************************************************
 351:../user/source/stm32f37x_it.c **** * 功    能：TIM5_IRQHandler断函数
 352:../user/source/stm32f37x_it.c **** 				PWM输出
 353:../user/source/stm32f37x_it.c **** * 输    入：None
 354:../user/source/stm32f37x_it.c **** * 输    出：None
 355:../user/source/stm32f37x_it.c **** *
 356:../user/source/stm32f37x_it.c **** * 编 写 人：王君龙
 357:../user/source/stm32f37x_it.c **** * 编写日期：2017.9.11
 358:../user/source/stm32f37x_it.c **** **********************************************************************/
 359:../user/source/stm32f37x_it.c **** void TIM5_IRQHandler(void)
 360:../user/source/stm32f37x_it.c **** {
 712              		.loc 1 360 0
 713              		.cfi_startproc
 714              		@ args = 0, pretend = 0, frame = 0
 715              		@ frame_needed = 0, uses_anonymous_args = 0
 716              		@ link register save eliminated.
 717 0000 7047     		bx	lr
 718              		.cfi_endproc
 719              	.LFE124:
 721              		.global	capture
 722 0002 00BF     		.section	.bss.capture,"aw",%nobits
 723              		.align	1
 726              	capture:
 727 0000 0000     		.space	2
 728              		.section	.bss.TICKS,"aw",%nobits
 729              		.align	1
 730              		.set	.LANCHOR0,. + 0
 733              	TICKS:
 734 0000 0000     		.space	2
 735              		.text
 736              	.Letext0:
 737              		.file 2 "d:\\gcc-arm-none-eabi-5_4-2016q3-20160926-win32\\arm-none-eabi\\include\\machine\\_defaul
 738              		.file 3 "d:\\gcc-arm-none-eabi-5_4-2016q3-20160926-win32\\arm-none-eabi\\include\\sys\\_stdint.h"
 739              		.file 4 "../cmsis/include/stm32f37x.h"
 740              		.file 5 "../stdperiph/include/stm32f37x_gpio.h"
 741              		.file 6 "../user/include/Uart.h"
 742              		.file 7 "../cmsis/include/core_cm4.h"
 743              		.file 8 "../user/include/main.h"
 744              		.file 9 "../user/include/Time.h"
 745              		.file 10 "../stdperiph/include/stm32f37x_usart.h"
 746              		.file 11 "../stdperiph/include/stm32f37x_tim.h"
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s 			page 20


DEFINED SYMBOLS
                            *ABS*:00000000 stm32f37x_it.c
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:22     .text.NMI_Handler:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:27     .text.NMI_Handler:00000000 NMI_Handler
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:40     .text.HardFault_Handler:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:45     .text.HardFault_Handler:00000000 HardFault_Handler
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:59     .text.MemManage_Handler:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:64     .text.MemManage_Handler:00000000 MemManage_Handler
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:78     .text.BusFault_Handler:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:83     .text.BusFault_Handler:00000000 BusFault_Handler
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:97     .text.UsageFault_Handler:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:102    .text.UsageFault_Handler:00000000 UsageFault_Handler
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:116    .text.SVC_Handler:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:121    .text.SVC_Handler:00000000 SVC_Handler
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:133    .text.DebugMon_Handler:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:138    .text.DebugMon_Handler:00000000 DebugMon_Handler
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:150    .text.PendSV_Handler:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:155    .text.PendSV_Handler:00000000 PendSV_Handler
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:167    .text.SysTick_Handler:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:172    .text.SysTick_Handler:00000000 SysTick_Handler
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:188    .text.SysTick_Handler:0000000c $d
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:193    .text.USART1_IRQHandler:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:198    .text.USART1_IRQHandler:00000000 USART1_IRQHandler
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:335    .text.USART1_IRQHandler:000000e8 $d
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:345    .text.USART2_IRQHandler:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:350    .text.USART2_IRQHandler:00000000 USART2_IRQHandler
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:492    .text.USART2_IRQHandler:000000f0 $d
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:500    .text.USART3_IRQHandler:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:505    .text.USART3_IRQHandler:00000000 USART3_IRQHandler
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:636    .text.USART3_IRQHandler:000000dc $d
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:646    .text.TIM2_IRQHandler:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:651    .text.TIM2_IRQHandler:00000000 TIM2_IRQHandler
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:697    .text.TIM2_IRQHandler:00000038 $d
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:705    .text.TIM5_IRQHandler:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:710    .text.TIM5_IRQHandler:00000000 TIM5_IRQHandler
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:726    .bss.capture:00000000 capture
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:723    .bss.capture:00000000 $d
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:729    .bss.TICKS:00000000 $d
C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s:733    .bss.TICKS:00000000 TICKS
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
USART_GetFlagStatus
USART_ClearFlag
USART_GetITStatus
blDrv_Buf_IsFull
USART_ReceiveData
USART_ClearITPendingBit
USART_SendData
blDrv_Buf_IsEmpty
USART_ITConfig
pUartZD
FLAG_UartZD_HasData
pUartIR
pUartDB
FLAG_UartDB_HasData
TIM_GetITStatus
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccfFOx7V.s 			page 21


TIM_ClearITPendingBit
blWordsCounterStatus
uwTime2WordsCounter
blFramesCounterStatus
uwTime2FramesCounter
