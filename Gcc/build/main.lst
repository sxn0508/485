ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 1
   4              		.eabi_attribute 28, 1
   5              		.fpu fpv4-sp-d16
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.thumb
  16              		.syntax unified
  17              		.file	"main.c"
  18              		.text
  19              	.Ltext0:
  20              		.cfi_sections	.debug_frame
  21              		.section	.text.RsvFrameHandle,"ax",%progbits
  22              		.align	2
  23              		.thumb
  24              		.thumb_func
  26              	RsvFrameHandle:
  27              	.LFB112:
  28              		.file 1 "../user/source/main.c"
   1:../user/source/main.c **** #include "main.h"
   2:../user/source/main.c **** #include "GPIO.h"
   3:../user/source/main.c **** #include "Uart.h"
   4:../user/source/main.c **** #include "DLT645.h"
   5:../user/source/main.c **** #include "Flash.h"
   6:../user/source/main.c **** #include "Time.h"
   7:../user/source/main.c **** #include "protocol.h"
   8:../user/source/main.c **** #include "DLT698.h"
   9:../user/source/main.c **** #include "DLT698_45.h"
  10:../user/source/main.c **** 
  11:../user/source/main.c **** uint32_t gSystickAccuracy; //1ÃëÄÚµÄSysTickÊý
  12:../user/source/main.c **** 
  13:../user/source/main.c **** /*698Êý¾Ý´æ´¢µ¥Ôª*/
  14:../user/source/main.c **** COLL_STORE_DATA stCollData;
  15:../user/source/main.c **** /*´®¿ÚÊÕÖ¡±êÖ¾*/
  16:../user/source/main.c **** bool FLAG_UartZD_HasData = false;
  17:../user/source/main.c **** bool FLAG_UartDB_HasData = false;
  18:../user/source/main.c **** volatile uint32_t irqCount = 100;
  19:../user/source/main.c **** volatile uint32_t uwBaudelay;
  20:../user/source/main.c **** uint32_t uwBootDelay = 2000000;
  21:../user/source/main.c **** 
  22:../user/source/main.c **** static void vLedRun(uint32_t delay);
  23:../user/source/main.c **** static void VoltageTimeOutHandle(void);
  24:../user/source/main.c **** static void RsvFrameHandle(uint8_t *pucBuffer);
  25:../user/source/main.c **** static void vAutoSetBaudrate(void);
  26:../user/source/main.c **** 
  27:../user/source/main.c **** int main(void)
  28:../user/source/main.c **** {
  29:../user/source/main.c ****     ProtocolDef ProtocolType = none;
  30:../user/source/main.c ****     uint8_t *pAPDU = NULL;
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 2


  31:../user/source/main.c ****     uint32_t dwLen = 0;
  32:../user/source/main.c ****     //uint8_t ucVoltageIdex;
  33:../user/source/main.c ****     uint32_t i;
  34:../user/source/main.c ****     DLT698_FRAME dlt698Frame;
  35:../user/source/main.c **** 
  36:../user/source/main.c ****     while (uwBootDelay--)
  37:../user/source/main.c ****     {
  38:../user/source/main.c ****         vFeedExtWatchDog();
  39:../user/source/main.c ****     }
  40:../user/source/main.c ****     NVIC_PriorityGroupConfig(NVIC_PriorityGroup_1);
  41:../user/source/main.c ****     //SysTick_Config(SysTick_100Ms);
  42:../user/source/main.c ****     /*SysTickÊ¹ÓÃÏµÍ³ÆµÂÊ64MµÄ8·ÖÆµ£º8MHz*/
  43:../user/source/main.c ****     //SysTick_CLKSourceConfig(SysTick_CLKSource_HCLK_Div8);
  44:../user/source/main.c ****     //NVIC_SetPriority(SysTick_IRQn, -1);
  45:../user/source/main.c ****     vInterFlash_Init();
  46:../user/source/main.c ****     vGPIO_Init();
  47:../user/source/main.c ****     vFeedExtWatchDog();
  48:../user/source/main.c ****     vTimer_Init();
  49:../user/source/main.c ****     vLed_Light();
  50:../user/source/main.c ****     vAutoSetBaudrate(); //¼¯ÖÐÆ÷²à¶ÁÈ¡Ò»Ö¡£¬Ê¶±ð²¨ÌØÂÊ
  51:../user/source/main.c ****     /*µçÑ¹ÐÞ¸ÄµÄÉÏÏÂÏÞÖµÉèÎªÄ¬ÈÏÖµ£»¿ªÆôÐÞ¸Ä¹¦ÄÜ */
  52:../user/source/main.c ****     Voltage_Change_Init();
  53:../user/source/main.c ****     /*µçÁ÷ÖØ¹ýÔØ²ÎÊýÉèÖÃ*/
  54:../user/source/main.c ****     vCurrent_Limit_DefaultSet();
  55:../user/source/main.c ****     /*µçÁ¿ÐÞ¸ÄµÄÉÏÏÂÏÞÖµÉèÎªÄ¬ÈÏÖµ£»¿ªÆôÐÞ¸Ä¹¦ÄÜ */
  56:../user/source/main.c ****     vEnergy_Modify_Init();
  57:../user/source/main.c ****     while (1)
  58:../user/source/main.c ****     {
  59:../user/source/main.c ****         switch (ProtocolType)
  60:../user/source/main.c ****         {
  61:../user/source/main.c ****         case none:
  62:../user/source/main.c ****         {
  63:../user/source/main.c ****             vFeedExtWatchDog();
  64:../user/source/main.c ****             vLedRun(TICK_200MS);
  65:../user/source/main.c ****             /*Ê¶±ð¹æÔ¼ÀàÐÍ*/
  66:../user/source/main.c ****             Uart_idleReadEnable(pUartZD);
  67:../user/source/main.c ****             Uart_idleReadEnable(pUartDB);
  68:../user/source/main.c ****             if (FLAG_UartZD_HasData)
  69:../user/source/main.c ****             {
  70:../user/source/main.c ****                 Uart_idleReadDisable(pUartZD);
  71:../user/source/main.c ****                 FLAG_UartZD_HasData = false;
  72:../user/source/main.c ****                 vFeedExtWatchDog();
  73:../user/source/main.c ****                 dwLen = dwUartCopy(pUartZD, ucApp_Buf_ZD2DB, pUartDB);
  74:../user/source/main.c ****                 ProtocolType = GetProtocolType(ucApp_Buf_ZD2DB, dwLen);
  75:../user/source/main.c ****                 Uart_idleReadEnable(pUartZD);
  76:../user/source/main.c ****             }
  77:../user/source/main.c ****             if (FLAG_UartDB_HasData)
  78:../user/source/main.c ****             {
  79:../user/source/main.c ****                 Uart_idleReadDisable(pUartDB);
  80:../user/source/main.c ****                 FLAG_UartDB_HasData = false;
  81:../user/source/main.c ****                 vFeedExtWatchDog();
  82:../user/source/main.c ****                 dwLen = dwUartCopy(pUartDB, ucApp_Buf_DB2ZD, pUartZD);
  83:../user/source/main.c ****                 ProtocolType = GetProtocolType(ucApp_Buf_DB2ZD, dwLen); //Ð£Ñé´íÎóÒ²ÄÛ¹ý£¿
  84:../user/source/main.c ****                 Uart_idleReadEnable(pUartDB);
  85:../user/source/main.c ****             }
  86:../user/source/main.c ****             break;
  87:../user/source/main.c ****         }
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 3


  88:../user/source/main.c ****         case dlt698:
  89:../user/source/main.c ****         {
  90:../user/source/main.c ****             vFeedExtWatchDog();
  91:../user/source/main.c ****             vLedRun(TICK_1S);
  92:../user/source/main.c ****             Uart_idleReadEnable(pUartZD);
  93:../user/source/main.c ****             Uart_idleReadEnable(pUartDB);
  94:../user/source/main.c ****             if (FLAG_UartZD_HasData)
  95:../user/source/main.c ****             {
  96:../user/source/main.c ****                 Uart_idleReadDisable(pUartZD);
  97:../user/source/main.c ****                 FLAG_UartZD_HasData = false;
  98:../user/source/main.c ****                 vFeedExtWatchDog();
  99:../user/source/main.c ****                 dwLen = dwUartCopy(pUartZD, ucApp_Buf_ZD2DB, pUartDB);
 100:../user/source/main.c ****                 Uart_idleReadEnable(pUartZD);
 101:../user/source/main.c ****                 //if (pframe = pGetpFrame(ucApp_Buf_ZD2DB, dwLen) == NULL)
 102:../user/source/main.c ****                 break;
 103:../user/source/main.c ****             }
 104:../user/source/main.c ****             if (FLAG_UartDB_HasData)
 105:../user/source/main.c ****             {
 106:../user/source/main.c ****                 vFeedExtWatchDog();
 107:../user/source/main.c ****                 Uart_idleReadDisable(pUartDB);
 108:../user/source/main.c ****                 FLAG_UartDB_HasData = false;
 109:../user/source/main.c ****                 dlt698Frame.pStart = NULL;
 110:../user/source/main.c ****                 //dwLen = 0;
 111:../user/source/main.c **** 
 112:../user/source/main.c ****                 /*µç±í¿ÚÊÕÖ¡*/
 113:../user/source/main.c ****                 if ((dwLen = Uart_Read(pUartDB, ucApp_Buf_DB2ZD, DRV_BUF_SIZE)) == 0)
 114:../user/source/main.c ****                     break;
 115:../user/source/main.c ****                 if ((pGetpFrame(ucApp_Buf_DB2ZD, dwLen, &dlt698Frame)) == NULL) //Ð£Ñé´íÎó¾Í²»Í¸´«£
 116:../user/source/main.c ****                 {
 117:../user/source/main.c ****                     vFeedExtWatchDog();
 118:../user/source/main.c ****                     Uart_OnceWrite(pUartZD, ucApp_Buf_DB2ZD, dwLen, 1000 * TICK_1MS);
 119:../user/source/main.c ****                 }
 120:../user/source/main.c ****                 //if ((pGetpFrame(ucApp_Buf_DB2ZD, dwLen, &dlt698Frame)) != NULL) //Ð£Ñé´íÎó¾Í²»Í¸´
 121:../user/source/main.c ****                 else if (Voltage_Change_State != Voltage_NOChange)
 122:../user/source/main.c ****                 {
 123:../user/source/main.c ****                     if ((dwLen = dwGet698Apdu(&dlt698Frame, &pAPDU)) > 0)
 124:../user/source/main.c ****                     {
 125:../user/source/main.c ****                         if (dwAPduAnalyze(pAPDU, dwLen, &stCollData) > 0)
 126:../user/source/main.c ****                         {
 127:../user/source/main.c ****                             for (i = 0; i < stCollData.ucDataNum; i++)
 128:../user/source/main.c ****                             {
 129:../user/source/main.c ****                                 if (stCollData.stDataUnit[i].stOAD.OI_date == 0x2000) /*µçÑ¹OI*/
 130:../user/source/main.c ****                                 {
 131:../user/source/main.c ****                                     v698VoltageModify(&stCollData.stDataUnit[i]);
 132:../user/source/main.c ****                                 }
 133:../user/source/main.c ****                             }
 134:../user/source/main.c ****                             dwReCalculateFCS(&dlt698Frame);
 135:../user/source/main.c ****                         }
 136:../user/source/main.c ****                     }
 137:../user/source/main.c ****                     vFeedExtWatchDog();
 138:../user/source/main.c ****                     Uart_OnceWrite(pUartZD, dlt698Frame.pStart, dlt698Frame.uwFramelen + 2, TICK_50
 139:../user/source/main.c ****                 }
 140:../user/source/main.c ****                 //frame -> UartBuf
 141:../user/source/main.c ****             }
 142:../user/source/main.c ****             Uart_idleReadEnable(pUartDB);
 143:../user/source/main.c ****             break;
 144:../user/source/main.c ****         }
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 4


 145:../user/source/main.c ****         case dlt645:
 146:../user/source/main.c ****         {
 147:../user/source/main.c ****             vLedRun(TICK_1S);
 148:../user/source/main.c ****             /*´®¿ÚÎÞÊÕ·¢Ê±Î¹¹·¼ä¸ôÎª1ms×óÓÒ*/
 149:../user/source/main.c ****             vFeedExtWatchDog();
 150:../user/source/main.c ****             /*¼¯ÖÐÆ÷²àÊý¾ÝÖ¡ÊÕÖ¡´¦Àí*/
 151:../user/source/main.c ****             if (blDrv_Buf_IsEmpty(pUartZD->pRsvbuf) == false)
 152:../user/source/main.c ****             {
 153:../user/source/main.c ****                 RsvFrameHandle(ucApp_Buf_ZD2DB);
 154:../user/source/main.c ****             }
 155:../user/source/main.c ****             /*µç±í²àÊÕÖ¡´¦Àí*/
 156:../user/source/main.c ****             /*Î´ÊÕµ½µç±íÖ¡*/
 157:../user/source/main.c ****             if (blDrv_Buf_IsEmpty(pUartDB->pRsvbuf) == true)
 158:../user/source/main.c ****             {
 159:../user/source/main.c ****                 VoltageTimeOutHandle();
 160:../user/source/main.c ****             }
 161:../user/source/main.c ****             /*ÊÕµ½µç±íÖ¡*/
 162:../user/source/main.c ****             else
 163:../user/source/main.c ****             {
 164:../user/source/main.c ****                 /*·Ç·¨Ö¡*/
 165:../user/source/main.c ****                 if (!blRecvFrame(pUartDB->pRsvbuf, ucApp_Buf_DB2ZD))
 166:../user/source/main.c ****                 {
 167:../user/source/main.c ****                     /*µçÑ¹»ØÖ¡³¬Ê±*/
 168:../user/source/main.c ****                     if ((Voltage_Frame_Status == FrameAwaitingReply) &&
 169:../user/source/main.c ****                         (blTime2_Update(uwTime2FramesCounter, DLT645_FRAMES_DELAY_MAX)))
 170:../user/source/main.c ****                     {
 171:../user/source/main.c ****                         /*ÖÐ¼ÌÆ÷Ê¹ÓÃÉÏ´ÎµÄÕýÈ·µçÑ¹ÖµÌæ´ú»Ø¸´*/
 172:../user/source/main.c ****                         if (blVoltage_Create(ucApp_Buf_ZD2DB))
 173:../user/source/main.c ****                         {
 174:../user/source/main.c ****                             ucDrv_Buf_PutBytes(ucApp_Buf_ZD2DB, pUartZD->pSndbuf, ucApp_Buf_ZD2DB[9
 175:../user/source/main.c ****                             /*·¢ËÍµçÑ¹Ö¡*/
 176:../user/source/main.c ****                             if (!blDrv_Buf_IsEmpty(pUartZD->pSndbuf))
 177:../user/source/main.c ****                             {
 178:../user/source/main.c ****                                 Uart_DataPut(USART1);
 179:../user/source/main.c ****                                 /*µÈ´ýµçÑ¹»ØÖ¡×´Ì¬ÇåÎ»*/
 180:../user/source/main.c ****                                 Voltage_Frame_Status = FrameReplied;
 181:../user/source/main.c ****                                 /*¼ÆÊ±Æ÷¸´Î»*/
 182:../user/source/main.c ****                                 blFramesCounterStatus = false;
 183:../user/source/main.c ****                                 uwTime2FramesCounter = 0;
 184:../user/source/main.c ****                             }
 185:../user/source/main.c ****                         }
 186:../user/source/main.c ****                     }
 187:../user/source/main.c ****                 }
 188:../user/source/main.c ****                 /*ºÏ·¨Ö¡*/
 189:../user/source/main.c ****                 else
 190:../user/source/main.c ****                 {
 191:../user/source/main.c ****                     vDBDataID_Handle(ucApp_Buf_DB2ZD);
 192:../user/source/main.c ****                     ucDrv_Buf_PutBytes(ucApp_Buf_DB2ZD, pUartZD->pSndbuf, uc645DataDomainLength + 1
 193:../user/source/main.c ****                     if (!blDrv_Buf_IsEmpty(pUartZD->pSndbuf))
 194:../user/source/main.c ****                     {
 195:../user/source/main.c ****                         Uart_DataPut(pUartZD->handler);
 196:../user/source/main.c ****                     }
 197:../user/source/main.c ****                 }
 198:../user/source/main.c ****             }
 199:../user/source/main.c ****             /*¿ÉÑ¡¹¦ÄÜ£ººìÍâÉèÖÃ²ÎÊý*/
 200:../user/source/main.c **** #ifdef ENABLE_INFR
 201:../user/source/main.c ****             /*ºìÍâ´®¿ÚÊÕÖ¡´¦Àí */
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 5


 202:../user/source/main.c ****             if (blDrv_Buf_IsEmpty(pUartIR->pRsvbuf) == false)
 203:../user/source/main.c ****             {
 204:../user/source/main.c ****                 if (blRecvFrame(pUartIR->pRsvbuf, ucApp_Buf_INFR))
 205:../user/source/main.c ****                 {
 206:../user/source/main.c ****                     if (ucApp_Buf_INFR[8] == 0X13)
 207:../user/source/main.c ****                     {
 208:../user/source/main.c ****                         ucApp_Buf_INFR[1] = 0x01;
 209:../user/source/main.c ****                         ucApp_Buf_INFR[2] = 0x01;
 210:../user/source/main.c ****                         ucApp_Buf_INFR[3] = 0x01;
 211:../user/source/main.c ****                         ucApp_Buf_INFR[4] = 0x01;
 212:../user/source/main.c ****                         ucApp_Buf_INFR[5] = 0x01;
 213:../user/source/main.c ****                         ucApp_Buf_INFR[6] = 0x01;
 214:../user/source/main.c ****                         ucApp_Buf_INFR[8] = 0x93;
 215:../user/source/main.c ****                         ucApp_Buf_INFR[9] = 0x06;
 216:../user/source/main.c ****                         ucApp_Buf_INFR[10] = 0x34;
 217:../user/source/main.c ****                         ucApp_Buf_INFR[11] = 0x34;
 218:../user/source/main.c ****                         ucApp_Buf_INFR[12] = 0x34;
 219:../user/source/main.c ****                         ucApp_Buf_INFR[13] = 0x34;
 220:../user/source/main.c ****                         ucApp_Buf_INFR[14] = 0x34;
 221:../user/source/main.c ****                         ucApp_Buf_INFR[15] = 0x34;
 222:../user/source/main.c ****                         ucApp_Buf_INFR[16] = 0xA7;
 223:../user/source/main.c ****                         ucApp_Buf_INFR[17] = 0x16;
 224:../user/source/main.c ****                         ucDrv_Buf_PutBytes(ucApp_Buf_INFR, pUartIR->pSndbuf, 18);
 225:../user/source/main.c ****                     }
 226:../user/source/main.c ****                     else
 227:../user/source/main.c ****                     {
 228:../user/source/main.c ****                         vINFRDataID_Handle(ucApp_Buf_INFR);
 229:../user/source/main.c ****                     }
 230:../user/source/main.c ****                     /*ºìÍâ¿Ú»ØÖ¡*/
 231:../user/source/main.c ****                     if (!blDrv_Buf_IsEmpty(pUartIR->pSndbuf))
 232:../user/source/main.c ****                     {
 233:../user/source/main.c ****                         USART_ITConfig(USART2, USART_IT_RXNE, DISABLE);
 234:../user/source/main.c ****                         //TIM_CCxCmd(TIM5, TIM_Channel_2, TIM_CCx_Enable);
 235:../user/source/main.c ****                         USART_ITConfig(USART2, USART_IT_TXE, ENABLE);
 236:../user/source/main.c ****                     }
 237:../user/source/main.c ****                 }
 238:../user/source/main.c ****             } //end ºìÍâÊÕÖ¡´¦Àí
 239:../user/source/main.c **** #endif
 240:../user/source/main.c ****             break;
 241:../user/source/main.c ****         } //end while
 242:../user/source/main.c ****         default:
 243:../user/source/main.c ****         {
 244:../user/source/main.c ****             break;
 245:../user/source/main.c ****         }
 246:../user/source/main.c ****         } //end switch
 247:../user/source/main.c ****     }     //end while
 248:../user/source/main.c **** } //end main
 249:../user/source/main.c **** 
 250:../user/source/main.c **** static void RsvFrameHandle(uint8_t *pucBuffer)
 251:../user/source/main.c **** {
  29              		.loc 1 251 0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              	.LVL0:
  34 0000 38B5     		push	{r3, r4, r5, lr}
  35              	.LCFI0:
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 6


  36              		.cfi_def_cfa_offset 16
  37              		.cfi_offset 3, -16
  38              		.cfi_offset 4, -12
  39              		.cfi_offset 5, -8
  40              		.cfi_offset 14, -4
  41 0002 0446     		mov	r4, r0
 252:../user/source/main.c ****     /*Ö¡ºÏ·¨ÐÔÅÐ¶Ï*/
 253:../user/source/main.c ****     if (blRecvFrame(pUartZD->pRsvbuf, pucBuffer))
  42              		.loc 1 253 0
  43 0004 154B     		ldr	r3, .L5
  44 0006 1B68     		ldr	r3, [r3]
  45 0008 0146     		mov	r1, r0
  46 000a 5868     		ldr	r0, [r3, #4]
  47              	.LVL1:
  48 000c FFF7FEFF 		bl	blRecvFrame
  49              	.LVL2:
  50 0010 18B3     		cbz	r0, .L1
 254:../user/source/main.c ****     {
 255:../user/source/main.c ****         /*ÊÇ·ñÕÙ²âµçÑ¹*/
 256:../user/source/main.c ****         if ((pucBuffer[8] == 0X11) &&
  51              		.loc 1 256 0
  52 0012 237A     		ldrb	r3, [r4, #8]	@ zero_extendqisi2
  53 0014 112B     		cmp	r3, #17
  54 0016 0ED1     		bne	.L3
 257:../user/source/main.c ****             (pucBuffer[10] == 0x33) &&
  55              		.loc 1 257 0 discriminator 1
  56 0018 A37A     		ldrb	r3, [r4, #10]	@ zero_extendqisi2
 256:../user/source/main.c ****             (pucBuffer[10] == 0x33) &&
  57              		.loc 1 256 0 discriminator 1
  58 001a 332B     		cmp	r3, #51
  59 001c 0BD1     		bne	.L3
 258:../user/source/main.c ****             (pucBuffer[12] == 0x34) &&
  60              		.loc 1 258 0
  61 001e 237B     		ldrb	r3, [r4, #12]	@ zero_extendqisi2
 257:../user/source/main.c ****             (pucBuffer[10] == 0x33) &&
  62              		.loc 1 257 0
  63 0020 342B     		cmp	r3, #52
  64 0022 08D1     		bne	.L3
 259:../user/source/main.c ****             (pucBuffer[13] == 0x35))
  65              		.loc 1 259 0
  66 0024 637B     		ldrb	r3, [r4, #13]	@ zero_extendqisi2
 258:../user/source/main.c ****             (pucBuffer[12] == 0x34) &&
  67              		.loc 1 258 0
  68 0026 352B     		cmp	r3, #53
  69 0028 05D1     		bne	.L3
 260:../user/source/main.c ****         {
 261:../user/source/main.c ****             /*µÈ´ýµçÑ¹»ØÖ¡×´Ì¬ÖÃÎ»*/
 262:../user/source/main.c ****             Voltage_Frame_Status = FrameAwaitingReply;
  70              		.loc 1 262 0
  71 002a 0022     		movs	r2, #0
  72 002c 0C4B     		ldr	r3, .L5+4
  73 002e 1A70     		strb	r2, [r3]
 263:../user/source/main.c ****             /*¿ªÊ¼¼ÆÊ±*/
 264:../user/source/main.c ****             blFramesCounterStatus = true;
  74              		.loc 1 264 0
  75 0030 0122     		movs	r2, #1
  76 0032 0C4B     		ldr	r3, .L5+8
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 7


  77 0034 1A70     		strb	r2, [r3]
  78              	.L3:
 265:../user/source/main.c ****         }
 266:../user/source/main.c ****         /*×ª·¢ÕÙ²âÖ¡*/
 267:../user/source/main.c ****         ucDrv_Buf_PutBytes(pucBuffer, pUartDB->pSndbuf, uc645DataDomainLength + 12);
  79              		.loc 1 267 0
  80 0036 0C4D     		ldr	r5, .L5+12
  81 0038 2B68     		ldr	r3, [r5]
  82 003a 0C4A     		ldr	r2, .L5+16
  83 003c 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
  84 003e 0C32     		adds	r2, r2, #12
  85 0040 9968     		ldr	r1, [r3, #8]
  86 0042 2046     		mov	r0, r4
  87 0044 FFF7FEFF 		bl	ucDrv_Buf_PutBytes
  88              	.LVL3:
 268:../user/source/main.c ****         if (!blDrv_Buf_IsEmpty(pUartDB->pSndbuf))
  89              		.loc 1 268 0
  90 0048 2B68     		ldr	r3, [r5]
  91 004a 9868     		ldr	r0, [r3, #8]
  92 004c FFF7FEFF 		bl	blDrv_Buf_IsEmpty
  93              	.LVL4:
  94 0050 18B9     		cbnz	r0, .L1
 269:../user/source/main.c ****         {
 270:../user/source/main.c ****             Uart_DataPut(pUartDB->handler);
  95              		.loc 1 270 0
  96 0052 2B68     		ldr	r3, [r5]
  97 0054 1868     		ldr	r0, [r3]
  98 0056 FFF7FEFF 		bl	Uart_DataPut
  99              	.LVL5:
 100              	.L1:
 101 005a 38BD     		pop	{r3, r4, r5, pc}
 102              	.LVL6:
 103              	.L6:
 104              		.align	2
 105              	.L5:
 106 005c 00000000 		.word	pUartZD
 107 0060 00000000 		.word	Voltage_Frame_Status
 108 0064 00000000 		.word	blFramesCounterStatus
 109 0068 00000000 		.word	pUartDB
 110 006c 00000000 		.word	uc645DataDomainLength
 111              		.cfi_endproc
 112              	.LFE112:
 114              		.section	.text.VoltageTimeOutHandle,"ax",%progbits
 115              		.align	2
 116              		.thumb
 117              		.thumb_func
 119              	VoltageTimeOutHandle:
 120              	.LFB113:
 271:../user/source/main.c ****         }
 272:../user/source/main.c ****     }
 273:../user/source/main.c **** }
 274:../user/source/main.c **** 
 275:../user/source/main.c **** static void VoltageTimeOutHandle(void)
 276:../user/source/main.c **** {
 121              		.loc 1 276 0
 122              		.cfi_startproc
 123              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 8


 124              		@ frame_needed = 0, uses_anonymous_args = 0
 277:../user/source/main.c ****     /*ÕÙ²âµçÑ¹³¬Ê±*/
 278:../user/source/main.c ****     if ((Voltage_Frame_Status == FrameAwaitingReply) &&
 125              		.loc 1 278 0
 126 0000 144B     		ldr	r3, .L11
 127 0002 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 128 0004 23BB     		cbnz	r3, .L10
 276:../user/source/main.c ****     /*ÕÙ²âµçÑ¹³¬Ê±*/
 129              		.loc 1 276 0 discriminator 1
 130 0006 10B5     		push	{r4, lr}
 131              	.LCFI1:
 132              		.cfi_def_cfa_offset 8
 133              		.cfi_offset 4, -8
 134              		.cfi_offset 14, -4
 279:../user/source/main.c ****         (blTime2_Update(uwTime2FramesCounter, DLT645_FRAMES_DELAY_MAX)))
 135              		.loc 1 279 0 discriminator 1
 136 0008 1921     		movs	r1, #25
 137 000a 134B     		ldr	r3, .L11+4
 138 000c 1888     		ldrh	r0, [r3]
 139 000e FFF7FEFF 		bl	blTime2_Update
 140              	.LVL7:
 278:../user/source/main.c ****         (blTime2_Update(uwTime2FramesCounter, DLT645_FRAMES_DELAY_MAX)))
 141              		.loc 1 278 0 discriminator 1
 142 0012 E0B1     		cbz	r0, .L7
 280:../user/source/main.c ****     {
 281:../user/source/main.c ****         /*ÖÐ¼ÌÆ÷Ê¹ÓÃÉÏ´ÎµÄÕýÈ·µçÑ¹ÖµÌæ´ú»Ø¸´*/
 282:../user/source/main.c ****         if (blVoltage_Create(ucApp_Buf_ZD2DB))
 143              		.loc 1 282 0
 144 0014 1148     		ldr	r0, .L11+8
 145 0016 FFF7FEFF 		bl	blVoltage_Create
 146              	.LVL8:
 147 001a C0B1     		cbz	r0, .L7
 283:../user/source/main.c ****         {
 284:../user/source/main.c ****             ucDrv_Buf_PutBytes(ucApp_Buf_ZD2DB, pUartZD->pSndbuf, ucApp_Buf_ZD2DB[9] + 12);
 148              		.loc 1 284 0
 149 001c 104C     		ldr	r4, .L11+12
 150 001e 2368     		ldr	r3, [r4]
 151 0020 0E48     		ldr	r0, .L11+8
 152 0022 427A     		ldrb	r2, [r0, #9]	@ zero_extendqisi2
 153 0024 0C32     		adds	r2, r2, #12
 154 0026 9968     		ldr	r1, [r3, #8]
 155 0028 FFF7FEFF 		bl	ucDrv_Buf_PutBytes
 156              	.LVL9:
 285:../user/source/main.c ****             if (!blDrv_Buf_IsEmpty(pUartZD->pSndbuf))
 157              		.loc 1 285 0
 158 002c 2368     		ldr	r3, [r4]
 159 002e 9868     		ldr	r0, [r3, #8]
 160 0030 FFF7FEFF 		bl	blDrv_Buf_IsEmpty
 161              	.LVL10:
 162 0034 58B9     		cbnz	r0, .L7
 286:../user/source/main.c ****             {
 287:../user/source/main.c ****                 Uart_DataPut(pUartZD->handler);
 163              		.loc 1 287 0
 164 0036 2368     		ldr	r3, [r4]
 165 0038 1868     		ldr	r0, [r3]
 166 003a FFF7FEFF 		bl	Uart_DataPut
 167              	.LVL11:
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 9


 288:../user/source/main.c ****                 /*µÈ´ýµçÑ¹»ØÖ¡×´Ì¬ÇåÎ»*/
 289:../user/source/main.c ****                 Voltage_Frame_Status = FrameReplied;
 168              		.loc 1 289 0
 169 003e 0122     		movs	r2, #1
 170 0040 044B     		ldr	r3, .L11
 171 0042 1A70     		strb	r2, [r3]
 290:../user/source/main.c ****                 /*¼ÆÊ±Æ÷¸´Î»*/
 291:../user/source/main.c ****                 blFramesCounterStatus = false;
 172              		.loc 1 291 0
 173 0044 0023     		movs	r3, #0
 174 0046 074A     		ldr	r2, .L11+16
 175 0048 1370     		strb	r3, [r2]
 292:../user/source/main.c ****                 uwTime2FramesCounter = 0;
 176              		.loc 1 292 0
 177 004a 034A     		ldr	r2, .L11+4
 178 004c 1380     		strh	r3, [r2]	@ movhi
 179              	.L7:
 180 004e 10BD     		pop	{r4, pc}
 181              	.L10:
 182              	.LCFI2:
 183              		.cfi_def_cfa_offset 0
 184              		.cfi_restore 4
 185              		.cfi_restore 14
 186 0050 7047     		bx	lr
 187              	.L12:
 188 0052 00BF     		.align	2
 189              	.L11:
 190 0054 00000000 		.word	Voltage_Frame_Status
 191 0058 00000000 		.word	uwTime2FramesCounter
 192 005c 00000000 		.word	ucApp_Buf_ZD2DB
 193 0060 00000000 		.word	pUartZD
 194 0064 00000000 		.word	blFramesCounterStatus
 195              		.cfi_endproc
 196              	.LFE113:
 198              		.section	.text.vLedRun,"ax",%progbits
 199              		.align	2
 200              		.thumb
 201              		.thumb_func
 203              	vLedRun:
 204              	.LFB117:
 293:../user/source/main.c ****             }
 294:../user/source/main.c ****         }
 295:../user/source/main.c ****     }
 296:../user/source/main.c **** }
 297:../user/source/main.c **** /********************************************************************
 298:../user/source/main.c **** * ¹¦    ÄÜ£º¸ù¾Ý´®¿Ú1Î»Êý¾ÝµçÆ½³ÖÐøÊ±¼ä¼ÆËã²¨ÌØÂÊ
 299:../user/source/main.c **** * Êä    Èë£ºµçÆ½³ÖÐøÊ±¼ä
 300:../user/source/main.c **** * Êä    ³ö£º¶ÔÓ¦²¨ÌØÂÊ
 301:../user/source/main.c **** * Ëµ    Ãû£º
 302:../user/source/main.c **** * ±à Ð´ ÈË£º
 303:../user/source/main.c **** * ±àÐ´ÈÕÆÚ£º2018Äê9ÔÂ10ÈÕ16:01:21
 304:../user/source/main.c **** **********************************************************************/
 305:../user/source/main.c **** uint32_t uwFindBaudRate(uint32_t baudDelay)
 306:../user/source/main.c **** {
 307:../user/source/main.c ****     /* Baud 1200 :1666us*/
 308:../user/source/main.c ****     //if (baudDelay > 1500 && baudDelay < 1800)
 309:../user/source/main.c ****     //   return 1200;
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 10


 310:../user/source/main.c ****     /* Baud 1200:833us*/
 311:../user/source/main.c ****     if (baudDelay > 820 && baudDelay < 850)
 312:../user/source/main.c ****         return 1200;
 313:../user/source/main.c ****     /* Baud 2400:417us*/
 314:../user/source/main.c ****     else if (baudDelay > 400 && baudDelay < 430)
 315:../user/source/main.c ****         return 2400;
 316:../user/source/main.c ****     /* Baud 4800:208us*/
 317:../user/source/main.c ****     else if (baudDelay > 190 && baudDelay < 220)
 318:../user/source/main.c ****         return 4800;
 319:../user/source/main.c ****     /* Baud 9600 :104us*/
 320:../user/source/main.c ****     else if (baudDelay > 90 && baudDelay < 120)
 321:../user/source/main.c ****         return 9600;
 322:../user/source/main.c ****     else
 323:../user/source/main.c ****         /*default baudrate*/
 324:../user/source/main.c ****         return 2400;
 325:../user/source/main.c **** }
 326:../user/source/main.c **** 
 327:../user/source/main.c **** /********************************************************************
 328:../user/source/main.c **** * ¹¦    ÄÜ£º¼ÆËã´®¿Ú1Î»Êý¾ÝµçÆ½³ÖÐøÊ±¼ä
 329:../user/source/main.c **** * Êä    Èë£º³ÖÐøÊ±¼ä´æ´¢Î»ÖÃ
 330:../user/source/main.c **** * Êä    ³ö£ºNone
 331:../user/source/main.c **** * Ëµ    Ã÷£ºÖÐ¶Ï·þÎñº¯ÊýÖÐ¼ÇÂ¼n¸öÖÐ¶ÏµÄÊ±±ê
 332:../user/source/main.c **** *           ÏàÁÚÊ±±ê¼ÆËãÂö³å³ÖÐøÊ±¼ä
 333:../user/source/main.c **** *           ²éÕÒ×î¶Ì³ÖÐøÊ±¼ä
 334:../user/source/main.c **** * ±à Ð´ ÈË£º
 335:../user/source/main.c **** * ±àÐ´ÈÕÆÚ£º2018Äê9ÔÂ5ÈÕ15:08:58
 336:../user/source/main.c **** **********************************************************************/
 337:../user/source/main.c **** void vUartZD_BaudelayCal(volatile uint32_t *pBaudelay)
 338:../user/source/main.c **** {
 339:../user/source/main.c **** 
 340:../user/source/main.c ****     static uint32_t LAST_TICK = 0xFFFFFFFF;
 341:../user/source/main.c ****     uint32_t nowtick = 0;
 342:../user/source/main.c ****     uint32_t tmpdelay = 0;
 343:../user/source/main.c ****     irqCount--;
 344:../user/source/main.c ****     /*È¡µ±Ç°tickÊý£¬0~0xFFFFÑ­»·*/
 345:../user/source/main.c ****     nowtick = TICKS;
 346:../user/source/main.c ****     /*³õ´ÎÊÕµ½´®¿ÚÊý¾Ý£¬ÏµÍ³tick×î´ó65535*/
 347:../user/source/main.c ****     if (LAST_TICK != 0xFFFFFFFF)
 348:../user/source/main.c ****     {
 349:../user/source/main.c ****         /*ÓëlastickÏà¼õµÃµ½±¾´Îdelay*/
 350:../user/source/main.c ****         tmpdelay = (nowtick + 0xFFFF - LAST_TICK) & 0xFFFF;
 351:../user/source/main.c ****         /*µ±Ç°tickÊý´æÎªcount*/
 352:../user/source/main.c ****         LAST_TICK = nowtick;
 353:../user/source/main.c ****         /*ÓëÉÏ´Îdelay±È½Ï£¬È¡½ÏÐ¡Öµ´æÎªdelay*/
 354:../user/source/main.c ****         if (tmpdelay < *pBaudelay)
 355:../user/source/main.c ****         {
 356:../user/source/main.c ****             *pBaudelay = tmpdelay;
 357:../user/source/main.c ****         }
 358:../user/source/main.c ****     }
 359:../user/source/main.c ****     else //Ö®Ç°ÒÑÓÐ±ßÑØÖÐ¶Ï
 360:../user/source/main.c ****     {
 361:../user/source/main.c ****         /*µ±Ç°tickÊý´æÎªlastick*/
 362:../user/source/main.c ****         /*delay= 0xFFFFFFFF*/
 363:../user/source/main.c ****         LAST_TICK = nowtick;
 364:../user/source/main.c ****     }
 365:../user/source/main.c **** }
 366:../user/source/main.c **** 
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 11


 367:../user/source/main.c **** void vAutoSetBaudrate(void)
 368:../user/source/main.c **** {
 369:../user/source/main.c ****     uint32_t Uart_BaudRate;
 370:../user/source/main.c ****     vSystickSetAccuracy(1000000); //SysTick = 1us
 371:../user/source/main.c ****     vSystickIntCmd(ENABLE);
 372:../user/source/main.c ****     /*TICKÊ¹ÄÜºó²ÅÄÜ³õÊ¼»¯Íâ²¿ÖÐ¶Ï*/
 373:../user/source/main.c ****     vExti_Init(); //
 374:../user/source/main.c ****     irqCount = 100;
 375:../user/source/main.c ****     uwBaudelay = 0xFFFFFFFF;
 376:../user/source/main.c ****     while (irqCount)
 377:../user/source/main.c ****     {
 378:../user/source/main.c ****         vFeedExtWatchDog();
 379:../user/source/main.c ****     }
 380:../user/source/main.c ****     EXTI_DeInit();
 381:../user/source/main.c ****     Uart_BaudRate = uwFindBaudRate(uwBaudelay);
 382:../user/source/main.c ****     vSystickSetAccuracy(1000); //systick=1ms
 383:../user/source/main.c ****     vSystickIntCmd(ENABLE);
 384:../user/source/main.c ****     vUart_EnableBaudrate(pUartZD, Uart_BaudRate); //Ê¹ÄÜ½ÓÊÕÖÐ¶Ï
 385:../user/source/main.c ****     vUart_EnableBaudrate(pUartDB, Uart_BaudRate);
 386:../user/source/main.c ****     /*½ÓÊÕºóÐø×Ö½Ú²¢ºöÂÔ*/
 387:../user/source/main.c ****     vFeedExtWatchDog();
 388:../user/source/main.c ****     Uart_IdleRead(pUartZD, ucApp_Buf_ZD2DB, DRV_BUF_SIZE, TICK_500MS);
 389:../user/source/main.c ****     vBuf_Clear(pUartZD->pRsvbuf);
 390:../user/source/main.c ****     //Uart_idleReadEnable(pUartZD);
 391:../user/source/main.c ****     //Uart_idleReadEnable(pUartDB);
 392:../user/source/main.c **** 
 393:../user/source/main.c **** #if 0
 394:../user/source/main.c ****     Uart_ITReadEnable(pUartZD);
 395:../user/source/main.c ****     /*last loop do not clear FLAG,second loop do not receive second frame*/
 396:../user/source/main.c ****     while (!FLAG_UartZD_HasData)
 397:../user/source/main.c ****     {
 398:../user/source/main.c ****         vFeedExtWatchDog();
 399:../user/source/main.c ****     }
 400:../user/source/main.c ****     Uart_ITReadDisable(pUartZD);
 401:../user/source/main.c ****     FLAG_UartZD_HasData = false;
 402:../user/source/main.c ****     pdataDown->len = Uart_Read(pUartZD, (uint8_t *)pdataDown, BUF_SIZE);
 403:../user/source/main.c ****     if (pdataDown->len == 0)
 404:../user/source/main.c ****     {
 405:../user/source/main.c ****         UartDB_BaudRate = 0;
 406:../user/source/main.c ****         continue;
 407:../user/source/main.c ****     }
 408:../user/source/main.c ****     do
 409:../user/source/main.c ****     {
 410:../user/source/main.c ****         vFeedExtWatchDog();
 411:../user/source/main.c ****         vUart_EnableBaudrate(pUartDB, UartDB_BaudRate);
 412:../user/source/main.c ****         Uart_OnceWrite(pUartDB, (uint8_t *)pdataDown, pdataDown->len, 1000);
 413:../user/source/main.c ****         pdataUp->len = Uart_IdleRead(pUartDB, (uint8_t *)pdataUp, BUF_SIZE, 500);
 414:../user/source/main.c ****         pframe = pGetpFrame((uint8_t *)pdataUp, pdataUp->len);
 415:../user/source/main.c ****         /*9600 -> 4800 -> 2400 -> 1200*/
 416:../user/source/main.c ****         UartDB_BaudRate = UartDB_BaudRate >> 1;
 417:../user/source/main.c ****     } while (pframe == NULL && UartDB_BaudRate > 600);
 418:../user/source/main.c ****     /*if no reply from DB,UartDB_BaudRate always == 600*/
 419:../user/source/main.c ****     //} while (UartDB_BaudRate < 1200); //²¨ÌØÂÊÆ¥ÅäÍê³É
 420:../user/source/main.c **** #endif
 421:../user/source/main.c **** }
 422:../user/source/main.c **** void vLedRun(uint32_t delay)
 423:../user/source/main.c **** {
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 12


 205              		.loc 1 423 0
 206              		.cfi_startproc
 207              		@ args = 0, pretend = 0, frame = 0
 208              		@ frame_needed = 0, uses_anonymous_args = 0
 209              	.LVL12:
 210 0000 08B5     		push	{r3, lr}
 211              	.LCFI3:
 212              		.cfi_def_cfa_offset 8
 213              		.cfi_offset 3, -8
 214              		.cfi_offset 14, -4
 424:../user/source/main.c ****     static uint32_t last_tick = 0;
 425:../user/source/main.c ****     if (TICKS - last_tick > delay)
 215              		.loc 1 425 0
 216 0002 0F4B     		ldr	r3, .L17
 217 0004 1A68     		ldr	r2, [r3]
 218 0006 0F4B     		ldr	r3, .L17+4
 219 0008 1B68     		ldr	r3, [r3]
 220 000a D31A     		subs	r3, r2, r3
 221 000c 8342     		cmp	r3, r0
 222 000e 15D9     		bls	.L13
 426:../user/source/main.c ****     {
 427:../user/source/main.c ****         last_tick = TICKS;
 223              		.loc 1 427 0
 224 0010 0C4B     		ldr	r3, .L17+4
 225 0012 1A60     		str	r2, [r3]
 428:../user/source/main.c ****         if (Bit_SET == GPIO_ReadOutputDataBit(GPIOC, GPIO_Pin_13))
 226              		.loc 1 428 0
 227 0014 4FF40051 		mov	r1, #8192
 228 0018 0B48     		ldr	r0, .L17+8
 229              	.LVL13:
 230 001a FFF7FEFF 		bl	GPIO_ReadOutputDataBit
 231              	.LVL14:
 232 001e 0128     		cmp	r0, #1
 233 0020 06D1     		bne	.L15
 429:../user/source/main.c ****         {
 430:../user/source/main.c ****             GPIO_WriteBit(GPIOC, GPIO_Pin_13, Bit_RESET); //À­µÍPC13
 234              		.loc 1 430 0
 235 0022 0022     		movs	r2, #0
 236 0024 4FF40051 		mov	r1, #8192
 237 0028 0748     		ldr	r0, .L17+8
 238 002a FFF7FEFF 		bl	GPIO_WriteBit
 239              	.LVL15:
 240 002e 08BD     		pop	{r3, pc}
 241              	.L15:
 431:../user/source/main.c ****         }
 432:../user/source/main.c ****         else
 433:../user/source/main.c ****         {
 434:../user/source/main.c ****             GPIO_WriteBit(GPIOC, GPIO_Pin_13, Bit_SET);
 242              		.loc 1 434 0
 243 0030 0122     		movs	r2, #1
 244 0032 4FF40051 		mov	r1, #8192
 245 0036 0448     		ldr	r0, .L17+8
 246 0038 FFF7FEFF 		bl	GPIO_WriteBit
 247              	.LVL16:
 248              	.L13:
 249 003c 08BD     		pop	{r3, pc}
 250              	.L18:
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 13


 251 003e 00BF     		.align	2
 252              	.L17:
 253 0040 00000000 		.word	TICKS
 254 0044 00000000 		.word	.LANCHOR0
 255 0048 00080048 		.word	1207961600
 256              		.cfi_endproc
 257              	.LFE117:
 259              		.section	.text.uwFindBaudRate,"ax",%progbits
 260              		.align	2
 261              		.global	uwFindBaudRate
 262              		.thumb
 263              		.thumb_func
 265              	uwFindBaudRate:
 266              	.LFB114:
 306:../user/source/main.c ****     /* Baud 1200 :1666us*/
 267              		.loc 1 306 0
 268              		.cfi_startproc
 269              		@ args = 0, pretend = 0, frame = 0
 270              		@ frame_needed = 0, uses_anonymous_args = 0
 271              		@ link register save eliminated.
 272              	.LVL17:
 311:../user/source/main.c ****         return 1200;
 273              		.loc 1 311 0
 274 0000 A0F23533 		subw	r3, r0, #821
 275 0004 1C2B     		cmp	r3, #28
 276 0006 0DD9     		bls	.L21
 314:../user/source/main.c ****         return 2400;
 277              		.loc 1 314 0
 278 0008 A0F29113 		subw	r3, r0, #401
 279 000c 1C2B     		cmp	r3, #28
 280 000e 0CD9     		bls	.L22
 317:../user/source/main.c ****         return 4800;
 281              		.loc 1 317 0
 282 0010 A0F1BF03 		sub	r3, r0, #191
 283 0014 1C2B     		cmp	r3, #28
 284 0016 0BD9     		bls	.L23
 320:../user/source/main.c ****         return 9600;
 285              		.loc 1 320 0
 286 0018 5B38     		subs	r0, r0, #91
 287              	.LVL18:
 288 001a 1C28     		cmp	r0, #28
 289 001c 0BD8     		bhi	.L24
 321:../user/source/main.c ****     else
 290              		.loc 1 321 0
 291 001e 4FF41650 		mov	r0, #9600
 292              	.LVL19:
 293 0022 7047     		bx	lr
 294              	.LVL20:
 295              	.L21:
 312:../user/source/main.c ****     /* Baud 2400:417us*/
 296              		.loc 1 312 0
 297 0024 4FF49660 		mov	r0, #1200
 298              	.LVL21:
 299 0028 7047     		bx	lr
 300              	.LVL22:
 301              	.L22:
 315:../user/source/main.c ****     /* Baud 4800:208us*/
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 14


 302              		.loc 1 315 0
 303 002a 4FF41660 		mov	r0, #2400
 304              	.LVL23:
 305 002e 7047     		bx	lr
 306              	.LVL24:
 307              	.L23:
 318:../user/source/main.c ****     /* Baud 9600 :104us*/
 308              		.loc 1 318 0
 309 0030 4FF49650 		mov	r0, #4800
 310              	.LVL25:
 311 0034 7047     		bx	lr
 312              	.L24:
 324:../user/source/main.c **** }
 313              		.loc 1 324 0
 314 0036 4FF41660 		mov	r0, #2400
 325:../user/source/main.c **** 
 315              		.loc 1 325 0
 316 003a 7047     		bx	lr
 317              		.cfi_endproc
 318              	.LFE114:
 320              		.section	.text.vAutoSetBaudrate,"ax",%progbits
 321              		.align	2
 322              		.thumb
 323              		.thumb_func
 325              	vAutoSetBaudrate:
 326              	.LFB116:
 368:../user/source/main.c ****     uint32_t Uart_BaudRate;
 327              		.loc 1 368 0
 328              		.cfi_startproc
 329              		@ args = 0, pretend = 0, frame = 0
 330              		@ frame_needed = 0, uses_anonymous_args = 0
 331 0000 38B5     		push	{r3, r4, r5, lr}
 332              	.LCFI4:
 333              		.cfi_def_cfa_offset 16
 334              		.cfi_offset 3, -16
 335              		.cfi_offset 4, -12
 336              		.cfi_offset 5, -8
 337              		.cfi_offset 14, -4
 370:../user/source/main.c ****     vSystickIntCmd(ENABLE);
 338              		.loc 1 370 0
 339 0002 1F48     		ldr	r0, .L29
 340 0004 FFF7FEFF 		bl	vSystickSetAccuracy
 341              	.LVL26:
 371:../user/source/main.c ****     /*TICKÊ¹ÄÜºó²ÅÄÜ³õÊ¼»¯Íâ²¿ÖÐ¶Ï*/
 342              		.loc 1 371 0
 343 0008 0120     		movs	r0, #1
 344 000a FFF7FEFF 		bl	vSystickIntCmd
 345              	.LVL27:
 373:../user/source/main.c ****     irqCount = 100;
 346              		.loc 1 373 0
 347 000e FFF7FEFF 		bl	vExti_Init
 348              	.LVL28:
 374:../user/source/main.c ****     uwBaudelay = 0xFFFFFFFF;
 349              		.loc 1 374 0
 350 0012 6422     		movs	r2, #100
 351 0014 1B4B     		ldr	r3, .L29+4
 352 0016 1A60     		str	r2, [r3]
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 15


 375:../user/source/main.c ****     while (irqCount)
 353              		.loc 1 375 0
 354 0018 4FF0FF32 		mov	r2, #-1
 355 001c 1A4B     		ldr	r3, .L29+8
 356 001e 1A60     		str	r2, [r3]
 376:../user/source/main.c ****     {
 357              		.loc 1 376 0
 358 0020 01E0     		b	.L26
 359              	.L27:
 378:../user/source/main.c ****     }
 360              		.loc 1 378 0
 361 0022 FFF7FEFF 		bl	vFeedExtWatchDog
 362              	.LVL29:
 363              	.L26:
 376:../user/source/main.c ****     {
 364              		.loc 1 376 0
 365 0026 174B     		ldr	r3, .L29+4
 366 0028 1B68     		ldr	r3, [r3]
 367 002a 002B     		cmp	r3, #0
 368 002c F9D1     		bne	.L27
 380:../user/source/main.c ****     Uart_BaudRate = uwFindBaudRate(uwBaudelay);
 369              		.loc 1 380 0
 370 002e FFF7FEFF 		bl	EXTI_DeInit
 371              	.LVL30:
 381:../user/source/main.c ****     vSystickSetAccuracy(1000); //systick=1ms
 372              		.loc 1 381 0
 373 0032 154B     		ldr	r3, .L29+8
 374 0034 1868     		ldr	r0, [r3]
 375 0036 FFF7FEFF 		bl	uwFindBaudRate
 376              	.LVL31:
 377 003a 0546     		mov	r5, r0
 378              	.LVL32:
 382:../user/source/main.c ****     vSystickIntCmd(ENABLE);
 379              		.loc 1 382 0
 380 003c 4FF47A70 		mov	r0, #1000
 381              	.LVL33:
 382 0040 FFF7FEFF 		bl	vSystickSetAccuracy
 383              	.LVL34:
 383:../user/source/main.c ****     vUart_EnableBaudrate(pUartZD, Uart_BaudRate); //Ê¹ÄÜ½ÓÊÕÖÐ¶Ï
 384              		.loc 1 383 0
 385 0044 0120     		movs	r0, #1
 386 0046 FFF7FEFF 		bl	vSystickIntCmd
 387              	.LVL35:
 384:../user/source/main.c ****     vUart_EnableBaudrate(pUartDB, Uart_BaudRate);
 388              		.loc 1 384 0
 389 004a 104C     		ldr	r4, .L29+12
 390 004c 2946     		mov	r1, r5
 391 004e 2068     		ldr	r0, [r4]
 392 0050 FFF7FEFF 		bl	vUart_EnableBaudrate
 393              	.LVL36:
 385:../user/source/main.c ****     /*½ÓÊÕºóÐø×Ö½Ú²¢ºöÂÔ*/
 394              		.loc 1 385 0
 395 0054 2946     		mov	r1, r5
 396 0056 0E4B     		ldr	r3, .L29+16
 397 0058 1868     		ldr	r0, [r3]
 398 005a FFF7FEFF 		bl	vUart_EnableBaudrate
 399              	.LVL37:
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 16


 387:../user/source/main.c ****     Uart_IdleRead(pUartZD, ucApp_Buf_ZD2DB, DRV_BUF_SIZE, TICK_500MS);
 400              		.loc 1 387 0
 401 005e FFF7FEFF 		bl	vFeedExtWatchDog
 402              	.LVL38:
 388:../user/source/main.c ****     vBuf_Clear(pUartZD->pRsvbuf);
 403              		.loc 1 388 0
 404 0062 0C4B     		ldr	r3, .L29+20
 405 0064 1B68     		ldr	r3, [r3]
 406 0066 5B08     		lsrs	r3, r3, #1
 407 0068 4FF47A72 		mov	r2, #1000
 408 006c 0A49     		ldr	r1, .L29+24
 409 006e 2068     		ldr	r0, [r4]
 410 0070 FFF7FEFF 		bl	Uart_IdleRead
 411              	.LVL39:
 389:../user/source/main.c ****     //Uart_idleReadEnable(pUartZD);
 412              		.loc 1 389 0
 413 0074 2368     		ldr	r3, [r4]
 414 0076 5868     		ldr	r0, [r3, #4]
 415 0078 FFF7FEFF 		bl	vBuf_Clear
 416              	.LVL40:
 417 007c 38BD     		pop	{r3, r4, r5, pc}
 418              	.LVL41:
 419              	.L30:
 420 007e 00BF     		.align	2
 421              	.L29:
 422 0080 40420F00 		.word	1000000
 423 0084 00000000 		.word	.LANCHOR1
 424 0088 00000000 		.word	uwBaudelay
 425 008c 00000000 		.word	pUartZD
 426 0090 00000000 		.word	pUartDB
 427 0094 00000000 		.word	gSystickAccuracy
 428 0098 00000000 		.word	ucApp_Buf_ZD2DB
 429              		.cfi_endproc
 430              	.LFE116:
 432              		.section	.text.main,"ax",%progbits
 433              		.align	2
 434              		.global	main
 435              		.thumb
 436              		.thumb_func
 438              	main:
 439              	.LFB111:
  28:../user/source/main.c ****     ProtocolDef ProtocolType = none;
 440              		.loc 1 28 0
 441              		.cfi_startproc
 442              		@ args = 0, pretend = 0, frame = 24
 443              		@ frame_needed = 0, uses_anonymous_args = 0
 444 0000 70B5     		push	{r4, r5, r6, lr}
 445              	.LCFI5:
 446              		.cfi_def_cfa_offset 16
 447              		.cfi_offset 4, -16
 448              		.cfi_offset 5, -12
 449              		.cfi_offset 6, -8
 450              		.cfi_offset 14, -4
 451 0002 86B0     		sub	sp, sp, #24
 452              	.LCFI6:
 453              		.cfi_def_cfa_offset 40
 454              	.LVL42:
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 17


  30:../user/source/main.c ****     uint32_t dwLen = 0;
 455              		.loc 1 30 0
 456 0004 0023     		movs	r3, #0
 457 0006 0593     		str	r3, [sp, #20]
 458              	.LVL43:
  36:../user/source/main.c ****     {
 459              		.loc 1 36 0
 460 0008 01E0     		b	.L32
 461              	.L33:
  38:../user/source/main.c ****     }
 462              		.loc 1 38 0
 463 000a FFF7FEFF 		bl	vFeedExtWatchDog
 464              	.LVL44:
 465              	.L32:
  36:../user/source/main.c ****     {
 466              		.loc 1 36 0
 467 000e A44A     		ldr	r2, .L56
 468 0010 1368     		ldr	r3, [r2]
 469 0012 591E     		subs	r1, r3, #1
 470 0014 1160     		str	r1, [r2]
 471 0016 002B     		cmp	r3, #0
 472 0018 F7D1     		bne	.L33
  40:../user/source/main.c ****     //SysTick_Config(SysTick_100Ms);
 473              		.loc 1 40 0
 474 001a 4FF4C060 		mov	r0, #1536
 475 001e FFF7FEFF 		bl	NVIC_PriorityGroupConfig
 476              	.LVL45:
  45:../user/source/main.c ****     vGPIO_Init();
 477              		.loc 1 45 0
 478 0022 FFF7FEFF 		bl	vInterFlash_Init
 479              	.LVL46:
  46:../user/source/main.c ****     vFeedExtWatchDog();
 480              		.loc 1 46 0
 481 0026 FFF7FEFF 		bl	vGPIO_Init
 482              	.LVL47:
  47:../user/source/main.c ****     vTimer_Init();
 483              		.loc 1 47 0
 484 002a FFF7FEFF 		bl	vFeedExtWatchDog
 485              	.LVL48:
  48:../user/source/main.c ****     vLed_Light();
 486              		.loc 1 48 0
 487 002e FFF7FEFF 		bl	vTimer_Init
 488              	.LVL49:
  49:../user/source/main.c ****     vAutoSetBaudrate(); //¼¯ÖÐÆ÷²à¶ÁÈ¡Ò»Ö¡£¬Ê¶±ð²¨ÌØÂÊ
 489              		.loc 1 49 0
 490 0032 FFF7FEFF 		bl	vLed_Light
 491              	.LVL50:
  50:../user/source/main.c ****     /*µçÑ¹ÐÞ¸ÄµÄÉÏÏÂÏÞÖµÉèÎªÄ¬ÈÏÖµ£»¿ªÆôÐÞ¸Ä¹¦ÄÜ */
 492              		.loc 1 50 0
 493 0036 FFF7FEFF 		bl	vAutoSetBaudrate
 494              	.LVL51:
  52:../user/source/main.c ****     /*µçÁ÷ÖØ¹ýÔØ²ÎÊýÉèÖÃ*/
 495              		.loc 1 52 0
 496 003a FFF7FEFF 		bl	Voltage_Change_Init
 497              	.LVL52:
  54:../user/source/main.c ****     /*µçÁ¿ÐÞ¸ÄµÄÉÏÏÂÏÞÖµÉèÎªÄ¬ÈÏÖµ£»¿ªÆôÐÞ¸Ä¹¦ÄÜ */
 498              		.loc 1 54 0
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 18


 499 003e FFF7FEFF 		bl	vCurrent_Limit_DefaultSet
 500              	.LVL53:
  56:../user/source/main.c ****     while (1)
 501              		.loc 1 56 0
 502 0042 FFF7FEFF 		bl	vEnergy_Modify_Init
 503              	.LVL54:
  29:../user/source/main.c ****     uint8_t *pAPDU = NULL;
 504              		.loc 1 29 0
 505 0046 0224     		movs	r4, #2
 506              	.LVL55:
 507              	.L35:
  59:../user/source/main.c ****         {
 508              		.loc 1 59 0
 509 0048 012C     		cmp	r4, #1
 510 004a 4ED0     		beq	.L36
 511 004c 002C     		cmp	r4, #0
 512 004e 00F0DE80 		beq	.L37
 513 0052 022C     		cmp	r4, #2
 514 0054 F8D1     		bne	.L35
  63:../user/source/main.c ****             vLedRun(TICK_200MS);
 515              		.loc 1 63 0
 516 0056 FFF7FEFF 		bl	vFeedExtWatchDog
 517              	.LVL56:
  64:../user/source/main.c ****             /*Ê¶±ð¹æÔ¼ÀàÐÍ*/
 518              		.loc 1 64 0
 519 005a 924B     		ldr	r3, .L56+4
 520 005c 1B68     		ldr	r3, [r3]
 521 005e 9248     		ldr	r0, .L56+8
 522 0060 A0FB0330 		umull	r3, r0, r0, r3
 523 0064 8008     		lsrs	r0, r0, #2
 524 0066 FFF7FEFF 		bl	vLedRun
 525              	.LVL57:
  66:../user/source/main.c ****             Uart_idleReadEnable(pUartDB);
 526              		.loc 1 66 0
 527 006a 904B     		ldr	r3, .L56+12
 528 006c 1868     		ldr	r0, [r3]
 529 006e FFF7FEFF 		bl	Uart_idleReadEnable
 530              	.LVL58:
  67:../user/source/main.c ****             if (FLAG_UartZD_HasData)
 531              		.loc 1 67 0
 532 0072 8F4B     		ldr	r3, .L56+16
 533 0074 1868     		ldr	r0, [r3]
 534 0076 FFF7FEFF 		bl	Uart_idleReadEnable
 535              	.LVL59:
  68:../user/source/main.c ****             {
 536              		.loc 1 68 0
 537 007a 8E4B     		ldr	r3, .L56+20
 538 007c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 539 007e BBB1     		cbz	r3, .L39
  70:../user/source/main.c ****                 FLAG_UartZD_HasData = false;
 540              		.loc 1 70 0
 541 0080 8A4D     		ldr	r5, .L56+12
 542 0082 2868     		ldr	r0, [r5]
 543 0084 FFF7FEFF 		bl	Uart_idleReadDisable
 544              	.LVL60:
  71:../user/source/main.c ****                 vFeedExtWatchDog();
 545              		.loc 1 71 0
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 19


 546 0088 0022     		movs	r2, #0
 547 008a 8A4B     		ldr	r3, .L56+20
 548 008c 1A70     		strb	r2, [r3]
  72:../user/source/main.c ****                 dwLen = dwUartCopy(pUartZD, ucApp_Buf_ZD2DB, pUartDB);
 549              		.loc 1 72 0
 550 008e FFF7FEFF 		bl	vFeedExtWatchDog
 551              	.LVL61:
  73:../user/source/main.c ****                 ProtocolType = GetProtocolType(ucApp_Buf_ZD2DB, dwLen);
 552              		.loc 1 73 0
 553 0092 894C     		ldr	r4, .L56+24
 554              	.LVL62:
 555 0094 864B     		ldr	r3, .L56+16
 556 0096 1A68     		ldr	r2, [r3]
 557 0098 2146     		mov	r1, r4
 558 009a 2868     		ldr	r0, [r5]
 559 009c FFF7FEFF 		bl	dwUartCopy
 560              	.LVL63:
  74:../user/source/main.c ****                 Uart_idleReadEnable(pUartZD);
 561              		.loc 1 74 0
 562 00a0 0146     		mov	r1, r0
 563 00a2 2046     		mov	r0, r4
 564              	.LVL64:
 565 00a4 FFF7FEFF 		bl	GetProtocolType
 566              	.LVL65:
 567 00a8 0446     		mov	r4, r0
 568              	.LVL66:
  75:../user/source/main.c ****             }
 569              		.loc 1 75 0
 570 00aa 2868     		ldr	r0, [r5]
 571 00ac FFF7FEFF 		bl	Uart_idleReadEnable
 572              	.LVL67:
 573              	.L39:
  77:../user/source/main.c ****             {
 574              		.loc 1 77 0
 575 00b0 824B     		ldr	r3, .L56+28
 576 00b2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 577 00b4 002B     		cmp	r3, #0
 578 00b6 C7D0     		beq	.L35
  79:../user/source/main.c ****                 FLAG_UartDB_HasData = false;
 579              		.loc 1 79 0
 580 00b8 7D4D     		ldr	r5, .L56+16
 581 00ba 2868     		ldr	r0, [r5]
 582 00bc FFF7FEFF 		bl	Uart_idleReadDisable
 583              	.LVL68:
  80:../user/source/main.c ****                 vFeedExtWatchDog();
 584              		.loc 1 80 0
 585 00c0 0022     		movs	r2, #0
 586 00c2 7E4B     		ldr	r3, .L56+28
 587 00c4 1A70     		strb	r2, [r3]
  81:../user/source/main.c ****                 dwLen = dwUartCopy(pUartDB, ucApp_Buf_DB2ZD, pUartZD);
 588              		.loc 1 81 0
 589 00c6 FFF7FEFF 		bl	vFeedExtWatchDog
 590              	.LVL69:
  82:../user/source/main.c ****                 ProtocolType = GetProtocolType(ucApp_Buf_DB2ZD, dwLen); //Ð£Ñé´íÎóÒ²ÄÛ¹ý£¿
 591              		.loc 1 82 0
 592 00ca 7D4C     		ldr	r4, .L56+32
 593              	.LVL70:
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 20


 594 00cc 774B     		ldr	r3, .L56+12
 595 00ce 1A68     		ldr	r2, [r3]
 596 00d0 2146     		mov	r1, r4
 597 00d2 2868     		ldr	r0, [r5]
 598 00d4 FFF7FEFF 		bl	dwUartCopy
 599              	.LVL71:
  83:../user/source/main.c ****                 Uart_idleReadEnable(pUartDB);
 600              		.loc 1 83 0
 601 00d8 0146     		mov	r1, r0
 602 00da 2046     		mov	r0, r4
 603              	.LVL72:
 604 00dc FFF7FEFF 		bl	GetProtocolType
 605              	.LVL73:
 606 00e0 0446     		mov	r4, r0
 607              	.LVL74:
  84:../user/source/main.c ****             }
 608              		.loc 1 84 0
 609 00e2 2868     		ldr	r0, [r5]
 610 00e4 FFF7FEFF 		bl	Uart_idleReadEnable
 611              	.LVL75:
 612 00e8 AEE7     		b	.L35
 613              	.L36:
  90:../user/source/main.c ****             vLedRun(TICK_1S);
 614              		.loc 1 90 0
 615 00ea FFF7FEFF 		bl	vFeedExtWatchDog
 616              	.LVL76:
  91:../user/source/main.c ****             Uart_idleReadEnable(pUartZD);
 617              		.loc 1 91 0
 618 00ee 6D4B     		ldr	r3, .L56+4
 619 00f0 1868     		ldr	r0, [r3]
 620 00f2 FFF7FEFF 		bl	vLedRun
 621              	.LVL77:
  92:../user/source/main.c ****             Uart_idleReadEnable(pUartDB);
 622              		.loc 1 92 0
 623 00f6 6D4B     		ldr	r3, .L56+12
 624 00f8 1868     		ldr	r0, [r3]
 625 00fa FFF7FEFF 		bl	Uart_idleReadEnable
 626              	.LVL78:
  93:../user/source/main.c ****             if (FLAG_UartZD_HasData)
 627              		.loc 1 93 0
 628 00fe 6C4B     		ldr	r3, .L56+16
 629 0100 1868     		ldr	r0, [r3]
 630 0102 FFF7FEFF 		bl	Uart_idleReadEnable
 631              	.LVL79:
  94:../user/source/main.c ****             {
 632              		.loc 1 94 0
 633 0106 6B4B     		ldr	r3, .L56+20
 634 0108 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 635 010a 93B1     		cbz	r3, .L41
  96:../user/source/main.c ****                 FLAG_UartZD_HasData = false;
 636              		.loc 1 96 0
 637 010c 674D     		ldr	r5, .L56+12
 638 010e 2868     		ldr	r0, [r5]
 639 0110 FFF7FEFF 		bl	Uart_idleReadDisable
 640              	.LVL80:
  97:../user/source/main.c ****                 vFeedExtWatchDog();
 641              		.loc 1 97 0
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 21


 642 0114 0022     		movs	r2, #0
 643 0116 674B     		ldr	r3, .L56+20
 644 0118 1A70     		strb	r2, [r3]
  98:../user/source/main.c ****                 dwLen = dwUartCopy(pUartZD, ucApp_Buf_ZD2DB, pUartDB);
 645              		.loc 1 98 0
 646 011a FFF7FEFF 		bl	vFeedExtWatchDog
 647              	.LVL81:
  99:../user/source/main.c ****                 Uart_idleReadEnable(pUartZD);
 648              		.loc 1 99 0
 649 011e 644B     		ldr	r3, .L56+16
 650 0120 1A68     		ldr	r2, [r3]
 651 0122 6549     		ldr	r1, .L56+24
 652 0124 2868     		ldr	r0, [r5]
 653 0126 FFF7FEFF 		bl	dwUartCopy
 654              	.LVL82:
 100:../user/source/main.c ****                 //if (pframe = pGetpFrame(ucApp_Buf_ZD2DB, dwLen) == NULL)
 655              		.loc 1 100 0
 656 012a 2868     		ldr	r0, [r5]
 657 012c FFF7FEFF 		bl	Uart_idleReadEnable
 658              	.LVL83:
 102:../user/source/main.c ****             }
 659              		.loc 1 102 0
 660 0130 8AE7     		b	.L35
 661              	.L41:
 104:../user/source/main.c ****             {
 662              		.loc 1 104 0
 663 0132 624B     		ldr	r3, .L56+28
 664 0134 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 665 0136 002B     		cmp	r3, #0
 666 0138 64D0     		beq	.L42
 106:../user/source/main.c ****                 Uart_idleReadDisable(pUartDB);
 667              		.loc 1 106 0
 668 013a FFF7FEFF 		bl	vFeedExtWatchDog
 669              	.LVL84:
 107:../user/source/main.c ****                 FLAG_UartDB_HasData = false;
 670              		.loc 1 107 0
 671 013e 5C4D     		ldr	r5, .L56+16
 672 0140 2868     		ldr	r0, [r5]
 673 0142 FFF7FEFF 		bl	Uart_idleReadDisable
 674              	.LVL85:
 108:../user/source/main.c ****                 dlt698Frame.pStart = NULL;
 675              		.loc 1 108 0
 676 0146 0023     		movs	r3, #0
 677 0148 5C4A     		ldr	r2, .L56+28
 678 014a 1370     		strb	r3, [r2]
 109:../user/source/main.c ****                 //dwLen = 0;
 679              		.loc 1 109 0
 680 014c 0193     		str	r3, [sp, #4]
 113:../user/source/main.c ****                     break;
 681              		.loc 1 113 0
 682 014e 4FF47A72 		mov	r2, #1000
 683 0152 5B49     		ldr	r1, .L56+32
 684 0154 2868     		ldr	r0, [r5]
 685 0156 FFF7FEFF 		bl	Uart_Read
 686              	.LVL86:
 687 015a 0546     		mov	r5, r0
 688 015c 0028     		cmp	r0, #0
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 22


 689 015e 3FF473AF 		beq	.L35
 115:../user/source/main.c ****                 {
 690              		.loc 1 115 0
 691 0162 01AA     		add	r2, sp, #4
 692 0164 0146     		mov	r1, r0
 693 0166 5648     		ldr	r0, .L56+32
 694              	.LVL87:
 695 0168 FFF7FEFF 		bl	pGetpFrame
 696              	.LVL88:
 697 016c 90B9     		cbnz	r0, .L43
 117:../user/source/main.c ****                     Uart_OnceWrite(pUartZD, ucApp_Buf_DB2ZD, dwLen, 1000 * TICK_1MS);
 698              		.loc 1 117 0
 699 016e FFF7FEFF 		bl	vFeedExtWatchDog
 700              	.LVL89:
 118:../user/source/main.c ****                 }
 701              		.loc 1 118 0
 702 0172 4C4B     		ldr	r3, .L56+4
 703 0174 1B68     		ldr	r3, [r3]
 704 0176 534A     		ldr	r2, .L56+36
 705 0178 A2FB0323 		umull	r2, r3, r2, r3
 706 017c 9B09     		lsrs	r3, r3, #6
 707 017e 4FF47A72 		mov	r2, #1000
 708 0182 02FB03F3 		mul	r3, r2, r3
 709 0186 2A46     		mov	r2, r5
 710 0188 4D49     		ldr	r1, .L56+32
 711 018a 4848     		ldr	r0, .L56+12
 712 018c 0068     		ldr	r0, [r0]
 713 018e FFF7FEFF 		bl	Uart_OnceWrite
 714              	.LVL90:
 715 0192 37E0     		b	.L42
 716              	.L43:
 121:../user/source/main.c ****                 {
 717              		.loc 1 121 0
 718 0194 4C4B     		ldr	r3, .L56+40
 719 0196 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 720 0198 002B     		cmp	r3, #0
 721 019a 33D0     		beq	.L42
 123:../user/source/main.c ****                     {
 722              		.loc 1 123 0
 723 019c 05A9     		add	r1, sp, #20
 724 019e 01A8     		add	r0, sp, #4
 725 01a0 FFF7FEFF 		bl	dwGet698Apdu
 726              	.LVL91:
 727 01a4 0146     		mov	r1, r0
 728 01a6 00B3     		cbz	r0, .L44
 125:../user/source/main.c ****                         {
 729              		.loc 1 125 0
 730 01a8 484A     		ldr	r2, .L56+44
 731 01aa 0598     		ldr	r0, [sp, #20]
 732              	.LVL92:
 733 01ac FFF7FEFF 		bl	dwAPduAnalyze
 734              	.LVL93:
 735 01b0 0028     		cmp	r0, #0
 736 01b2 12DC     		bgt	.L54
 737 01b4 19E0     		b	.L44
 738              	.LVL94:
 739              	.L47:
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 23


 129:../user/source/main.c ****                                 {
 740              		.loc 1 129 0
 741 01b6 05EB4502 		add	r2, r5, r5, lsl #1
 742 01ba 9300     		lsls	r3, r2, #2
 743 01bc 434A     		ldr	r2, .L56+44
 744 01be 1344     		add	r3, r3, r2
 745 01c0 1B89     		ldrh	r3, [r3, #8]
 746 01c2 B3F5005F 		cmp	r3, #8192
 747 01c6 06D1     		bne	.L46
 131:../user/source/main.c ****                                 }
 748              		.loc 1 131 0
 749 01c8 05EB4503 		add	r3, r5, r5, lsl #1
 750 01cc 9800     		lsls	r0, r3, #2
 751 01ce 0830     		adds	r0, r0, #8
 752 01d0 1044     		add	r0, r0, r2
 753 01d2 FFF7FEFF 		bl	v698VoltageModify
 754              	.LVL95:
 755              	.L46:
 127:../user/source/main.c ****                             {
 756              		.loc 1 127 0 discriminator 2
 757 01d6 0135     		adds	r5, r5, #1
 758              	.LVL96:
 759 01d8 00E0     		b	.L45
 760              	.LVL97:
 761              	.L54:
 762 01da 0025     		movs	r5, #0
 763              	.L45:
 764              	.LVL98:
 127:../user/source/main.c ****                             {
 765              		.loc 1 127 0 is_stmt 0 discriminator 1
 766 01dc 3B4B     		ldr	r3, .L56+44
 767 01de 9B79     		ldrb	r3, [r3, #6]	@ zero_extendqisi2
 768 01e0 9D42     		cmp	r5, r3
 769 01e2 E8D3     		bcc	.L47
 134:../user/source/main.c ****                         }
 770              		.loc 1 134 0 is_stmt 1
 771 01e4 01A8     		add	r0, sp, #4
 772 01e6 FFF7FEFF 		bl	dwReCalculateFCS
 773              	.LVL99:
 774              	.L44:
 137:../user/source/main.c ****                     Uart_OnceWrite(pUartZD, dlt698Frame.pStart, dlt698Frame.uwFramelen + 2, TICK_50
 775              		.loc 1 137 0
 776 01ea FFF7FEFF 		bl	vFeedExtWatchDog
 777              	.LVL100:
 138:../user/source/main.c ****                 }
 778              		.loc 1 138 0
 779 01ee BDF81020 		ldrh	r2, [sp, #16]
 780 01f2 2C4B     		ldr	r3, .L56+4
 781 01f4 1B68     		ldr	r3, [r3]
 782 01f6 5B08     		lsrs	r3, r3, #1
 783 01f8 0232     		adds	r2, r2, #2
 784 01fa 0199     		ldr	r1, [sp, #4]
 785 01fc 2B48     		ldr	r0, .L56+12
 786 01fe 0068     		ldr	r0, [r0]
 787 0200 FFF7FEFF 		bl	Uart_OnceWrite
 788              	.LVL101:
 789              	.L42:
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 24


 142:../user/source/main.c ****             break;
 790              		.loc 1 142 0
 791 0204 2A4B     		ldr	r3, .L56+16
 792 0206 1868     		ldr	r0, [r3]
 793 0208 FFF7FEFF 		bl	Uart_idleReadEnable
 794              	.LVL102:
 143:../user/source/main.c ****         }
 795              		.loc 1 143 0
 796 020c 1CE7     		b	.L35
 797              	.L37:
 147:../user/source/main.c ****             /*´®¿ÚÎÞÊÕ·¢Ê±Î¹¹·¼ä¸ôÎª1ms×óÓÒ*/
 798              		.loc 1 147 0
 799 020e 254B     		ldr	r3, .L56+4
 800 0210 1868     		ldr	r0, [r3]
 801 0212 FFF7FEFF 		bl	vLedRun
 802              	.LVL103:
 149:../user/source/main.c ****             /*¼¯ÖÐÆ÷²àÊý¾ÝÖ¡ÊÕÖ¡´¦Àí*/
 803              		.loc 1 149 0
 804 0216 FFF7FEFF 		bl	vFeedExtWatchDog
 805              	.LVL104:
 151:../user/source/main.c ****             {
 806              		.loc 1 151 0
 807 021a 244B     		ldr	r3, .L56+12
 808 021c 1B68     		ldr	r3, [r3]
 809 021e 5868     		ldr	r0, [r3, #4]
 810 0220 FFF7FEFF 		bl	blDrv_Buf_IsEmpty
 811              	.LVL105:
 812 0224 10B9     		cbnz	r0, .L48
 153:../user/source/main.c ****             }
 813              		.loc 1 153 0
 814 0226 2448     		ldr	r0, .L56+24
 815 0228 FFF7FEFF 		bl	RsvFrameHandle
 816              	.LVL106:
 817              	.L48:
 157:../user/source/main.c ****             {
 818              		.loc 1 157 0
 819 022c 204B     		ldr	r3, .L56+16
 820 022e 1B68     		ldr	r3, [r3]
 821 0230 5868     		ldr	r0, [r3, #4]
 822 0232 FFF7FEFF 		bl	blDrv_Buf_IsEmpty
 823              	.LVL107:
 824 0236 10B1     		cbz	r0, .L49
 159:../user/source/main.c ****             }
 825              		.loc 1 159 0
 826 0238 FFF7FEFF 		bl	VoltageTimeOutHandle
 827              	.LVL108:
 828 023c 66E0     		b	.L50
 829              	.L49:
 165:../user/source/main.c ****                 {
 830              		.loc 1 165 0
 831 023e 1C4B     		ldr	r3, .L56+16
 832 0240 1B68     		ldr	r3, [r3]
 833 0242 1F49     		ldr	r1, .L56+32
 834 0244 5868     		ldr	r0, [r3, #4]
 835 0246 FFF7FEFF 		bl	blRecvFrame
 836              	.LVL109:
 837 024a 0028     		cmp	r0, #0
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 25


 838 024c 48D1     		bne	.L51
 168:../user/source/main.c ****                         (blTime2_Update(uwTime2FramesCounter, DLT645_FRAMES_DELAY_MAX)))
 839              		.loc 1 168 0
 840 024e 204B     		ldr	r3, .L56+48
 841 0250 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 842 0252 002B     		cmp	r3, #0
 843 0254 5AD1     		bne	.L50
 169:../user/source/main.c ****                     {
 844              		.loc 1 169 0 discriminator 1
 845 0256 1921     		movs	r1, #25
 846 0258 1E4B     		ldr	r3, .L56+52
 847 025a 1888     		ldrh	r0, [r3]
 848 025c FFF7FEFF 		bl	blTime2_Update
 849              	.LVL110:
 168:../user/source/main.c ****                         (blTime2_Update(uwTime2FramesCounter, DLT645_FRAMES_DELAY_MAX)))
 850              		.loc 1 168 0 discriminator 1
 851 0260 0028     		cmp	r0, #0
 852 0262 53D0     		beq	.L50
 172:../user/source/main.c ****                         {
 853              		.loc 1 172 0
 854 0264 1448     		ldr	r0, .L56+24
 855 0266 FFF7FEFF 		bl	blVoltage_Create
 856              	.LVL111:
 857 026a 0028     		cmp	r0, #0
 858 026c 4ED0     		beq	.L50
 174:../user/source/main.c ****                             /*·¢ËÍµçÑ¹Ö¡*/
 859              		.loc 1 174 0
 860 026e 0F4D     		ldr	r5, .L56+12
 861 0270 2B68     		ldr	r3, [r5]
 862 0272 1148     		ldr	r0, .L56+24
 863 0274 427A     		ldrb	r2, [r0, #9]	@ zero_extendqisi2
 864 0276 9968     		ldr	r1, [r3, #8]
 865 0278 FFF7FEFF 		bl	ucDrv_Buf_PutBytes
 866              	.LVL112:
 176:../user/source/main.c ****                             {
 867              		.loc 1 176 0
 868 027c 2B68     		ldr	r3, [r5]
 869 027e 9868     		ldr	r0, [r3, #8]
 870 0280 FFF7FEFF 		bl	blDrv_Buf_IsEmpty
 871              	.LVL113:
 872 0284 0028     		cmp	r0, #0
 873 0286 41D1     		bne	.L50
 178:../user/source/main.c ****                                 /*µÈ´ýµçÑ¹»ØÖ¡×´Ì¬ÇåÎ»*/
 874              		.loc 1 178 0
 875 0288 1348     		ldr	r0, .L56+56
 876 028a FFF7FEFF 		bl	Uart_DataPut
 877              	.LVL114:
 180:../user/source/main.c ****                                 /*¼ÆÊ±Æ÷¸´Î»*/
 878              		.loc 1 180 0
 879 028e 0122     		movs	r2, #1
 880 0290 0F4B     		ldr	r3, .L56+48
 881 0292 1A70     		strb	r2, [r3]
 182:../user/source/main.c ****                                 uwTime2FramesCounter = 0;
 882              		.loc 1 182 0
 883 0294 0023     		movs	r3, #0
 884 0296 114A     		ldr	r2, .L56+60
 885 0298 1370     		strb	r3, [r2]
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 26


 183:../user/source/main.c ****                             }
 886              		.loc 1 183 0
 887 029a 0E4A     		ldr	r2, .L56+52
 888 029c 1380     		strh	r3, [r2]	@ movhi
 889 029e 35E0     		b	.L50
 890              	.L57:
 891              		.align	2
 892              	.L56:
 893 02a0 00000000 		.word	.LANCHOR2
 894 02a4 00000000 		.word	gSystickAccuracy
 895 02a8 CDCCCCCC 		.word	-858993459
 896 02ac 00000000 		.word	pUartZD
 897 02b0 00000000 		.word	pUartDB
 898 02b4 00000000 		.word	.LANCHOR3
 899 02b8 00000000 		.word	ucApp_Buf_ZD2DB
 900 02bc 00000000 		.word	.LANCHOR4
 901 02c0 00000000 		.word	ucApp_Buf_DB2ZD
 902 02c4 D34D6210 		.word	274877907
 903 02c8 00000000 		.word	Voltage_Change_State
 904 02cc 00000000 		.word	stCollData
 905 02d0 00000000 		.word	Voltage_Frame_Status
 906 02d4 00000000 		.word	uwTime2FramesCounter
 907 02d8 00380140 		.word	1073821696
 908 02dc 00000000 		.word	blFramesCounterStatus
 909              	.L51:
 191:../user/source/main.c ****                     ucDrv_Buf_PutBytes(ucApp_Buf_DB2ZD, pUartZD->pSndbuf, uc645DataDomainLength + 1
 910              		.loc 1 191 0
 911 02e0 2F4E     		ldr	r6, .L58
 912 02e2 3046     		mov	r0, r6
 913 02e4 FFF7FEFF 		bl	vDBDataID_Handle
 914              	.LVL115:
 192:../user/source/main.c ****                     if (!blDrv_Buf_IsEmpty(pUartZD->pSndbuf))
 915              		.loc 1 192 0
 916 02e8 2E4D     		ldr	r5, .L58+4
 917 02ea 2B68     		ldr	r3, [r5]
 918 02ec 2E4A     		ldr	r2, .L58+8
 919 02ee 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 920 02f0 0C32     		adds	r2, r2, #12
 921 02f2 9968     		ldr	r1, [r3, #8]
 922 02f4 3046     		mov	r0, r6
 923 02f6 FFF7FEFF 		bl	ucDrv_Buf_PutBytes
 924              	.LVL116:
 193:../user/source/main.c ****                     {
 925              		.loc 1 193 0
 926 02fa 2B68     		ldr	r3, [r5]
 927 02fc 9868     		ldr	r0, [r3, #8]
 928 02fe FFF7FEFF 		bl	blDrv_Buf_IsEmpty
 929              	.LVL117:
 930 0302 18B9     		cbnz	r0, .L50
 195:../user/source/main.c ****                     }
 931              		.loc 1 195 0
 932 0304 2B68     		ldr	r3, [r5]
 933 0306 1868     		ldr	r0, [r3]
 934 0308 FFF7FEFF 		bl	Uart_DataPut
 935              	.LVL118:
 936              	.L50:
 202:../user/source/main.c ****             {
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 27


 937              		.loc 1 202 0
 938 030c 274B     		ldr	r3, .L58+12
 939 030e 1B68     		ldr	r3, [r3]
 940 0310 5868     		ldr	r0, [r3, #4]
 941 0312 FFF7FEFF 		bl	blDrv_Buf_IsEmpty
 942              	.LVL119:
 943 0316 0028     		cmp	r0, #0
 944 0318 7FF496AE 		bne	.L35
 204:../user/source/main.c ****                 {
 945              		.loc 1 204 0
 946 031c 234B     		ldr	r3, .L58+12
 947 031e 1B68     		ldr	r3, [r3]
 948 0320 2349     		ldr	r1, .L58+16
 949 0322 5868     		ldr	r0, [r3, #4]
 950 0324 FFF7FEFF 		bl	blRecvFrame
 951              	.LVL120:
 952 0328 0028     		cmp	r0, #0
 953 032a 3FF48DAE 		beq	.L35
 206:../user/source/main.c ****                     {
 954              		.loc 1 206 0
 955 032e 204B     		ldr	r3, .L58+16
 956 0330 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 957 0332 132B     		cmp	r3, #19
 958 0334 1DD1     		bne	.L52
 208:../user/source/main.c ****                         ucApp_Buf_INFR[2] = 0x01;
 959              		.loc 1 208 0
 960 0336 1E48     		ldr	r0, .L58+16
 961 0338 0123     		movs	r3, #1
 962 033a 4370     		strb	r3, [r0, #1]
 209:../user/source/main.c ****                         ucApp_Buf_INFR[3] = 0x01;
 963              		.loc 1 209 0
 964 033c 8370     		strb	r3, [r0, #2]
 210:../user/source/main.c ****                         ucApp_Buf_INFR[4] = 0x01;
 965              		.loc 1 210 0
 966 033e C370     		strb	r3, [r0, #3]
 211:../user/source/main.c ****                         ucApp_Buf_INFR[5] = 0x01;
 967              		.loc 1 211 0
 968 0340 0371     		strb	r3, [r0, #4]
 212:../user/source/main.c ****                         ucApp_Buf_INFR[6] = 0x01;
 969              		.loc 1 212 0
 970 0342 4371     		strb	r3, [r0, #5]
 213:../user/source/main.c ****                         ucApp_Buf_INFR[8] = 0x93;
 971              		.loc 1 213 0
 972 0344 8371     		strb	r3, [r0, #6]
 214:../user/source/main.c ****                         ucApp_Buf_INFR[9] = 0x06;
 973              		.loc 1 214 0
 974 0346 9323     		movs	r3, #147
 975 0348 0372     		strb	r3, [r0, #8]
 215:../user/source/main.c ****                         ucApp_Buf_INFR[10] = 0x34;
 976              		.loc 1 215 0
 977 034a 0623     		movs	r3, #6
 978 034c 4372     		strb	r3, [r0, #9]
 216:../user/source/main.c ****                         ucApp_Buf_INFR[11] = 0x34;
 979              		.loc 1 216 0
 980 034e 3423     		movs	r3, #52
 981 0350 8372     		strb	r3, [r0, #10]
 217:../user/source/main.c ****                         ucApp_Buf_INFR[12] = 0x34;
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 28


 982              		.loc 1 217 0
 983 0352 C372     		strb	r3, [r0, #11]
 218:../user/source/main.c ****                         ucApp_Buf_INFR[13] = 0x34;
 984              		.loc 1 218 0
 985 0354 0373     		strb	r3, [r0, #12]
 219:../user/source/main.c ****                         ucApp_Buf_INFR[14] = 0x34;
 986              		.loc 1 219 0
 987 0356 4373     		strb	r3, [r0, #13]
 220:../user/source/main.c ****                         ucApp_Buf_INFR[15] = 0x34;
 988              		.loc 1 220 0
 989 0358 8373     		strb	r3, [r0, #14]
 221:../user/source/main.c ****                         ucApp_Buf_INFR[16] = 0xA7;
 990              		.loc 1 221 0
 991 035a C373     		strb	r3, [r0, #15]
 222:../user/source/main.c ****                         ucApp_Buf_INFR[17] = 0x16;
 992              		.loc 1 222 0
 993 035c A723     		movs	r3, #167
 994 035e 0374     		strb	r3, [r0, #16]
 223:../user/source/main.c ****                         ucDrv_Buf_PutBytes(ucApp_Buf_INFR, pUartIR->pSndbuf, 18);
 995              		.loc 1 223 0
 996 0360 1623     		movs	r3, #22
 997 0362 4374     		strb	r3, [r0, #17]
 224:../user/source/main.c ****                     }
 998              		.loc 1 224 0
 999 0364 114B     		ldr	r3, .L58+12
 1000 0366 1B68     		ldr	r3, [r3]
 1001 0368 1222     		movs	r2, #18
 1002 036a 9968     		ldr	r1, [r3, #8]
 1003 036c FFF7FEFF 		bl	ucDrv_Buf_PutBytes
 1004              	.LVL121:
 1005 0370 02E0     		b	.L53
 1006              	.L52:
 228:../user/source/main.c ****                     }
 1007              		.loc 1 228 0
 1008 0372 0F48     		ldr	r0, .L58+16
 1009 0374 FFF7FEFF 		bl	vINFRDataID_Handle
 1010              	.LVL122:
 1011              	.L53:
 231:../user/source/main.c ****                     {
 1012              		.loc 1 231 0
 1013 0378 0C4B     		ldr	r3, .L58+12
 1014 037a 1B68     		ldr	r3, [r3]
 1015 037c 9868     		ldr	r0, [r3, #8]
 1016 037e FFF7FEFF 		bl	blDrv_Buf_IsEmpty
 1017              	.LVL123:
 1018 0382 0028     		cmp	r0, #0
 1019 0384 7FF460AE 		bne	.L35
 233:../user/source/main.c ****                         //TIM_CCxCmd(TIM5, TIM_Channel_2, TIM_CCx_Enable);
 1020              		.loc 1 233 0
 1021 0388 0A4D     		ldr	r5, .L58+20
 1022 038a 0022     		movs	r2, #0
 1023 038c 0A49     		ldr	r1, .L58+24
 1024 038e 2846     		mov	r0, r5
 1025 0390 FFF7FEFF 		bl	USART_ITConfig
 1026              	.LVL124:
 235:../user/source/main.c ****                     }
 1027              		.loc 1 235 0
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 29


 1028 0394 0122     		movs	r2, #1
 1029 0396 0949     		ldr	r1, .L58+28
 1030 0398 2846     		mov	r0, r5
 1031 039a FFF7FEFF 		bl	USART_ITConfig
 1032              	.LVL125:
 1033 039e 53E6     		b	.L35
 1034              	.L59:
 1035              		.align	2
 1036              	.L58:
 1037 03a0 00000000 		.word	ucApp_Buf_DB2ZD
 1038 03a4 00000000 		.word	pUartZD
 1039 03a8 00000000 		.word	uc645DataDomainLength
 1040 03ac 00000000 		.word	pUartIR
 1041 03b0 00000000 		.word	ucApp_Buf_INFR
 1042 03b4 00440040 		.word	1073759232
 1043 03b8 05010500 		.word	327941
 1044 03bc 07010700 		.word	459015
 1045              		.cfi_endproc
 1046              	.LFE111:
 1048              		.section	.text.vUartZD_BaudelayCal,"ax",%progbits
 1049              		.align	2
 1050              		.global	vUartZD_BaudelayCal
 1051              		.thumb
 1052              		.thumb_func
 1054              	vUartZD_BaudelayCal:
 1055              	.LFB115:
 338:../user/source/main.c **** 
 1056              		.loc 1 338 0
 1057              		.cfi_startproc
 1058              		@ args = 0, pretend = 0, frame = 0
 1059              		@ frame_needed = 0, uses_anonymous_args = 0
 1060              		@ link register save eliminated.
 1061              	.LVL126:
 343:../user/source/main.c ****     /*È¡µ±Ç°tickÊý£¬0~0xFFFFÑ­»·*/
 1062              		.loc 1 343 0
 1063 0000 0C4A     		ldr	r2, .L63
 1064 0002 1368     		ldr	r3, [r2]
 1065 0004 013B     		subs	r3, r3, #1
 1066 0006 1360     		str	r3, [r2]
 345:../user/source/main.c ****     /*³õ´ÎÊÕµ½´®¿ÚÊý¾Ý£¬ÏµÍ³tick×î´ó65535*/
 1067              		.loc 1 345 0
 1068 0008 0B4B     		ldr	r3, .L63+4
 1069 000a 1A68     		ldr	r2, [r3]
 1070              	.LVL127:
 347:../user/source/main.c ****     {
 1071              		.loc 1 347 0
 1072 000c 0B4B     		ldr	r3, .L63+8
 1073 000e 1B68     		ldr	r3, [r3]
 1074 0010 B3F1FF3F 		cmp	r3, #-1
 1075 0014 0BD0     		beq	.L61
 350:../user/source/main.c ****         /*µ±Ç°tickÊý´æÎªcount*/
 1076              		.loc 1 350 0
 1077 0016 D31A     		subs	r3, r2, r3
 1078 0018 03F57F43 		add	r3, r3, #65280
 1079 001c FF33     		adds	r3, r3, #255
 1080 001e 9BB2     		uxth	r3, r3
 1081              	.LVL128:
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 30


 352:../user/source/main.c ****         /*ÓëÉÏ´Îdelay±È½Ï£¬È¡½ÏÐ¡Öµ´æÎªdelay*/
 1082              		.loc 1 352 0
 1083 0020 0649     		ldr	r1, .L63+8
 1084 0022 0A60     		str	r2, [r1]
 354:../user/source/main.c ****         {
 1085              		.loc 1 354 0
 1086 0024 0268     		ldr	r2, [r0]
 1087              	.LVL129:
 1088 0026 9342     		cmp	r3, r2
 1089 0028 03D2     		bcs	.L60
 356:../user/source/main.c ****         }
 1090              		.loc 1 356 0
 1091 002a 0360     		str	r3, [r0]
 1092              	.LVL130:
 1093 002c 7047     		bx	lr
 1094              	.LVL131:
 1095              	.L61:
 363:../user/source/main.c ****     }
 1096              		.loc 1 363 0
 1097 002e 034B     		ldr	r3, .L63+8
 1098 0030 1A60     		str	r2, [r3]
 1099              	.LVL132:
 1100              	.L60:
 1101 0032 7047     		bx	lr
 1102              	.L64:
 1103              		.align	2
 1104              	.L63:
 1105 0034 00000000 		.word	.LANCHOR1
 1106 0038 00000000 		.word	TICKS
 1107 003c 00000000 		.word	.LANCHOR5
 1108              		.cfi_endproc
 1109              	.LFE115:
 1111              		.global	uwBootDelay
 1112              		.comm	uwBaudelay,4,4
 1113              		.global	irqCount
 1114              		.global	FLAG_UartDB_HasData
 1115              		.global	FLAG_UartZD_HasData
 1116              		.comm	stCollData,1532,4
 1117              		.comm	gSystickAccuracy,4,4
 1118              		.section	.bss.FLAG_UartDB_HasData,"aw",%nobits
 1119              		.set	.LANCHOR4,. + 0
 1122              	FLAG_UartDB_HasData:
 1123 0000 00       		.space	1
 1124              		.section	.bss.last_tick.7489,"aw",%nobits
 1125              		.align	2
 1126              		.set	.LANCHOR0,. + 0
 1129              	last_tick.7489:
 1130 0000 00000000 		.space	4
 1131              		.section	.data.irqCount,"aw",%progbits
 1132              		.align	2
 1133              		.set	.LANCHOR1,. + 0
 1136              	irqCount:
 1137 0000 64000000 		.word	100
 1138              		.section	.data.uwBootDelay,"aw",%progbits
 1139              		.align	2
 1140              		.set	.LANCHOR2,. + 0
 1143              	uwBootDelay:
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 31


 1144 0000 80841E00 		.word	2000000
 1145              		.section	.data.LAST_TICK.7476,"aw",%progbits
 1146              		.align	2
 1147              		.set	.LANCHOR5,. + 0
 1150              	LAST_TICK.7476:
 1151 0000 FFFFFFFF 		.word	-1
 1152              		.section	.bss.FLAG_UartZD_HasData,"aw",%nobits
 1153              		.set	.LANCHOR3,. + 0
 1156              	FLAG_UartZD_HasData:
 1157 0000 00       		.space	1
 1158              		.text
 1159              	.Letext0:
 1160              		.file 2 "d:\\gcc-arm-none-eabi-5_4-2016q3-20160926-win32\\arm-none-eabi\\include\\machine\\_defaul
 1161              		.file 3 "d:\\gcc-arm-none-eabi-5_4-2016q3-20160926-win32\\arm-none-eabi\\include\\sys\\_stdint.h"
 1162              		.file 4 "../cmsis/include/stm32f37x.h"
 1163              		.file 5 "../stdperiph/include/stm32f37x_gpio.h"
 1164              		.file 6 "../user/include/BaseDef.h"
 1165              		.file 7 "../user/include/Uart.h"
 1166              		.file 8 "../user/include/DLT645.h"
 1167              		.file 9 "../user/include/DLT698_45.h"
 1168              		.file 10 "../user/include/DLT698.h"
 1169              		.file 11 "../user/include/protocol.h"
 1170              		.file 12 "../cmsis/include/core_cm4.h"
 1171              		.file 13 "../user/include/Time.h"
 1172              		.file 14 "../user/include/GPIO.h"
 1173              		.file 15 "../stdperiph/include/stm32f37x_exti.h"
 1174              		.file 16 "../stdperiph/include/stm32f37x_misc.h"
 1175              		.file 17 "../user/include/Flash.h"
 1176              		.file 18 "../stdperiph/include/stm32f37x_usart.h"
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 32


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:22     .text.RsvFrameHandle:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:26     .text.RsvFrameHandle:00000000 RsvFrameHandle
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:106    .text.RsvFrameHandle:0000005c $d
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:115    .text.VoltageTimeOutHandle:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:119    .text.VoltageTimeOutHandle:00000000 VoltageTimeOutHandle
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:190    .text.VoltageTimeOutHandle:00000054 $d
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:199    .text.vLedRun:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:203    .text.vLedRun:00000000 vLedRun
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:253    .text.vLedRun:00000040 $d
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:260    .text.uwFindBaudRate:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:265    .text.uwFindBaudRate:00000000 uwFindBaudRate
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:321    .text.vAutoSetBaudrate:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:325    .text.vAutoSetBaudrate:00000000 vAutoSetBaudrate
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:422    .text.vAutoSetBaudrate:00000080 $d
                            *COM*:00000004 uwBaudelay
                            *COM*:00000004 gSystickAccuracy
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:433    .text.main:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:438    .text.main:00000000 main
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:893    .text.main:000002a0 $d
                            *COM*:000005fc stCollData
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:911    .text.main:000002e0 $t
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:1037   .text.main:000003a0 $d
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:1049   .text.vUartZD_BaudelayCal:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:1054   .text.vUartZD_BaudelayCal:00000000 vUartZD_BaudelayCal
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:1105   .text.vUartZD_BaudelayCal:00000034 $d
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:1143   .data.uwBootDelay:00000000 uwBootDelay
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:1136   .data.irqCount:00000000 irqCount
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:1122   .bss.FLAG_UartDB_HasData:00000000 FLAG_UartDB_HasData
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:1156   .bss.FLAG_UartZD_HasData:00000000 FLAG_UartZD_HasData
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:1123   .bss.FLAG_UartDB_HasData:00000000 $d
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:1125   .bss.last_tick.7489:00000000 $d
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:1129   .bss.last_tick.7489:00000000 last_tick.7489
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:1132   .data.irqCount:00000000 $d
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:1139   .data.uwBootDelay:00000000 $d
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:1146   .data.LAST_TICK.7476:00000000 $d
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:1150   .data.LAST_TICK.7476:00000000 LAST_TICK.7476
C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s:1157   .bss.FLAG_UartZD_HasData:00000000 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
blRecvFrame
ucDrv_Buf_PutBytes
blDrv_Buf_IsEmpty
Uart_DataPut
pUartZD
Voltage_Frame_Status
blFramesCounterStatus
pUartDB
uc645DataDomainLength
blTime2_Update
blVoltage_Create
uwTime2FramesCounter
ucApp_Buf_ZD2DB
GPIO_ReadOutputDataBit
GPIO_WriteBit
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccTKeaTc.s 			page 33


TICKS
vSystickSetAccuracy
vSystickIntCmd
vExti_Init
vFeedExtWatchDog
EXTI_DeInit
vUart_EnableBaudrate
Uart_IdleRead
vBuf_Clear
NVIC_PriorityGroupConfig
vInterFlash_Init
vGPIO_Init
vTimer_Init
vLed_Light
Voltage_Change_Init
vCurrent_Limit_DefaultSet
vEnergy_Modify_Init
Uart_idleReadEnable
Uart_idleReadDisable
dwUartCopy
GetProtocolType
Uart_Read
pGetpFrame
Uart_OnceWrite
dwGet698Apdu
dwAPduAnalyze
v698VoltageModify
dwReCalculateFCS
ucApp_Buf_DB2ZD
Voltage_Change_State
vDBDataID_Handle
vINFRDataID_Handle
USART_ITConfig
pUartIR
ucApp_Buf_INFR
