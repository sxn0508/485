ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 1
   4              		.eabi_attribute 28, 1
   5              		.fpu fpv4-sp-d16
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.thumb
  16              		.syntax unified
  17              		.file	"Uart.c"
  18              		.text
  19              	.Ltext0:
  20              		.cfi_sections	.debug_frame
  21              		.section	.text.vIRQ_UART_Config,"ax",%progbits
  22              		.align	2
  23              		.thumb
  24              		.thumb_func
  26              	vIRQ_UART_Config:
  27              	.LFB112:
  28              		.file 1 "../user/source/Uart.c"
   1:../user/source/Uart.c **** /*********************************************************************** 
   2:../user/source/Uart.c **** * Copyright (c) 2012,»ý³Éµç×Ó¹É·ÝÓÐÏÞ¹«Ë¾ All rights reserved.
   3:../user/source/Uart.c **** *
   4:../user/source/Uart.c **** * ÎÄ¼þÃû³Æ£º UART.c
   5:../user/source/Uart.c **** * Ãè    Êö£º ´®¿ÚÍ¨ÐÅ´úÂëÎÄ¼þ
   6:../user/source/Uart.c **** * 
   7:../user/source/Uart.c **** * ÐÞ¸Ä¼ÇÂ¼£º
   8:../user/source/Uart.c **** *
   9:../user/source/Uart.c **** * V1.0£¬2016.06.19£¬
  10:../user/source/Uart.c **** ***********************************************************************/
  11:../user/source/Uart.c **** 
  12:../user/source/Uart.c **** #include "Uart.h"
  13:../user/source/Uart.c **** #include "stm32f37x_it.h"
  14:../user/source/Uart.c **** 
  15:../user/source/Uart.c **** static void vIRQ_UART_Config(void); //´®¿ÚÖÐ¶Ï³õÊ¼»¯
  16:../user/source/Uart.c **** /********************************************************************
  17:../user/source/Uart.c **** * ¹¦    ÄÜ£º´®¿Ú³õÊ¼»¯º¯Êý
  18:../user/source/Uart.c **** * Êä    Èë£ºNone
  19:../user/source/Uart.c **** * Êä    ³ö£ºNone
  20:../user/source/Uart.c **** *           
  21:../user/source/Uart.c **** * ±à Ð´ ÈË£º
  22:../user/source/Uart.c **** * ±àÐ´ÈÕÆÚ£º2016.6.23
  23:../user/source/Uart.c **** **********************************************************************/
  24:../user/source/Uart.c **** void vUart_Init(void)
  25:../user/source/Uart.c **** {
  26:../user/source/Uart.c ****     USART_InitTypeDef USART_Initstruc;
  27:../user/source/Uart.c ****     /*USART1ÅäÖÃ*/
  28:../user/source/Uart.c ****     RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART1, ENABLE);
  29:../user/source/Uart.c ****     USART_OverSampling8Cmd(USART1, ENABLE);
  30:../user/source/Uart.c ****     USART_Initstruc.USART_BaudRate = 2400;
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 2


  31:../user/source/Uart.c ****     USART_Initstruc.USART_Mode = (USART_Mode_Rx | USART_Mode_Tx);
  32:../user/source/Uart.c ****     USART_Initstruc.USART_WordLength = USART_WordLength_9b;
  33:../user/source/Uart.c ****     USART_Initstruc.USART_Parity = USART_Parity_Even;
  34:../user/source/Uart.c ****     USART_Initstruc.USART_StopBits = USART_StopBits_1;
  35:../user/source/Uart.c ****     USART_Initstruc.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
  36:../user/source/Uart.c ****     USART_Init(USART1, &USART_Initstruc);
  37:../user/source/Uart.c ****     /*USART3ÅäÖÃ*/
  38:../user/source/Uart.c ****     RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART3, ENABLE);
  39:../user/source/Uart.c ****     USART_OverSampling8Cmd(USART3, ENABLE);
  40:../user/source/Uart.c ****     USART_Initstruc.USART_BaudRate = 2400;
  41:../user/source/Uart.c ****     USART_Initstruc.USART_Mode = (USART_Mode_Rx | USART_Mode_Tx);
  42:../user/source/Uart.c ****     USART_Initstruc.USART_WordLength = USART_WordLength_9b;
  43:../user/source/Uart.c ****     USART_Initstruc.USART_Parity = USART_Parity_Even;
  44:../user/source/Uart.c ****     USART_Initstruc.USART_StopBits = USART_StopBits_1;
  45:../user/source/Uart.c ****     USART_Initstruc.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
  46:../user/source/Uart.c ****     USART_Init(USART3, &USART_Initstruc);
  47:../user/source/Uart.c ****     /*USART2ÅäÖÃÎª±ê×¼´®¿Ú*/
  48:../user/source/Uart.c ****     RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART2, ENABLE);
  49:../user/source/Uart.c ****     USART_OverSampling8Cmd(USART2, ENABLE);
  50:../user/source/Uart.c ****     USART_Initstruc.USART_BaudRate = 1200;
  51:../user/source/Uart.c ****     USART_Initstruc.USART_WordLength = USART_WordLength_9b;
  52:../user/source/Uart.c ****     USART_Initstruc.USART_StopBits = USART_StopBits_1;
  53:../user/source/Uart.c ****     USART_Initstruc.USART_Parity = USART_Parity_Even;
  54:../user/source/Uart.c ****     USART_Initstruc.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
  55:../user/source/Uart.c ****     USART_Initstruc.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;
  56:../user/source/Uart.c ****     USART_Init(USART2, &USART_Initstruc);
  57:../user/source/Uart.c ****     vIRQ_UART_Config(); //ÖÐ¶ÏÅäÖÃ,Ê¹ÄÜ
  58:../user/source/Uart.c ****     USART_ITConfig(USART1, USART_IT_RXNE, ENABLE);
  59:../user/source/Uart.c ****     USART_ITConfig(USART3, USART_IT_RXNE, ENABLE);
  60:../user/source/Uart.c ****     USART_ITConfig(USART2, USART_IT_RXNE, ENABLE);
  61:../user/source/Uart.c ****     USART_Cmd(USART1, ENABLE);
  62:../user/source/Uart.c ****     USART_Cmd(USART3, ENABLE);
  63:../user/source/Uart.c ****     USART_Cmd(USART2, ENABLE);
  64:../user/source/Uart.c **** }
  65:../user/source/Uart.c **** /********************************************************************
  66:../user/source/Uart.c ****   * @brief ´®¿ÚÖÐ¶Ï³õÊ¼»¯º¯Êý
  67:../user/source/Uart.c ****   * @param  None
  68:../user/source/Uart.c ****   * @retval None
  69:../user/source/Uart.c ****   *******************************************************************/
  70:../user/source/Uart.c **** void vIRQ_UART_Config(void)
  71:../user/source/Uart.c **** {
  29              		.loc 1 71 0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 8
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33 0000 00B5     		push	{lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 4
  36              		.cfi_offset 14, -4
  37 0002 83B0     		sub	sp, sp, #12
  38              	.LCFI1:
  39              		.cfi_def_cfa_offset 16
  72:../user/source/Uart.c ****     /*¶¨ÒåÖÐ¶Ï½á¹¹Ìå*/
  73:../user/source/Uart.c ****     NVIC_InitTypeDef NVIC_Initstruc;
  74:../user/source/Uart.c ****     /*ÅäÖÃ´®¿Ú1ÖÐ¶Ï*/
  75:../user/source/Uart.c ****     NVIC_Initstruc.NVIC_IRQChannel = USART1_IRQn;
  40              		.loc 1 75 0
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 3


  41 0004 2523     		movs	r3, #37
  42 0006 8DF80430 		strb	r3, [sp, #4]
  76:../user/source/Uart.c ****     NVIC_Initstruc.NVIC_IRQChannelPreemptionPriority = 1;
  43              		.loc 1 76 0
  44 000a 0123     		movs	r3, #1
  45 000c 8DF80530 		strb	r3, [sp, #5]
  77:../user/source/Uart.c ****     NVIC_Initstruc.NVIC_IRQChannelSubPriority = 1;
  46              		.loc 1 77 0
  47 0010 8DF80630 		strb	r3, [sp, #6]
  78:../user/source/Uart.c ****     NVIC_Initstruc.NVIC_IRQChannelCmd = ENABLE;
  48              		.loc 1 78 0
  49 0014 8DF80730 		strb	r3, [sp, #7]
  79:../user/source/Uart.c ****     NVIC_Init(&NVIC_Initstruc);
  50              		.loc 1 79 0
  51 0018 01A8     		add	r0, sp, #4
  52 001a FFF7FEFF 		bl	NVIC_Init
  53              	.LVL0:
  80:../user/source/Uart.c ****     /*ÅäÖÃ´®¿Ú3ÖÐ¶Ï*/
  81:../user/source/Uart.c ****     NVIC_Initstruc.NVIC_IRQChannel = USART3_IRQn;
  54              		.loc 1 81 0
  55 001e 2723     		movs	r3, #39
  56 0020 8DF80430 		strb	r3, [sp, #4]
  82:../user/source/Uart.c ****     NVIC_Initstruc.NVIC_IRQChannelSubPriority = 0;
  57              		.loc 1 82 0
  58 0024 0023     		movs	r3, #0
  59 0026 8DF80630 		strb	r3, [sp, #6]
  83:../user/source/Uart.c ****     NVIC_Init(&NVIC_Initstruc);
  60              		.loc 1 83 0
  61 002a 01A8     		add	r0, sp, #4
  62 002c FFF7FEFF 		bl	NVIC_Init
  63              	.LVL1:
  84:../user/source/Uart.c ****     /*ÅäÖÃ´®¿Ú2ÖÐ¶Ï*/
  85:../user/source/Uart.c ****     NVIC_Initstruc.NVIC_IRQChannel = USART2_IRQn;
  64              		.loc 1 85 0
  65 0030 2623     		movs	r3, #38
  66 0032 8DF80430 		strb	r3, [sp, #4]
  86:../user/source/Uart.c ****     NVIC_Initstruc.NVIC_IRQChannelSubPriority = 2;
  67              		.loc 1 86 0
  68 0036 0223     		movs	r3, #2
  69 0038 8DF80630 		strb	r3, [sp, #6]
  87:../user/source/Uart.c ****     NVIC_Init(&NVIC_Initstruc);
  70              		.loc 1 87 0
  71 003c 01A8     		add	r0, sp, #4
  72 003e FFF7FEFF 		bl	NVIC_Init
  73              	.LVL2:
  88:../user/source/Uart.c **** }
  74              		.loc 1 88 0
  75 0042 03B0     		add	sp, sp, #12
  76              	.LCFI2:
  77              		.cfi_def_cfa_offset 4
  78              		@ sp needed
  79 0044 5DF804FB 		ldr	pc, [sp], #4
  80              		.cfi_endproc
  81              	.LFE112:
  83              		.section	.text.vUart_Init,"ax",%progbits
  84              		.align	2
  85              		.global	vUart_Init
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 4


  86              		.thumb
  87              		.thumb_func
  89              	vUart_Init:
  90              	.LFB111:
  25:../user/source/Uart.c ****     USART_InitTypeDef USART_Initstruc;
  91              		.loc 1 25 0
  92              		.cfi_startproc
  93              		@ args = 0, pretend = 0, frame = 24
  94              		@ frame_needed = 0, uses_anonymous_args = 0
  95 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
  96              	.LCFI3:
  97              		.cfi_def_cfa_offset 32
  98              		.cfi_offset 4, -32
  99              		.cfi_offset 5, -28
 100              		.cfi_offset 6, -24
 101              		.cfi_offset 7, -20
 102              		.cfi_offset 8, -16
 103              		.cfi_offset 9, -12
 104              		.cfi_offset 10, -8
 105              		.cfi_offset 14, -4
 106 0004 86B0     		sub	sp, sp, #24
 107              	.LCFI4:
 108              		.cfi_def_cfa_offset 56
  28:../user/source/Uart.c ****     USART_OverSampling8Cmd(USART1, ENABLE);
 109              		.loc 1 28 0
 110 0006 0121     		movs	r1, #1
 111 0008 4FF48040 		mov	r0, #16384
 112 000c FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
 113              	.LVL3:
  29:../user/source/Uart.c ****     USART_Initstruc.USART_BaudRate = 2400;
 114              		.loc 1 29 0
 115 0010 354F     		ldr	r7, .L5
 116 0012 0121     		movs	r1, #1
 117 0014 3846     		mov	r0, r7
 118 0016 FFF7FEFF 		bl	USART_OverSampling8Cmd
 119              	.LVL4:
  30:../user/source/Uart.c ****     USART_Initstruc.USART_Mode = (USART_Mode_Rx | USART_Mode_Tx);
 120              		.loc 1 30 0
 121 001a 4FF41665 		mov	r5, #2400
 122 001e 0095     		str	r5, [sp]
  31:../user/source/Uart.c ****     USART_Initstruc.USART_WordLength = USART_WordLength_9b;
 123              		.loc 1 31 0
 124 0020 4FF00C08 		mov	r8, #12
 125 0024 CDF81080 		str	r8, [sp, #16]
  32:../user/source/Uart.c ****     USART_Initstruc.USART_Parity = USART_Parity_Even;
 126              		.loc 1 32 0
 127 0028 4FF4805A 		mov	r10, #4096
 128 002c CDF804A0 		str	r10, [sp, #4]
  33:../user/source/Uart.c ****     USART_Initstruc.USART_StopBits = USART_StopBits_1;
 129              		.loc 1 33 0
 130 0030 4FF48069 		mov	r9, #1024
 131 0034 CDF80C90 		str	r9, [sp, #12]
  34:../user/source/Uart.c ****     USART_Initstruc.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
 132              		.loc 1 34 0
 133 0038 0024     		movs	r4, #0
 134 003a 0294     		str	r4, [sp, #8]
  35:../user/source/Uart.c ****     USART_Init(USART1, &USART_Initstruc);
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 5


 135              		.loc 1 35 0
 136 003c 0594     		str	r4, [sp, #20]
  36:../user/source/Uart.c ****     /*USART3ÅäÖÃ*/
 137              		.loc 1 36 0
 138 003e 6946     		mov	r1, sp
 139 0040 3846     		mov	r0, r7
 140 0042 FFF7FEFF 		bl	USART_Init
 141              	.LVL5:
  38:../user/source/Uart.c ****     USART_OverSampling8Cmd(USART3, ENABLE);
 142              		.loc 1 38 0
 143 0046 0121     		movs	r1, #1
 144 0048 4FF48020 		mov	r0, #262144
 145 004c FFF7FEFF 		bl	RCC_APB1PeriphClockCmd
 146              	.LVL6:
  39:../user/source/Uart.c ****     USART_Initstruc.USART_BaudRate = 2400;
 147              		.loc 1 39 0
 148 0050 264E     		ldr	r6, .L5+4
 149 0052 0121     		movs	r1, #1
 150 0054 3046     		mov	r0, r6
 151 0056 FFF7FEFF 		bl	USART_OverSampling8Cmd
 152              	.LVL7:
  40:../user/source/Uart.c ****     USART_Initstruc.USART_Mode = (USART_Mode_Rx | USART_Mode_Tx);
 153              		.loc 1 40 0
 154 005a 0095     		str	r5, [sp]
  41:../user/source/Uart.c ****     USART_Initstruc.USART_WordLength = USART_WordLength_9b;
 155              		.loc 1 41 0
 156 005c CDF81080 		str	r8, [sp, #16]
  42:../user/source/Uart.c ****     USART_Initstruc.USART_Parity = USART_Parity_Even;
 157              		.loc 1 42 0
 158 0060 CDF804A0 		str	r10, [sp, #4]
  43:../user/source/Uart.c ****     USART_Initstruc.USART_StopBits = USART_StopBits_1;
 159              		.loc 1 43 0
 160 0064 CDF80C90 		str	r9, [sp, #12]
  44:../user/source/Uart.c ****     USART_Initstruc.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
 161              		.loc 1 44 0
 162 0068 0294     		str	r4, [sp, #8]
  45:../user/source/Uart.c ****     USART_Init(USART3, &USART_Initstruc);
 163              		.loc 1 45 0
 164 006a 0594     		str	r4, [sp, #20]
  46:../user/source/Uart.c ****     /*USART2ÅäÖÃÎª±ê×¼´®¿Ú*/
 165              		.loc 1 46 0
 166 006c 6946     		mov	r1, sp
 167 006e 3046     		mov	r0, r6
 168 0070 FFF7FEFF 		bl	USART_Init
 169              	.LVL8:
  48:../user/source/Uart.c ****     USART_OverSampling8Cmd(USART2, ENABLE);
 170              		.loc 1 48 0
 171 0074 0121     		movs	r1, #1
 172 0076 4FF40030 		mov	r0, #131072
 173 007a FFF7FEFF 		bl	RCC_APB1PeriphClockCmd
 174              	.LVL9:
  49:../user/source/Uart.c ****     USART_Initstruc.USART_BaudRate = 1200;
 175              		.loc 1 49 0
 176 007e 1C4D     		ldr	r5, .L5+8
 177 0080 0121     		movs	r1, #1
 178 0082 2846     		mov	r0, r5
 179 0084 FFF7FEFF 		bl	USART_OverSampling8Cmd
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 6


 180              	.LVL10:
  50:../user/source/Uart.c ****     USART_Initstruc.USART_WordLength = USART_WordLength_9b;
 181              		.loc 1 50 0
 182 0088 4FF49663 		mov	r3, #1200
 183 008c 0093     		str	r3, [sp]
  51:../user/source/Uart.c ****     USART_Initstruc.USART_StopBits = USART_StopBits_1;
 184              		.loc 1 51 0
 185 008e CDF804A0 		str	r10, [sp, #4]
  52:../user/source/Uart.c ****     USART_Initstruc.USART_Parity = USART_Parity_Even;
 186              		.loc 1 52 0
 187 0092 0294     		str	r4, [sp, #8]
  53:../user/source/Uart.c ****     USART_Initstruc.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
 188              		.loc 1 53 0
 189 0094 CDF80C90 		str	r9, [sp, #12]
  54:../user/source/Uart.c ****     USART_Initstruc.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;
 190              		.loc 1 54 0
 191 0098 0594     		str	r4, [sp, #20]
  55:../user/source/Uart.c ****     USART_Init(USART2, &USART_Initstruc);
 192              		.loc 1 55 0
 193 009a CDF81080 		str	r8, [sp, #16]
  56:../user/source/Uart.c ****     vIRQ_UART_Config(); //ÖÐ¶ÏÅäÖÃ,Ê¹ÄÜ
 194              		.loc 1 56 0
 195 009e 6946     		mov	r1, sp
 196 00a0 2846     		mov	r0, r5
 197 00a2 FFF7FEFF 		bl	USART_Init
 198              	.LVL11:
  57:../user/source/Uart.c ****     USART_ITConfig(USART1, USART_IT_RXNE, ENABLE);
 199              		.loc 1 57 0
 200 00a6 FFF7FEFF 		bl	vIRQ_UART_Config
 201              	.LVL12:
  58:../user/source/Uart.c ****     USART_ITConfig(USART3, USART_IT_RXNE, ENABLE);
 202              		.loc 1 58 0
 203 00aa 124C     		ldr	r4, .L5+12
 204 00ac 0122     		movs	r2, #1
 205 00ae 2146     		mov	r1, r4
 206 00b0 3846     		mov	r0, r7
 207 00b2 FFF7FEFF 		bl	USART_ITConfig
 208              	.LVL13:
  59:../user/source/Uart.c ****     USART_ITConfig(USART2, USART_IT_RXNE, ENABLE);
 209              		.loc 1 59 0
 210 00b6 0122     		movs	r2, #1
 211 00b8 2146     		mov	r1, r4
 212 00ba 3046     		mov	r0, r6
 213 00bc FFF7FEFF 		bl	USART_ITConfig
 214              	.LVL14:
  60:../user/source/Uart.c ****     USART_Cmd(USART1, ENABLE);
 215              		.loc 1 60 0
 216 00c0 0122     		movs	r2, #1
 217 00c2 2146     		mov	r1, r4
 218 00c4 2846     		mov	r0, r5
 219 00c6 FFF7FEFF 		bl	USART_ITConfig
 220              	.LVL15:
  61:../user/source/Uart.c ****     USART_Cmd(USART3, ENABLE);
 221              		.loc 1 61 0
 222 00ca 0121     		movs	r1, #1
 223 00cc 3846     		mov	r0, r7
 224 00ce FFF7FEFF 		bl	USART_Cmd
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 7


 225              	.LVL16:
  62:../user/source/Uart.c ****     USART_Cmd(USART2, ENABLE);
 226              		.loc 1 62 0
 227 00d2 0121     		movs	r1, #1
 228 00d4 3046     		mov	r0, r6
 229 00d6 FFF7FEFF 		bl	USART_Cmd
 230              	.LVL17:
  63:../user/source/Uart.c **** }
 231              		.loc 1 63 0
 232 00da 0121     		movs	r1, #1
 233 00dc 2846     		mov	r0, r5
 234 00de FFF7FEFF 		bl	USART_Cmd
 235              	.LVL18:
  64:../user/source/Uart.c **** /********************************************************************
 236              		.loc 1 64 0
 237 00e2 06B0     		add	sp, sp, #24
 238              	.LCFI5:
 239              		.cfi_def_cfa_offset 32
 240              		@ sp needed
 241 00e4 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 242              	.L6:
 243              		.align	2
 244              	.L5:
 245 00e8 00380140 		.word	1073821696
 246 00ec 00480040 		.word	1073760256
 247 00f0 00440040 		.word	1073759232
 248 00f4 05010500 		.word	327941
 249              		.cfi_endproc
 250              	.LFE111:
 252              		.section	.text.blDrv_Buf_IsEmpty,"ax",%progbits
 253              		.align	2
 254              		.global	blDrv_Buf_IsEmpty
 255              		.thumb
 256              		.thumb_func
 258              	blDrv_Buf_IsEmpty:
 259              	.LFB113:
  89:../user/source/Uart.c **** /********************************************************************
  90:../user/source/Uart.c **** * ¹¦    ÄÜ£ºÅÐ¶ÏÇý¶¯²ã»º´æÊÇ·ñÎª¿Õ
  91:../user/source/Uart.c **** * Êä    Èë£ºÇý¶¯²ã»º´æ½á¹¹ÌåµØÖ·
  92:../user/source/Uart.c **** * Êä    ³ö£ºtrue/false
  93:../user/source/Uart.c **** *           
  94:../user/source/Uart.c **** * ±à Ð´ ÈË£º
  95:../user/source/Uart.c **** * ±àÐ´ÈÕÆÚ£º2016.6.28
  96:../user/source/Uart.c **** **********************************************************************/
  97:../user/source/Uart.c **** bool blDrv_Buf_IsEmpty(const struct ucbuf *ucdrv_buf)
  98:../user/source/Uart.c **** {
 260              		.loc 1 98 0
 261              		.cfi_startproc
 262              		@ args = 0, pretend = 0, frame = 0
 263              		@ frame_needed = 0, uses_anonymous_args = 0
 264              		@ link register save eliminated.
 265              	.LVL19:
  99:../user/source/Uart.c ****     if (ucdrv_buf->rd == ucdrv_buf->wr)
 266              		.loc 1 99 0
 267 0000 D0F8E823 		ldr	r2, [r0, #1000]
 268 0004 D0F8EC33 		ldr	r3, [r0, #1004]
 269 0008 9A42     		cmp	r2, r3
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 8


 270 000a 01D1     		bne	.L9
 100:../user/source/Uart.c ****         return true;
 271              		.loc 1 100 0
 272 000c 0120     		movs	r0, #1
 273              	.LVL20:
 274 000e 7047     		bx	lr
 275              	.LVL21:
 276              	.L9:
 101:../user/source/Uart.c ****     else
 102:../user/source/Uart.c ****         return false;
 277              		.loc 1 102 0
 278 0010 0020     		movs	r0, #0
 279              	.LVL22:
 103:../user/source/Uart.c **** }
 280              		.loc 1 103 0
 281 0012 7047     		bx	lr
 282              		.cfi_endproc
 283              	.LFE113:
 285              		.section	.text.blDrv_Buf_IsFull,"ax",%progbits
 286              		.align	2
 287              		.global	blDrv_Buf_IsFull
 288              		.thumb
 289              		.thumb_func
 291              	blDrv_Buf_IsFull:
 292              	.LFB114:
 104:../user/source/Uart.c **** /********************************************************************
 105:../user/source/Uart.c **** * ¹¦    ÄÜ£ºÅÐ¶ÏÇý¶¯²ã»º´æÊÇ·ñÂú
 106:../user/source/Uart.c **** * Êä    Èë£ºÇý¶¯²ã»º´æ½á¹¹ÌåµØÖ·
 107:../user/source/Uart.c **** * Êä    ³ö£ºtrue/false
 108:../user/source/Uart.c **** *           
 109:../user/source/Uart.c **** * ±à Ð´ ÈË£º
 110:../user/source/Uart.c **** * ±àÐ´ÈÕÆÚ£º2016.6.28
 111:../user/source/Uart.c **** **********************************************************************/
 112:../user/source/Uart.c **** bool blDrv_Buf_IsFull(const struct ucbuf *ucdrv_buf)
 113:../user/source/Uart.c **** {
 293              		.loc 1 113 0
 294              		.cfi_startproc
 295              		@ args = 0, pretend = 0, frame = 0
 296              		@ frame_needed = 0, uses_anonymous_args = 0
 297              		@ link register save eliminated.
 298              	.LVL23:
 114:../user/source/Uart.c ****     if (ucdrv_buf->rd == (ucdrv_buf->wr + 1) % DRV_BUF_SIZE)
 299              		.loc 1 114 0
 300 0000 D0F8E813 		ldr	r1, [r0, #1000]
 301 0004 D0F8EC23 		ldr	r2, [r0, #1004]
 302 0008 0132     		adds	r2, r2, #1
 303 000a 074B     		ldr	r3, .L13
 304 000c A3FB0203 		umull	r0, r3, r3, r2
 305              	.LVL24:
 306 0010 9B09     		lsrs	r3, r3, #6
 307 0012 4FF47A70 		mov	r0, #1000
 308 0016 00FB1323 		mls	r3, r0, r3, r2
 309 001a 9942     		cmp	r1, r3
 310 001c 01D1     		bne	.L12
 115:../user/source/Uart.c ****         return true;
 311              		.loc 1 115 0
 312 001e 0120     		movs	r0, #1
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 9


 313 0020 7047     		bx	lr
 314              	.L12:
 116:../user/source/Uart.c ****     else
 117:../user/source/Uart.c ****         return false;
 315              		.loc 1 117 0
 316 0022 0020     		movs	r0, #0
 118:../user/source/Uart.c **** }
 317              		.loc 1 118 0
 318 0024 7047     		bx	lr
 319              	.L14:
 320 0026 00BF     		.align	2
 321              	.L13:
 322 0028 D34D6210 		.word	274877907
 323              		.cfi_endproc
 324              	.LFE114:
 326              		.section	.text.Uart_DataPut,"ax",%progbits
 327              		.align	2
 328              		.global	Uart_DataPut
 329              		.thumb
 330              		.thumb_func
 332              	Uart_DataPut:
 333              	.LFB117:
 119:../user/source/Uart.c **** /********************************************************************
 120:../user/source/Uart.c **** * ¹¦    ÄÜ£º´ÓÇý¶¯»º´æ¶ÁÈ¡Ö¸¶¨ÊýÁ¿µÄ×Ö½Ú
 121:../user/source/Uart.c **** * Êä    Èë£ºÇý¶¯»º´æ½á¹¹ÌåµØÖ·£¬Êý¾Ý»º´æ½á¹¹ÌåµØÖ·£¬¶ÁÈ¡×Ö½ÚÊý
 122:../user/source/Uart.c **** * Êä    ³ö£ºtrue/false
 123:../user/source/Uart.c **** *          
 124:../user/source/Uart.c **** * ±à Ð´ ÈË£ºÍõ¾ýÁú
 125:../user/source/Uart.c **** * ±àÐ´ÈÕÆÚ£º2016.6.28
 126:../user/source/Uart.c **** **********************************************************************/
 127:../user/source/Uart.c **** bool ucDrv_Buf_GetBytes(struct ucbuf *ucdrv_buf, uint8_t *ucdata_buf, uint16_t length)
 128:../user/source/Uart.c **** {
 129:../user/source/Uart.c ****     uint16_t i;
 130:../user/source/Uart.c ****     if (uwBuf_UnReadLen(ucdrv_buf) >= length)
 131:../user/source/Uart.c ****     {
 132:../user/source/Uart.c ****         for (i = 0; i < length; i++)
 133:../user/source/Uart.c ****         {
 134:../user/source/Uart.c ****             *(ucdata_buf + i) = ucdrv_buf->data[ucdrv_buf->rd];
 135:../user/source/Uart.c ****             ucdrv_buf->rd = (ucdrv_buf->rd + 1) % DRV_BUF_SIZE;
 136:../user/source/Uart.c ****         }
 137:../user/source/Uart.c ****         return true;
 138:../user/source/Uart.c ****     }
 139:../user/source/Uart.c ****     else
 140:../user/source/Uart.c ****         return false;
 141:../user/source/Uart.c **** }
 142:../user/source/Uart.c **** /********************************************************************
 143:../user/source/Uart.c **** * ¹¦    ÄÜ£ºÏòÇý¶¯»º´æÐ´Ö¸¶¨ÊýÁ¿µÄ×Ö½Ú
 144:../user/source/Uart.c **** * Êä    Èë£ºÊý¾Ý»º´æ½á¹¹ÌåµØÖ·£¬Çý¶¯»º´æ½á¹¹ÌåµØÖ·£¬Ð´×Ö½ÚÊý
 145:../user/source/Uart.c **** * Êä    ³ö£ºtrue/false
 146:../user/source/Uart.c **** *          
 147:../user/source/Uart.c **** * ±à Ð´ ÈË£ºÍõ¾ýÁú
 148:../user/source/Uart.c **** * ±àÐ´ÈÕÆÚ£º2017.3.14
 149:../user/source/Uart.c **** **********************************************************************/
 150:../user/source/Uart.c **** bool ucDrv_Buf_PutBytes(uint8_t *ucdata_buf, struct ucbuf *ucdrv_buf, uint16_t length)
 151:../user/source/Uart.c **** {
 152:../user/source/Uart.c ****     uint16_t i;
 153:../user/source/Uart.c ****     if (DRV_BUF_SIZE >= uwBuf_UnReadLen(ucdrv_buf) + length)
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 10


 154:../user/source/Uart.c ****     {
 155:../user/source/Uart.c ****         for (i = 0; i < length; i++)
 156:../user/source/Uart.c ****         {
 157:../user/source/Uart.c ****             ucdrv_buf->data[ucdrv_buf->wr] = *(ucdata_buf + i);
 158:../user/source/Uart.c ****             ucdrv_buf->wr = (ucdrv_buf->wr + 1) % DRV_BUF_SIZE;
 159:../user/source/Uart.c ****         }
 160:../user/source/Uart.c ****         return true;
 161:../user/source/Uart.c ****     }
 162:../user/source/Uart.c ****     else
 163:../user/source/Uart.c ****         return false;
 164:../user/source/Uart.c **** }
 165:../user/source/Uart.c **** /********************************************************************
 166:../user/source/Uart.c **** * ¹¦    ÄÜ£º´®¿Ú·¢ËÍ£¨Ê¹ÓÃÖÐ¶Ï¹¦ÄÜ£©
 167:../user/source/Uart.c **** * Êä    Èë£ºUSART_X
 168:../user/source/Uart.c **** * Êä    ³ö£ºvoid
 169:../user/source/Uart.c **** *           
 170:../user/source/Uart.c **** * ±à Ð´ ÈË£º
 171:../user/source/Uart.c **** * ±àÐ´ÈÕÆÚ£º2016.6.28
 172:../user/source/Uart.c **** **********************************************************************/
 173:../user/source/Uart.c **** void Uart_DataPut(USART_TypeDef *USART_X)
 174:../user/source/Uart.c **** {
 334              		.loc 1 174 0
 335              		.cfi_startproc
 336              		@ args = 0, pretend = 0, frame = 0
 337              		@ frame_needed = 0, uses_anonymous_args = 0
 338              	.LVL25:
 339 0000 08B5     		push	{r3, lr}
 340              	.LCFI6:
 341              		.cfi_def_cfa_offset 8
 342              		.cfi_offset 3, -8
 343              		.cfi_offset 14, -4
 175:../user/source/Uart.c ****     USART_ITConfig(USART_X, USART_IT_TXE, ENABLE);
 344              		.loc 1 175 0
 345 0002 0122     		movs	r2, #1
 346 0004 0149     		ldr	r1, .L17
 347 0006 FFF7FEFF 		bl	USART_ITConfig
 348              	.LVL26:
 349 000a 08BD     		pop	{r3, pc}
 350              	.L18:
 351              		.align	2
 352              	.L17:
 353 000c 07010700 		.word	459015
 354              		.cfi_endproc
 355              	.LFE117:
 357              		.section	.text.Uart_idleReadEnable,"ax",%progbits
 358              		.align	2
 359              		.global	Uart_idleReadEnable
 360              		.thumb
 361              		.thumb_func
 363              	Uart_idleReadEnable:
 364              	.LFB123:
 176:../user/source/Uart.c **** }
 177:../user/source/Uart.c **** 
 178:../user/source/Uart.c **** #if 1
 179:../user/source/Uart.c **** /***************************************************************
 180:../user/source/Uart.c **** * º¯ÊýÃû³Æ: Uart_Write
 181:../user/source/Uart.c **** * ¹¦ÄÜÃèÊö: Ð´´®¿Ú£¬ÖÐ¶Ï·¢ËÍ£¬×î´ó·¢ËÍÊ±³¤delay
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 11


 182:../user/source/Uart.c **** * ÊäÈë²ÎÊý: uart£ºÏµÍ³´®¿Ú  buf:´æ´¢Î»ÖÃ   count£º·¢ËÍÊýÁ¿
 183:../user/source/Uart.c **** * Êä³ö²ÎÊý: ÎÞ
 184:../user/source/Uart.c **** * ·µ »Ø Öµ: > 0£ºÊµ¼Ê·¢ËÍµÄÊýÁ¿   -1£º·¢ËÍÊ§°Ü
 185:../user/source/Uart.c **** ****************************************************************/
 186:../user/source/Uart.c **** int32_t Uart_OnceWrite(UartDef *puart, const uint8_t *pbuf, uint32_t count, uint32_t ticks)
 187:../user/source/Uart.c **** {
 188:../user/source/Uart.c ****     uint32_t sendlen = 0;
 189:../user/source/Uart.c ****     uint16_t i;
 190:../user/source/Uart.c ****     //±£Ö¤count²»Îª0£¬¿ÉÖÁÉÙ¿ªÆôÒ»´Î·¢ËÍÖÐ¶Ï
 191:../user/source/Uart.c ****     if (!count || count > uwBuf_EmpLen(puart->pSndbuf))
 192:../user/source/Uart.c ****         return -1;
 193:../user/source/Uart.c ****     for (i = 0; i < count; i++)
 194:../user/source/Uart.c ****     {
 195:../user/source/Uart.c ****         puart->pSndbuf->data[puart->pSndbuf->wr] = *(pbuf + i);
 196:../user/source/Uart.c ****         puart->pSndbuf->wr = (++puart->pSndbuf->wr) % DRV_BUF_SIZE;
 197:../user/source/Uart.c ****     }
 198:../user/source/Uart.c ****     sendlen = puart->pSndbuf->rd;
 199:../user/source/Uart.c ****     //LL_USART_EnableIT_TXE(puart->handler);
 200:../user/source/Uart.c ****     USART_ITConfig(puart->handler, USART_IT_TXE, ENABLE);
 201:../user/source/Uart.c ****     while (ticks)
 202:../user/source/Uart.c ****     {
 203:../user/source/Uart.c ****         /*·¢ËÍÍê³É*/
 204:../user/source/Uart.c ****         if (!uwBuf_UnReadLen(puart->pSndbuf))
 205:../user/source/Uart.c ****             break;
 206:../user/source/Uart.c ****         if ((SysTick->CTRL & SysTick_CTRL_COUNTFLAG_Msk) != 0U)
 207:../user/source/Uart.c ****         {
 208:../user/source/Uart.c ****             ticks--;
 209:../user/source/Uart.c ****         }
 210:../user/source/Uart.c ****     }
 211:../user/source/Uart.c ****     /*¹æ¶¨Ê±¼äÄÚÎ´·¢ËÍÍê³É£¬Ò²Òª¹Ø±ÕÖÐ¶Ï*/
 212:../user/source/Uart.c ****     //LL_USART_DisableIT_TXE(puart->handler);
 213:../user/source/Uart.c ****     USART_ITConfig(puart->handler, USART_IT_TXE, DISABLE);
 214:../user/source/Uart.c ****     return (puart->pSndbuf->rd - sendlen + DRV_BUF_SIZE) % DRV_BUF_SIZE;
 215:../user/source/Uart.c **** }
 216:../user/source/Uart.c **** 
 217:../user/source/Uart.c **** /**********************************************
 218:../user/source/Uart.c ****     * º¯ÊýÃû³Æ: Uart_IdleRead
 219:../user/source/Uart.c ****     * ¹¦ÄÜÃèÊö: ¶Á´®¿Ú,×Ö½Ú¼ä¸ô´óÓÚidleMs£¬»òÕß¶ÁÈ¡ÊýÁ¿´ïµ½countÊ±½áÊø½ÓÊÕ
 220:../user/source/Uart.c ****     * ÊäÈë²ÎÊý: puart£º´®¿Ú½á¹¹ÌåÖ¸Õë  buf:´æ´¢Î»ÖÃ   count£º¶ÁÈ¡ÊýÁ¿  idle£º×Ö½Ú³¬Ê±Ê±¼äms£¬¿ÉÒÔÎª
 221:../user/source/Uart.c ****     * Êä³ö²ÎÊý: ÎÞ
 222:../user/source/Uart.c ****     * ·µ »Ø Öµ: > 0£ºÊµ¼Ê¶ÁÈ¡µÄÊýÁ¿   0£ºÎÞÊý¾Ý»òcount==0»ò´íÎó 
 223:../user/source/Uart.c ****     ****************************************************************/
 224:../user/source/Uart.c **** uint32_t Uart_IdleRead(UartDef *puart, uint8_t *buf, uint32_t count, uint32_t idleMs)
 225:../user/source/Uart.c **** {
 226:../user/source/Uart.c ****     volatile uint32_t readlen = 0;
 227:../user/source/Uart.c ****     volatile uint32_t readlenow = 0;
 228:../user/source/Uart.c ****     volatile idleMsCount;
 229:../user/source/Uart.c ****     uint16_t i;
 230:../user/source/Uart.c ****     /*¶ÁÈ¡ÊýÁ¿> 0£¬<»º´æ³¤¶È*/
 231:../user/source/Uart.c ****     if (!count || count > DRV_BUF_SIZE)
 232:../user/source/Uart.c ****     {
 233:../user/source/Uart.c ****         return 0;
 234:../user/source/Uart.c ****     }
 235:../user/source/Uart.c ****     /*±£Ö¤×îÐ¡ÑÓÊ±*/
 236:../user/source/Uart.c ****     if (idleMs < 0xFFFFFFFF)
 237:../user/source/Uart.c ****     {
 238:../user/source/Uart.c ****         idleMsCount = ++idleMs;
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 12


 239:../user/source/Uart.c ****     }
 240:../user/source/Uart.c ****     USART_ITConfig(puart->handler, USART_IT_RXNE, ENABLE);
 241:../user/source/Uart.c ****     readlenow = uwBuf_UnReadLen(puart->pRsvbuf);
 242:../user/source/Uart.c ****     while (readlenow < count && idleMsCount > 0)
 243:../user/source/Uart.c ****     {
 244:../user/source/Uart.c ****         /*idleMsCount¼ÆÊ±ÀÛ¼õ*/
 245:../user/source/Uart.c ****         if ((SysTick->CTRL & SysTick_CTRL_COUNTFLAG_Msk) != 0U)
 246:../user/source/Uart.c ****         {
 247:../user/source/Uart.c ****             idleMsCount--;
 248:../user/source/Uart.c ****         }
 249:../user/source/Uart.c ****         readlenow = uwBuf_UnReadLen(puart->pRsvbuf);
 250:../user/source/Uart.c ****         /*readlennow ÓÐ±ä»¯£¬idleMsCountÖØÔØ*/
 251:../user/source/Uart.c ****         if (readlenow > readlen)
 252:../user/source/Uart.c ****         {
 253:../user/source/Uart.c ****             idleMsCount = idleMs;
 254:../user/source/Uart.c ****             readlen = readlenow;
 255:../user/source/Uart.c ****         }
 256:../user/source/Uart.c ****     }
 257:../user/source/Uart.c ****     USART_ITConfig(puart->handler, USART_IT_RXNE, DISABLE);
 258:../user/source/Uart.c ****     if (readlen)
 259:../user/source/Uart.c ****     {
 260:../user/source/Uart.c ****         /*Êµ¼Ê¶Áµ½µÄ³¤¶È*/
 261:../user/source/Uart.c ****         readlen = (readlen < count ? readlen : count);
 262:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 263:../user/source/Uart.c ****         {
 264:../user/source/Uart.c ****             *(buf + i) = puart->pRsvbuf->data[puart->pRsvbuf->rd];
 265:../user/source/Uart.c ****             puart->pRsvbuf->rd = (++puart->pRsvbuf->rd) % DRV_BUF_SIZE;
 266:../user/source/Uart.c ****         }
 267:../user/source/Uart.c ****     }
 268:../user/source/Uart.c ****     return readlen;
 269:../user/source/Uart.c **** }
 270:../user/source/Uart.c **** 
 271:../user/source/Uart.c **** /**********************************************
 272:../user/source/Uart.c ****     * º¯ÊýÃû³Æ: Uart_OnceRead
 273:../user/source/Uart.c ****     * ¹¦ÄÜÃèÊö: ¶Á´®¿Ú,¶Áµ½Ö¸¶¨ÊýÁ¿»ò¶ÁÈ¡Ê±¼ä³¬Ê±ºóÍË³ö
 274:../user/source/Uart.c ****     * ÊäÈë²ÎÊý: puart£º´®¿Ú½á¹¹ÌåÖ¸Õë  buf:´æ´¢Î»ÖÃ   count£º¶ÁÈ¡ÊýÁ¿  delay£º×Ö½Ú³¬Ê±Ê±¼äms£¬¿ÉÒÔÎ
 275:../user/source/Uart.c ****     * Êä³ö²ÎÊý: ÎÞ
 276:../user/source/Uart.c ****     * ·µ »Ø Öµ: > 0£ºÊµ¼Ê¶ÁÈ¡µÄÊýÁ¿   0£ºÎÞÊý¾Ý»òcount==0»ò´íÎó 
 277:../user/source/Uart.c ****     ****************************************************************/
 278:../user/source/Uart.c **** uint32_t Uart_OnceRead(UartDef *puart, uint8_t *buf, uint32_t count, uint32_t delay)
 279:../user/source/Uart.c **** {
 280:../user/source/Uart.c ****     volatile uint32_t readlen = 0;
 281:../user/source/Uart.c ****     uint16_t i;
 282:../user/source/Uart.c ****     /*¶ÁÈ¡ÊýÁ¿> 0£¬<»º´æ³¤¶È*/
 283:../user/source/Uart.c ****     if (!count || count > DRV_BUF_SIZE)
 284:../user/source/Uart.c ****     {
 285:../user/source/Uart.c ****         return 0;
 286:../user/source/Uart.c ****     }
 287:../user/source/Uart.c ****     USART_ITConfig(puart->handler, USART_IT_RXNE, ENABLE);
 288:../user/source/Uart.c ****     readlen = uwBuf_UnReadLen(puart->pRsvbuf);
 289:../user/source/Uart.c ****     while (delay)
 290:../user/source/Uart.c ****     {
 291:../user/source/Uart.c ****         readlen = uwBuf_UnReadLen(puart->pRsvbuf);
 292:../user/source/Uart.c ****         /*¶àÓàµÄ×Ö½Ú±¾´Î¶ªÆú£¬²¢µ÷ÓÃBufClear·ÀÖ¹ºóÃæÔÙ¶ÁÈ¡*/
 293:../user/source/Uart.c ****         if (readlen >= count)
 294:../user/source/Uart.c ****             break;
 295:../user/source/Uart.c ****         if ((SysTick->CTRL & SysTick_CTRL_COUNTFLAG_Msk) != 0U)
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 13


 296:../user/source/Uart.c ****         {
 297:../user/source/Uart.c ****             delay--;
 298:../user/source/Uart.c ****         }
 299:../user/source/Uart.c ****     }
 300:../user/source/Uart.c ****     USART_ITConfig(puart->handler, USART_IT_RXNE, DISABLE);
 301:../user/source/Uart.c ****     if (readlen)
 302:../user/source/Uart.c ****     {
 303:../user/source/Uart.c ****         /*Êµ¼Ê¶Áµ½µÄ³¤¶È*/
 304:../user/source/Uart.c ****         readlen = (readlen < count ? readlen : count);
 305:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 306:../user/source/Uart.c ****         {
 307:../user/source/Uart.c ****             *(buf + i) = puart->pRsvbuf->data[puart->pRsvbuf->rd];
 308:../user/source/Uart.c ****             puart->pRsvbuf->rd = (++puart->pRsvbuf->rd) % DRV_BUF_SIZE;
 309:../user/source/Uart.c ****         }
 310:../user/source/Uart.c ****     }
 311:../user/source/Uart.c ****     return readlen;
 312:../user/source/Uart.c **** }
 313:../user/source/Uart.c **** 
 314:../user/source/Uart.c **** /***************************************************************
 315:../user/source/Uart.c **** * º¯ÊýÃû³Æ: Uart_Write
 316:../user/source/Uart.c **** * ¹¦ÄÜÃèÊö: Ð´´®¿Ú
 317:../user/source/Uart.c **** * ÊäÈë²ÎÊý: uart£ºÏµÍ³´®¿Ú  buf:´æ´¢Î»ÖÃ   count£º·¢ËÍÊýÁ¿
 318:../user/source/Uart.c **** * Êä³ö²ÎÊý: ÎÞ
 319:../user/source/Uart.c **** * ·µ »Ø Öµ: > 0£ºÊµ¼Ê·¢ËÍµÄÊýÁ¿   -1£º·¢ËÍÊ§°Ü
 320:../user/source/Uart.c **** ****************************************************************/
 321:../user/source/Uart.c **** 
 322:../user/source/Uart.c **** void Uart_Write(UartDef *puart, const uint8_t *pbuf, uint32_t count)
 323:../user/source/Uart.c **** {
 324:../user/source/Uart.c ****     uint32_t sendlen = 0;
 325:../user/source/Uart.c ****     uint16_t i;
 326:../user/source/Uart.c ****     //±£Ö¤count²»Îª0£¬¿ÉÖÁÉÙ¿ªÆôÒ»´Î·¢ËÍÖÐ¶Ï
 327:../user/source/Uart.c ****     if (!count || count > uwBuf_EmpLen(puart->pSndbuf))
 328:../user/source/Uart.c ****         return;
 329:../user/source/Uart.c ****     for (i = 0; i < count; i++)
 330:../user/source/Uart.c ****     {
 331:../user/source/Uart.c ****         puart->pSndbuf->data[puart->pSndbuf->wr] = *(pbuf + i);
 332:../user/source/Uart.c ****         puart->pSndbuf->wr = (++puart->pSndbuf->wr) % DRV_BUF_SIZE;
 333:../user/source/Uart.c ****     }
 334:../user/source/Uart.c ****     sendlen = puart->pSndbuf->rd;
 335:../user/source/Uart.c ****     USART_ITConfig(puart->handler, USART_IT_TXE, ENABLE);
 336:../user/source/Uart.c **** }
 337:../user/source/Uart.c **** 
 338:../user/source/Uart.c **** /**********************************************
 339:../user/source/Uart.c ****     * º¯ÊýÃû³Æ: Uart_Read
 340:../user/source/Uart.c ****     * ¹¦ÄÜÃèÊö: ¶Á´®¿Ú£¬Ö±½Ó´Ó»º´æ¶ÁÈ¡£¬»º´æ×Ô¶¯½ÓÊÕ
 341:../user/source/Uart.c ****     * ÊäÈë²ÎÊý: puart£º´®¿Ú½á¹¹ÌåÖ¸Õë  buf:´æ´¢Î»ÖÃ   count£º¶ÁÈ¡ÊýÁ¿
 342:../user/source/Uart.c ****     * Êä³ö²ÎÊý: ÎÞ
 343:../user/source/Uart.c ****     * ·µ »Ø Öµ: > 0£ºÊµ¼Ê¶ÁÈ¡µÄÊýÁ¿   0£ºÎÞÊý¾Ý»òcount==0»ò´íÎó 
 344:../user/source/Uart.c ****     ****************************************************************/
 345:../user/source/Uart.c **** uint32_t Uart_Read(UartDef *puart, uint8_t *buf, uint32_t count)
 346:../user/source/Uart.c **** {
 347:../user/source/Uart.c ****     volatile uint32_t readlen = 0;
 348:../user/source/Uart.c ****     uint16_t i;
 349:../user/source/Uart.c ****     if (!count || count > 0xFFFF)
 350:../user/source/Uart.c ****         return 0;
 351:../user/source/Uart.c ****     readlen = uwBuf_UnReadLen(puart->pRsvbuf);
 352:../user/source/Uart.c ****     if (readlen)
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 14


 353:../user/source/Uart.c ****     {
 354:../user/source/Uart.c ****         /*Êµ¼Ê¶Áµ½µÄ³¤¶È*/
 355:../user/source/Uart.c ****         readlen = (readlen < count ? readlen : count);
 356:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 357:../user/source/Uart.c ****         {
 358:../user/source/Uart.c ****             *(buf + i) = puart->pRsvbuf->data[puart->pRsvbuf->rd];
 359:../user/source/Uart.c ****             puart->pRsvbuf->rd = (++puart->pRsvbuf->rd) % DRV_BUF_SIZE;
 360:../user/source/Uart.c ****         }
 361:../user/source/Uart.c ****     }
 362:../user/source/Uart.c ****     return readlen;
 363:../user/source/Uart.c **** }
 364:../user/source/Uart.c **** /**********************************************
 365:../user/source/Uart.c **** * º¯ÊýÃû³Æ: Uart_ReadITEnable
 366:../user/source/Uart.c **** * ¹¦ÄÜÃèÊö: ´®¿ÚIdleÖÐ¶Ï·½Ê½Á¬Ðø½ÓÊÕÊÇ·ñÊ¹ÄÜ
 367:../user/source/Uart.c **** * ÊäÈë²ÎÊý: puart£º´®¿Ú½á¹¹ÌåÖ¸Õë cmd:EN/DEN 
 368:../user/source/Uart.c **** * Êä³ö²ÎÊý: 
 369:../user/source/Uart.c **** * ·µ »Ø Öµ: 
 370:../user/source/Uart.c **** ****************************************************************/
 371:../user/source/Uart.c **** void Uart_idleReadEnable(UartDef *puart)
 372:../user/source/Uart.c **** {
 365              		.loc 1 372 0
 366              		.cfi_startproc
 367              		@ args = 0, pretend = 0, frame = 0
 368              		@ frame_needed = 0, uses_anonymous_args = 0
 369              	.LVL27:
 370 0000 38B5     		push	{r3, r4, r5, lr}
 371              	.LCFI7:
 372              		.cfi_def_cfa_offset 16
 373              		.cfi_offset 3, -16
 374              		.cfi_offset 4, -12
 375              		.cfi_offset 5, -8
 376              		.cfi_offset 14, -4
 377 0002 0446     		mov	r4, r0
 373:../user/source/Uart.c ****     uint32_t regClear;
 374:../user/source/Uart.c ****     //USART_ITConfig(puart->handler, USART_IT_RXNE, ENABLE);
 375:../user/source/Uart.c ****     regClear = puart->handler->ISR;
 378              		.loc 1 375 0
 379 0004 0068     		ldr	r0, [r0]
 380              	.LVL28:
 381 0006 C369     		ldr	r3, [r0, #28]
 376:../user/source/Uart.c ****     USART_ClearITPendingBit(puart->handler, USART_IT_IDLE);
 382              		.loc 1 376 0
 383 0008 044D     		ldr	r5, .L21
 384 000a 2946     		mov	r1, r5
 385 000c FFF7FEFF 		bl	USART_ClearITPendingBit
 386              	.LVL29:
 377:../user/source/Uart.c ****     USART_ITConfig(puart->handler, USART_IT_IDLE, ENABLE);
 387              		.loc 1 377 0
 388 0010 0122     		movs	r2, #1
 389 0012 2946     		mov	r1, r5
 390 0014 2068     		ldr	r0, [r4]
 391 0016 FFF7FEFF 		bl	USART_ITConfig
 392              	.LVL30:
 393 001a 38BD     		pop	{r3, r4, r5, pc}
 394              	.LVL31:
 395              	.L22:
 396              		.align	2
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 15


 397              	.L21:
 398 001c 04010400 		.word	262404
 399              		.cfi_endproc
 400              	.LFE123:
 402              		.section	.text.Uart_idleReadDisable,"ax",%progbits
 403              		.align	2
 404              		.global	Uart_idleReadDisable
 405              		.thumb
 406              		.thumb_func
 408              	Uart_idleReadDisable:
 409              	.LFB124:
 378:../user/source/Uart.c **** }
 379:../user/source/Uart.c **** /**********************************************
 380:../user/source/Uart.c **** * º¯ÊýÃû³Æ: Uart_ReadITdisable
 381:../user/source/Uart.c **** * ¹¦ÄÜÃèÊö: ´®¿ÚIdleÖÐ¶Ï·½Ê½Á¬Ðø½ÓÊÕÊÇ·ñÊ¹ÄÜ
 382:../user/source/Uart.c **** * ÊäÈë²ÎÊý: puart£º´®¿Ú½á¹¹ÌåÖ¸Õë cmd:EN/DEN 
 383:../user/source/Uart.c **** * Êä³ö²ÎÊý: 
 384:../user/source/Uart.c **** * ·µ »Ø Öµ: 
 385:../user/source/Uart.c **** ****************************************************************/
 386:../user/source/Uart.c **** void Uart_idleReadDisable(UartDef *puart)
 387:../user/source/Uart.c **** {
 410              		.loc 1 387 0
 411              		.cfi_startproc
 412              		@ args = 0, pretend = 0, frame = 0
 413              		@ frame_needed = 0, uses_anonymous_args = 0
 414              	.LVL32:
 415 0000 38B5     		push	{r3, r4, r5, lr}
 416              	.LCFI8:
 417              		.cfi_def_cfa_offset 16
 418              		.cfi_offset 3, -16
 419              		.cfi_offset 4, -12
 420              		.cfi_offset 5, -8
 421              		.cfi_offset 14, -4
 422 0002 0446     		mov	r4, r0
 388:../user/source/Uart.c ****     uint32_t regClear;
 389:../user/source/Uart.c ****     //USART_ITConfig(puart->handler, USART_IT_RXNE, DISABLE);
 390:../user/source/Uart.c ****     USART_ITConfig(puart->handler, USART_IT_IDLE, DISABLE);
 423              		.loc 1 390 0
 424 0004 064D     		ldr	r5, .L25
 425 0006 0022     		movs	r2, #0
 426 0008 2946     		mov	r1, r5
 427 000a 0068     		ldr	r0, [r0]
 428              	.LVL33:
 429 000c FFF7FEFF 		bl	USART_ITConfig
 430              	.LVL34:
 391:../user/source/Uart.c ****     USART_ClearITPendingBit(puart->handler, USART_IT_IDLE);
 431              		.loc 1 391 0
 432 0010 2946     		mov	r1, r5
 433 0012 2068     		ldr	r0, [r4]
 434 0014 FFF7FEFF 		bl	USART_ClearITPendingBit
 435              	.LVL35:
 392:../user/source/Uart.c ****     regClear = puart->handler->ISR;
 436              		.loc 1 392 0
 437 0018 2368     		ldr	r3, [r4]
 438 001a DB69     		ldr	r3, [r3, #28]
 439 001c 38BD     		pop	{r3, r4, r5, pc}
 440              	.LVL36:
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 16


 441              	.L26:
 442 001e 00BF     		.align	2
 443              	.L25:
 444 0020 04010400 		.word	262404
 445              		.cfi_endproc
 446              	.LFE124:
 448              		.section	.text.uwBuf_EmpLen,"ax",%progbits
 449              		.align	2
 450              		.global	uwBuf_EmpLen
 451              		.thumb
 452              		.thumb_func
 454              	uwBuf_EmpLen:
 455              	.LFB125:
 393:../user/source/Uart.c **** }
 394:../user/source/Uart.c **** 
 395:../user/source/Uart.c **** /*******************************************************
 396:../user/source/Uart.c **** * ¹¦    ÄÜ£º²éÑ¯Çý¶¯²ã»º´æÊ£Óà¿Õ¼ä
 397:../user/source/Uart.c **** * Êä    Èë£ºÊý¾Ý»º´æ½á¹¹ÌåµØÖ·
 398:../user/source/Uart.c **** * Êä    ³ö£ºuint32_t
 399:../user/source/Uart.c **** *           
 400:../user/source/Uart.c **** * ±à Ð´ ÈË£º
 401:../user/source/Uart.c **** * ±àÐ´ÈÕÆÚ£º2018Äê9ÔÂ7ÈÕ11:04:55
 402:../user/source/Uart.c **** **********************************************************************/
 403:../user/source/Uart.c **** uint32_t uwBuf_EmpLen(const struct ucbuf *buf)
 404:../user/source/Uart.c **** {
 456              		.loc 1 404 0
 457              		.cfi_startproc
 458              		@ args = 0, pretend = 0, frame = 0
 459              		@ frame_needed = 0, uses_anonymous_args = 0
 460              		@ link register save eliminated.
 461              	.LVL37:
 405:../user/source/Uart.c ****     /*return ((buf->rd + BUF_SIZE - buf->wr) % BUF_SIZE -1);*/
 406:../user/source/Uart.c ****     return ((buf->rd + DRV_BUF_SIZE - buf->wr - 1) % DRV_BUF_SIZE);
 462              		.loc 1 406 0
 463 0000 D0F8E833 		ldr	r3, [r0, #1000]
 464 0004 D0F8EC03 		ldr	r0, [r0, #1004]
 465              	.LVL38:
 466 0008 1B1A     		subs	r3, r3, r0
 467 000a 03F2E733 		addw	r3, r3, #999
 468 000e 044A     		ldr	r2, .L28
 469 0010 A2FB0312 		umull	r1, r2, r2, r3
 470 0014 9209     		lsrs	r2, r2, #6
 407:../user/source/Uart.c **** }
 471              		.loc 1 407 0
 472 0016 4FF47A70 		mov	r0, #1000
 473 001a 00FB1230 		mls	r0, r0, r2, r3
 474 001e 7047     		bx	lr
 475              	.L29:
 476              		.align	2
 477              	.L28:
 478 0020 D34D6210 		.word	274877907
 479              		.cfi_endproc
 480              	.LFE125:
 482              		.section	.text.Uart_Write,"ax",%progbits
 483              		.align	2
 484              		.global	Uart_Write
 485              		.thumb
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 17


 486              		.thumb_func
 488              	Uart_Write:
 489              	.LFB121:
 323:../user/source/Uart.c ****     uint32_t sendlen = 0;
 490              		.loc 1 323 0
 491              		.cfi_startproc
 492              		@ args = 0, pretend = 0, frame = 0
 493              		@ frame_needed = 0, uses_anonymous_args = 0
 494              	.LVL39:
 327:../user/source/Uart.c ****         return;
 495              		.loc 1 327 0
 496 0000 3AB3     		cbz	r2, .L35
 323:../user/source/Uart.c ****     uint32_t sendlen = 0;
 497              		.loc 1 323 0 discriminator 1
 498 0002 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 499              	.LCFI9:
 500              		.cfi_def_cfa_offset 24
 501              		.cfi_offset 3, -24
 502              		.cfi_offset 4, -20
 503              		.cfi_offset 5, -16
 504              		.cfi_offset 6, -12
 505              		.cfi_offset 7, -8
 506              		.cfi_offset 14, -4
 507 0004 1646     		mov	r6, r2
 508 0006 0F46     		mov	r7, r1
 509 0008 0546     		mov	r5, r0
 327:../user/source/Uart.c ****         return;
 510              		.loc 1 327 0 discriminator 1
 511 000a 8068     		ldr	r0, [r0, #8]
 512              	.LVL40:
 513 000c FFF7FEFF 		bl	uwBuf_EmpLen
 514              	.LVL41:
 515 0010 8642     		cmp	r6, r0
 516 0012 1DD8     		bhi	.L30
 517 0014 0024     		movs	r4, #0
 518 0016 14E0     		b	.L32
 519              	.LVL42:
 520              	.L33:
 331:../user/source/Uart.c ****         puart->pSndbuf->wr = (++puart->pSndbuf->wr) % DRV_BUF_SIZE;
 521              		.loc 1 331 0 discriminator 3
 522 0018 AB68     		ldr	r3, [r5, #8]
 523 001a D3F8EC23 		ldr	r2, [r3, #1004]
 524 001e 395D     		ldrb	r1, [r7, r4]	@ zero_extendqisi2
 525 0020 9954     		strb	r1, [r3, r2]
 332:../user/source/Uart.c ****     }
 526              		.loc 1 332 0 discriminator 3
 527 0022 A968     		ldr	r1, [r5, #8]
 528 0024 D1F8EC23 		ldr	r2, [r1, #1004]
 529 0028 0132     		adds	r2, r2, #1
 530 002a 0A4B     		ldr	r3, .L36
 531 002c A3FB0203 		umull	r0, r3, r3, r2
 532 0030 9B09     		lsrs	r3, r3, #6
 533 0032 4FF47A70 		mov	r0, #1000
 534 0036 00FB1323 		mls	r3, r0, r3, r2
 535 003a C1F8EC33 		str	r3, [r1, #1004]
 329:../user/source/Uart.c ****     {
 536              		.loc 1 329 0 discriminator 3
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 18


 537 003e 0134     		adds	r4, r4, #1
 538              	.LVL43:
 539 0040 A4B2     		uxth	r4, r4
 540              	.LVL44:
 541              	.L32:
 329:../user/source/Uart.c ****     {
 542              		.loc 1 329 0 is_stmt 0 discriminator 1
 543 0042 A642     		cmp	r6, r4
 544 0044 E8D8     		bhi	.L33
 545              	.LVL45:
 335:../user/source/Uart.c **** }
 546              		.loc 1 335 0 is_stmt 1
 547 0046 0122     		movs	r2, #1
 548 0048 0349     		ldr	r1, .L36+4
 549 004a 2868     		ldr	r0, [r5]
 550 004c FFF7FEFF 		bl	USART_ITConfig
 551              	.LVL46:
 552              	.L30:
 553 0050 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 554              	.LVL47:
 555              	.L35:
 556              	.LCFI10:
 557              		.cfi_def_cfa_offset 0
 558              		.cfi_restore 3
 559              		.cfi_restore 4
 560              		.cfi_restore 5
 561              		.cfi_restore 6
 562              		.cfi_restore 7
 563              		.cfi_restore 14
 564 0052 7047     		bx	lr
 565              	.L37:
 566              		.align	2
 567              	.L36:
 568 0054 D34D6210 		.word	274877907
 569 0058 07010700 		.word	459015
 570              		.cfi_endproc
 571              	.LFE121:
 573              		.section	.text.uwBuf_UnReadLen,"ax",%progbits
 574              		.align	2
 575              		.global	uwBuf_UnReadLen
 576              		.thumb
 577              		.thumb_func
 579              	uwBuf_UnReadLen:
 580              	.LFB126:
 408:../user/source/Uart.c **** /********************************************************************
 409:../user/source/Uart.c **** * ¹¦    ÄÜ£º²éÑ¯»º´æÖÐÎ´¶ÁµÄ×Ö½ÚÊý
 410:../user/source/Uart.c **** * Êä    Èë£ºÊý¾Ý»º´æ½á¹¹ÌåµØÖ·
 411:../user/source/Uart.c **** * Êä    ³ö£ºuint32_t
 412:../user/source/Uart.c **** *          
 413:../user/source/Uart.c **** * ±à Ð´ ÈË£º
 414:../user/source/Uart.c **** * ±àÐ´ÈÕÆÚ£º2016.6.28
 415:../user/source/Uart.c **** **********************************************************************/
 416:../user/source/Uart.c **** uint32_t uwBuf_UnReadLen(const struct ucbuf *buf)
 417:../user/source/Uart.c **** {
 581              		.loc 1 417 0
 582              		.cfi_startproc
 583              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 19


 584              		@ frame_needed = 0, uses_anonymous_args = 0
 585              		@ link register save eliminated.
 586              	.LVL48:
 418:../user/source/Uart.c ****     return (buf->wr - buf->rd + DRV_BUF_SIZE) % DRV_BUF_SIZE;
 587              		.loc 1 418 0
 588 0000 D0F8EC33 		ldr	r3, [r0, #1004]
 589 0004 D0F8E803 		ldr	r0, [r0, #1000]
 590              	.LVL49:
 591 0008 1B1A     		subs	r3, r3, r0
 592 000a 03F57A73 		add	r3, r3, #1000
 593 000e 044A     		ldr	r2, .L39
 594 0010 A2FB0312 		umull	r1, r2, r2, r3
 595 0014 9209     		lsrs	r2, r2, #6
 419:../user/source/Uart.c **** }
 596              		.loc 1 419 0
 597 0016 4FF47A70 		mov	r0, #1000
 598 001a 00FB1230 		mls	r0, r0, r2, r3
 599 001e 7047     		bx	lr
 600              	.L40:
 601              		.align	2
 602              	.L39:
 603 0020 D34D6210 		.word	274877907
 604              		.cfi_endproc
 605              	.LFE126:
 607              		.section	.text.ucDrv_Buf_GetBytes,"ax",%progbits
 608              		.align	2
 609              		.global	ucDrv_Buf_GetBytes
 610              		.thumb
 611              		.thumb_func
 613              	ucDrv_Buf_GetBytes:
 614              	.LFB115:
 128:../user/source/Uart.c ****     uint16_t i;
 615              		.loc 1 128 0
 616              		.cfi_startproc
 617              		@ args = 0, pretend = 0, frame = 0
 618              		@ frame_needed = 0, uses_anonymous_args = 0
 619              	.LVL50:
 620 0000 70B5     		push	{r4, r5, r6, lr}
 621              	.LCFI11:
 622              		.cfi_def_cfa_offset 16
 623              		.cfi_offset 4, -16
 624              		.cfi_offset 5, -12
 625              		.cfi_offset 6, -8
 626              		.cfi_offset 14, -4
 627 0002 0446     		mov	r4, r0
 628 0004 0E46     		mov	r6, r1
 629 0006 1546     		mov	r5, r2
 130:../user/source/Uart.c ****     {
 630              		.loc 1 130 0
 631 0008 FFF7FEFF 		bl	uwBuf_UnReadLen
 632              	.LVL51:
 633 000c A842     		cmp	r0, r5
 634 000e 15D2     		bcs	.L45
 140:../user/source/Uart.c **** }
 635              		.loc 1 140 0
 636 0010 0020     		movs	r0, #0
 637 0012 70BD     		pop	{r4, r5, r6, pc}
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 20


 638              	.LVL52:
 639              	.L44:
 134:../user/source/Uart.c ****             ucdrv_buf->rd = (ucdrv_buf->rd + 1) % DRV_BUF_SIZE;
 640              		.loc 1 134 0 discriminator 3
 641 0014 D4F8E833 		ldr	r3, [r4, #1000]
 642 0018 E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 643 001a B354     		strb	r3, [r6, r2]
 135:../user/source/Uart.c ****         }
 644              		.loc 1 135 0 discriminator 3
 645 001c D4F8E813 		ldr	r1, [r4, #1000]
 646 0020 0131     		adds	r1, r1, #1
 647 0022 094B     		ldr	r3, .L47
 648 0024 A3FB0103 		umull	r0, r3, r3, r1
 649 0028 9B09     		lsrs	r3, r3, #6
 650 002a 4FF47A70 		mov	r0, #1000
 651 002e 00FB1313 		mls	r3, r0, r3, r1
 652 0032 C4F8E833 		str	r3, [r4, #1000]
 132:../user/source/Uart.c ****         {
 653              		.loc 1 132 0 discriminator 3
 654 0036 0132     		adds	r2, r2, #1
 655              	.LVL53:
 656 0038 92B2     		uxth	r2, r2
 657              	.LVL54:
 658 003a 00E0     		b	.L42
 659              	.LVL55:
 660              	.L45:
 661 003c 0022     		movs	r2, #0
 662              	.L42:
 663              	.LVL56:
 132:../user/source/Uart.c ****         {
 664              		.loc 1 132 0 is_stmt 0 discriminator 1
 665 003e AA42     		cmp	r2, r5
 666 0040 E8D3     		bcc	.L44
 137:../user/source/Uart.c ****     }
 667              		.loc 1 137 0 is_stmt 1
 668 0042 0120     		movs	r0, #1
 141:../user/source/Uart.c **** /********************************************************************
 669              		.loc 1 141 0
 670 0044 70BD     		pop	{r4, r5, r6, pc}
 671              	.LVL57:
 672              	.L48:
 673 0046 00BF     		.align	2
 674              	.L47:
 675 0048 D34D6210 		.word	274877907
 676              		.cfi_endproc
 677              	.LFE115:
 679              		.section	.text.ucDrv_Buf_PutBytes,"ax",%progbits
 680              		.align	2
 681              		.global	ucDrv_Buf_PutBytes
 682              		.thumb
 683              		.thumb_func
 685              	ucDrv_Buf_PutBytes:
 686              	.LFB116:
 151:../user/source/Uart.c ****     uint16_t i;
 687              		.loc 1 151 0
 688              		.cfi_startproc
 689              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 21


 690              		@ frame_needed = 0, uses_anonymous_args = 0
 691              	.LVL58:
 692 0000 70B5     		push	{r4, r5, r6, lr}
 693              	.LCFI12:
 694              		.cfi_def_cfa_offset 16
 695              		.cfi_offset 4, -16
 696              		.cfi_offset 5, -12
 697              		.cfi_offset 6, -8
 698              		.cfi_offset 14, -4
 699 0002 0646     		mov	r6, r0
 700 0004 0C46     		mov	r4, r1
 701 0006 1546     		mov	r5, r2
 153:../user/source/Uart.c ****     {
 702              		.loc 1 153 0
 703 0008 0846     		mov	r0, r1
 704              	.LVL59:
 705 000a FFF7FEFF 		bl	uwBuf_UnReadLen
 706              	.LVL60:
 707 000e 2844     		add	r0, r0, r5
 708 0010 B0F57A7F 		cmp	r0, #1000
 709 0014 13D9     		bls	.L53
 163:../user/source/Uart.c **** }
 710              		.loc 1 163 0
 711 0016 0020     		movs	r0, #0
 712 0018 70BD     		pop	{r4, r5, r6, pc}
 713              	.LVL61:
 714              	.L52:
 157:../user/source/Uart.c ****             ucdrv_buf->wr = (ucdrv_buf->wr + 1) % DRV_BUF_SIZE;
 715              		.loc 1 157 0 discriminator 3
 716 001a D4F8EC13 		ldr	r1, [r4, #1004]
 717 001e B35C     		ldrb	r3, [r6, r2]	@ zero_extendqisi2
 718 0020 6354     		strb	r3, [r4, r1]
 158:../user/source/Uart.c ****         }
 719              		.loc 1 158 0 discriminator 3
 720 0022 0131     		adds	r1, r1, #1
 721 0024 084B     		ldr	r3, .L55
 722 0026 A3FB0103 		umull	r0, r3, r3, r1
 723 002a 9B09     		lsrs	r3, r3, #6
 724 002c 4FF47A70 		mov	r0, #1000
 725 0030 00FB1313 		mls	r3, r0, r3, r1
 726 0034 C4F8EC33 		str	r3, [r4, #1004]
 155:../user/source/Uart.c ****         {
 727              		.loc 1 155 0 discriminator 3
 728 0038 0132     		adds	r2, r2, #1
 729              	.LVL62:
 730 003a 92B2     		uxth	r2, r2
 731              	.LVL63:
 732 003c 00E0     		b	.L50
 733              	.LVL64:
 734              	.L53:
 735 003e 0022     		movs	r2, #0
 736              	.L50:
 737              	.LVL65:
 155:../user/source/Uart.c ****         {
 738              		.loc 1 155 0 is_stmt 0 discriminator 1
 739 0040 AA42     		cmp	r2, r5
 740 0042 EAD3     		bcc	.L52
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 22


 160:../user/source/Uart.c ****     }
 741              		.loc 1 160 0 is_stmt 1
 742 0044 0120     		movs	r0, #1
 164:../user/source/Uart.c **** /********************************************************************
 743              		.loc 1 164 0
 744 0046 70BD     		pop	{r4, r5, r6, pc}
 745              	.LVL66:
 746              	.L56:
 747              		.align	2
 748              	.L55:
 749 0048 D34D6210 		.word	274877907
 750              		.cfi_endproc
 751              	.LFE116:
 753              		.section	.text.Uart_OnceWrite,"ax",%progbits
 754              		.align	2
 755              		.global	Uart_OnceWrite
 756              		.thumb
 757              		.thumb_func
 759              	Uart_OnceWrite:
 760              	.LFB118:
 187:../user/source/Uart.c ****     uint32_t sendlen = 0;
 761              		.loc 1 187 0
 762              		.cfi_startproc
 763              		@ args = 0, pretend = 0, frame = 0
 764              		@ frame_needed = 0, uses_anonymous_args = 0
 765              	.LVL67:
 191:../user/source/Uart.c ****         return -1;
 766              		.loc 1 191 0
 767 0000 002A     		cmp	r2, #0
 768 0002 4BD0     		beq	.L65
 187:../user/source/Uart.c ****     uint32_t sendlen = 0;
 769              		.loc 1 187 0 discriminator 1
 770 0004 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 771              	.LCFI13:
 772              		.cfi_def_cfa_offset 24
 773              		.cfi_offset 3, -24
 774              		.cfi_offset 4, -20
 775              		.cfi_offset 5, -16
 776              		.cfi_offset 6, -12
 777              		.cfi_offset 7, -8
 778              		.cfi_offset 14, -4
 779 0006 0446     		mov	r4, r0
 780 0008 0F46     		mov	r7, r1
 781 000a 1D46     		mov	r5, r3
 782 000c 1646     		mov	r6, r2
 191:../user/source/Uart.c ****         return -1;
 783              		.loc 1 191 0 discriminator 1
 784 000e 8068     		ldr	r0, [r0, #8]
 785              	.LVL68:
 786 0010 FFF7FEFF 		bl	uwBuf_EmpLen
 787              	.LVL69:
 788 0014 8642     		cmp	r6, r0
 789 0016 44D8     		bhi	.L66
 790 0018 0022     		movs	r2, #0
 791 001a 14E0     		b	.L59
 792              	.LVL70:
 793              	.L60:
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 23


 195:../user/source/Uart.c ****         puart->pSndbuf->wr = (++puart->pSndbuf->wr) % DRV_BUF_SIZE;
 794              		.loc 1 195 0 discriminator 3
 795 001c A368     		ldr	r3, [r4, #8]
 796 001e D3F8EC13 		ldr	r1, [r3, #1004]
 797 0022 B85C     		ldrb	r0, [r7, r2]	@ zero_extendqisi2
 798 0024 5854     		strb	r0, [r3, r1]
 196:../user/source/Uart.c ****     }
 799              		.loc 1 196 0 discriminator 3
 800 0026 A068     		ldr	r0, [r4, #8]
 801 0028 D0F8EC13 		ldr	r1, [r0, #1004]
 802 002c 0131     		adds	r1, r1, #1
 803 002e 1E4B     		ldr	r3, .L68
 804 0030 A3FB01E3 		umull	lr, r3, r3, r1
 805 0034 9B09     		lsrs	r3, r3, #6
 806 0036 4FF47A7E 		mov	lr, #1000
 807 003a 0EFB1313 		mls	r3, lr, r3, r1
 808 003e C0F8EC33 		str	r3, [r0, #1004]
 193:../user/source/Uart.c ****     {
 809              		.loc 1 193 0 discriminator 3
 810 0042 0132     		adds	r2, r2, #1
 811              	.LVL71:
 812 0044 92B2     		uxth	r2, r2
 813              	.LVL72:
 814              	.L59:
 193:../user/source/Uart.c ****     {
 815              		.loc 1 193 0 is_stmt 0 discriminator 1
 816 0046 9642     		cmp	r6, r2
 817 0048 E8D8     		bhi	.L60
 198:../user/source/Uart.c ****     //LL_USART_EnableIT_TXE(puart->handler);
 818              		.loc 1 198 0 is_stmt 1
 819 004a A368     		ldr	r3, [r4, #8]
 820 004c D3F8E863 		ldr	r6, [r3, #1000]
 821              	.LVL73:
 200:../user/source/Uart.c ****     while (ticks)
 822              		.loc 1 200 0
 823 0050 0122     		movs	r2, #1
 824              	.LVL74:
 825 0052 1649     		ldr	r1, .L68+4
 826 0054 2068     		ldr	r0, [r4]
 827 0056 FFF7FEFF 		bl	USART_ITConfig
 828              	.LVL75:
 201:../user/source/Uart.c ****     {
 829              		.loc 1 201 0
 830 005a 09E0     		b	.L63
 831              	.L64:
 204:../user/source/Uart.c ****             break;
 832              		.loc 1 204 0
 833 005c A068     		ldr	r0, [r4, #8]
 834 005e FFF7FEFF 		bl	uwBuf_UnReadLen
 835              	.LVL76:
 836 0062 38B1     		cbz	r0, .L62
 206:../user/source/Uart.c ****         {
 837              		.loc 1 206 0
 838 0064 124B     		ldr	r3, .L68+8
 839 0066 1B68     		ldr	r3, [r3]
 840 0068 13F4803F 		tst	r3, #65536
 841 006c 00D0     		beq	.L63
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 24


 208:../user/source/Uart.c ****         }
 842              		.loc 1 208 0
 843 006e 013D     		subs	r5, r5, #1
 844              	.LVL77:
 845              	.L63:
 201:../user/source/Uart.c ****     {
 846              		.loc 1 201 0
 847 0070 002D     		cmp	r5, #0
 848 0072 F3D1     		bne	.L64
 849              	.L62:
 213:../user/source/Uart.c ****     return (puart->pSndbuf->rd - sendlen + DRV_BUF_SIZE) % DRV_BUF_SIZE;
 850              		.loc 1 213 0
 851 0074 0022     		movs	r2, #0
 852 0076 0D49     		ldr	r1, .L68+4
 853 0078 2068     		ldr	r0, [r4]
 854 007a FFF7FEFF 		bl	USART_ITConfig
 855              	.LVL78:
 214:../user/source/Uart.c **** }
 856              		.loc 1 214 0
 857 007e A368     		ldr	r3, [r4, #8]
 858 0080 D3F8E823 		ldr	r2, [r3, #1000]
 859 0084 921B     		subs	r2, r2, r6
 860 0086 02F57A72 		add	r2, r2, #1000
 861 008a 074B     		ldr	r3, .L68
 862 008c A3FB0213 		umull	r1, r3, r3, r2
 863 0090 9B09     		lsrs	r3, r3, #6
 864 0092 4FF47A70 		mov	r0, #1000
 865 0096 00FB1320 		mls	r0, r0, r3, r2
 866 009a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 867              	.LVL79:
 868              	.L65:
 869              	.LCFI14:
 870              		.cfi_def_cfa_offset 0
 871              		.cfi_restore 3
 872              		.cfi_restore 4
 873              		.cfi_restore 5
 874              		.cfi_restore 6
 875              		.cfi_restore 7
 876              		.cfi_restore 14
 192:../user/source/Uart.c ****     for (i = 0; i < count; i++)
 877              		.loc 1 192 0
 878 009c 4FF0FF30 		mov	r0, #-1
 879              	.LVL80:
 215:../user/source/Uart.c **** 
 880              		.loc 1 215 0
 881 00a0 7047     		bx	lr
 882              	.LVL81:
 883              	.L66:
 884              	.LCFI15:
 885              		.cfi_def_cfa_offset 24
 886              		.cfi_offset 3, -24
 887              		.cfi_offset 4, -20
 888              		.cfi_offset 5, -16
 889              		.cfi_offset 6, -12
 890              		.cfi_offset 7, -8
 891              		.cfi_offset 14, -4
 192:../user/source/Uart.c ****     for (i = 0; i < count; i++)
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 25


 892              		.loc 1 192 0
 893 00a2 4FF0FF30 		mov	r0, #-1
 215:../user/source/Uart.c **** 
 894              		.loc 1 215 0
 895 00a6 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 896              	.LVL82:
 897              	.L69:
 898              		.align	2
 899              	.L68:
 900 00a8 D34D6210 		.word	274877907
 901 00ac 07010700 		.word	459015
 902 00b0 10E000E0 		.word	-536813552
 903              		.cfi_endproc
 904              	.LFE118:
 906              		.section	.text.Uart_IdleRead,"ax",%progbits
 907              		.align	2
 908              		.global	Uart_IdleRead
 909              		.thumb
 910              		.thumb_func
 912              	Uart_IdleRead:
 913              	.LFB119:
 225:../user/source/Uart.c ****     volatile uint32_t readlen = 0;
 914              		.loc 1 225 0
 915              		.cfi_startproc
 916              		@ args = 0, pretend = 0, frame = 16
 917              		@ frame_needed = 0, uses_anonymous_args = 0
 918              	.LVL83:
 919 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 920              	.LCFI16:
 921              		.cfi_def_cfa_offset 24
 922              		.cfi_offset 4, -24
 923              		.cfi_offset 5, -20
 924              		.cfi_offset 6, -16
 925              		.cfi_offset 7, -12
 926              		.cfi_offset 8, -8
 927              		.cfi_offset 14, -4
 928 0004 84B0     		sub	sp, sp, #16
 929              	.LCFI17:
 930              		.cfi_def_cfa_offset 40
 931 0006 9846     		mov	r8, r3
 226:../user/source/Uart.c ****     volatile uint32_t readlenow = 0;
 932              		.loc 1 226 0
 933 0008 0023     		movs	r3, #0
 934              	.LVL84:
 935 000a 0393     		str	r3, [sp, #12]
 227:../user/source/Uart.c ****     volatile idleMsCount;
 936              		.loc 1 227 0
 937 000c 0293     		str	r3, [sp, #8]
 231:../user/source/Uart.c ****     {
 938              		.loc 1 231 0
 939 000e 531E     		subs	r3, r2, #1
 940 0010 B3F57A7F 		cmp	r3, #1000
 941 0014 56D2     		bcs	.L82
 942 0016 0446     		mov	r4, r0
 943 0018 0D46     		mov	r5, r1
 944 001a 1646     		mov	r6, r2
 236:../user/source/Uart.c ****     {
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 26


 945              		.loc 1 236 0
 946 001c B8F1FF3F 		cmp	r8, #-1
 947 0020 03D0     		beq	.L72
 238:../user/source/Uart.c ****     }
 948              		.loc 1 238 0
 949 0022 08F10108 		add	r8, r8, #1
 950              	.LVL85:
 951 0026 CDF80480 		str	r8, [sp, #4]
 952              	.L72:
 240:../user/source/Uart.c ****     readlenow = uwBuf_UnReadLen(puart->pRsvbuf);
 953              		.loc 1 240 0
 954 002a 0122     		movs	r2, #1
 955              	.LVL86:
 956 002c 2749     		ldr	r1, .L85
 957              	.LVL87:
 958 002e 2068     		ldr	r0, [r4]
 959              	.LVL88:
 960 0030 FFF7FEFF 		bl	USART_ITConfig
 961              	.LVL89:
 241:../user/source/Uart.c ****     while (readlenow < count && idleMsCount > 0)
 962              		.loc 1 241 0
 963 0034 6768     		ldr	r7, [r4, #4]
 964 0036 3846     		mov	r0, r7
 965 0038 FFF7FEFF 		bl	uwBuf_UnReadLen
 966              	.LVL90:
 967 003c 0290     		str	r0, [sp, #8]
 242:../user/source/Uart.c ****     {
 968              		.loc 1 242 0
 969 003e 13E0     		b	.L75
 970              	.L77:
 245:../user/source/Uart.c ****         {
 971              		.loc 1 245 0
 972 0040 234B     		ldr	r3, .L85+4
 973 0042 1B68     		ldr	r3, [r3]
 974 0044 13F4803F 		tst	r3, #65536
 975 0048 02D0     		beq	.L74
 247:../user/source/Uart.c ****         }
 976              		.loc 1 247 0
 977 004a 019B     		ldr	r3, [sp, #4]
 978 004c 013B     		subs	r3, r3, #1
 979 004e 0193     		str	r3, [sp, #4]
 980              	.L74:
 249:../user/source/Uart.c ****         /*readlennow ÓÐ±ä»¯£¬idleMsCountÖØÔØ*/
 981              		.loc 1 249 0
 982 0050 3846     		mov	r0, r7
 983 0052 FFF7FEFF 		bl	uwBuf_UnReadLen
 984              	.LVL91:
 985 0056 0290     		str	r0, [sp, #8]
 251:../user/source/Uart.c ****         {
 986              		.loc 1 251 0
 987 0058 029A     		ldr	r2, [sp, #8]
 988 005a 039B     		ldr	r3, [sp, #12]
 989 005c 9A42     		cmp	r2, r3
 990 005e 03D9     		bls	.L75
 253:../user/source/Uart.c ****             readlen = readlenow;
 991              		.loc 1 253 0
 992 0060 CDF80480 		str	r8, [sp, #4]
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 27


 254:../user/source/Uart.c ****         }
 993              		.loc 1 254 0
 994 0064 029B     		ldr	r3, [sp, #8]
 995 0066 0393     		str	r3, [sp, #12]
 996              	.L75:
 242:../user/source/Uart.c ****     {
 997              		.loc 1 242 0
 998 0068 029B     		ldr	r3, [sp, #8]
 999 006a 9E42     		cmp	r6, r3
 1000 006c 02D9     		bls	.L76
 242:../user/source/Uart.c ****     {
 1001              		.loc 1 242 0 is_stmt 0 discriminator 1
 1002 006e 019B     		ldr	r3, [sp, #4]
 1003 0070 002B     		cmp	r3, #0
 1004 0072 E5DC     		bgt	.L77
 1005              	.L76:
 257:../user/source/Uart.c ****     if (readlen)
 1006              		.loc 1 257 0 is_stmt 1
 1007 0074 0022     		movs	r2, #0
 1008 0076 1549     		ldr	r1, .L85
 1009 0078 2068     		ldr	r0, [r4]
 1010 007a FFF7FEFF 		bl	USART_ITConfig
 1011              	.LVL92:
 258:../user/source/Uart.c ****     {
 1012              		.loc 1 258 0
 1013 007e 039B     		ldr	r3, [sp, #12]
 1014 0080 F3B1     		cbz	r3, .L78
 261:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 1015              		.loc 1 261 0
 1016 0082 039B     		ldr	r3, [sp, #12]
 1017 0084 9E42     		cmp	r6, r3
 1018 0086 00D9     		bls	.L79
 261:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 1019              		.loc 1 261 0 is_stmt 0 discriminator 1
 1020 0088 039E     		ldr	r6, [sp, #12]
 1021              	.LVL93:
 1022              	.L79:
 261:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 1023              		.loc 1 261 0 discriminator 4
 1024 008a 0396     		str	r6, [sp, #12]
 1025              	.LVL94:
 262:../user/source/Uart.c ****         {
 1026              		.loc 1 262 0 is_stmt 1 discriminator 4
 1027 008c 0022     		movs	r2, #0
 1028 008e 14E0     		b	.L80
 1029              	.LVL95:
 1030              	.L81:
 264:../user/source/Uart.c ****             puart->pRsvbuf->rd = (++puart->pRsvbuf->rd) % DRV_BUF_SIZE;
 1031              		.loc 1 264 0 discriminator 3
 1032 0090 6368     		ldr	r3, [r4, #4]
 1033 0092 D3F8E813 		ldr	r1, [r3, #1000]
 1034 0096 5B5C     		ldrb	r3, [r3, r1]	@ zero_extendqisi2
 1035 0098 AB54     		strb	r3, [r5, r2]
 265:../user/source/Uart.c ****         }
 1036              		.loc 1 265 0 discriminator 3
 1037 009a 6068     		ldr	r0, [r4, #4]
 1038 009c D0F8E813 		ldr	r1, [r0, #1000]
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 28


 1039 00a0 0131     		adds	r1, r1, #1
 1040 00a2 0C4B     		ldr	r3, .L85+8
 1041 00a4 A3FB0163 		umull	r6, r3, r3, r1
 1042 00a8 9B09     		lsrs	r3, r3, #6
 1043 00aa 4FF47A76 		mov	r6, #1000
 1044 00ae 06FB1313 		mls	r3, r6, r3, r1
 1045 00b2 C0F8E833 		str	r3, [r0, #1000]
 262:../user/source/Uart.c ****         {
 1046              		.loc 1 262 0 discriminator 3
 1047 00b6 0132     		adds	r2, r2, #1
 1048              	.LVL96:
 1049 00b8 92B2     		uxth	r2, r2
 1050              	.LVL97:
 1051              	.L80:
 262:../user/source/Uart.c ****         {
 1052              		.loc 1 262 0 is_stmt 0 discriminator 1
 1053 00ba 039B     		ldr	r3, [sp, #12]
 1054 00bc 9A42     		cmp	r2, r3
 1055 00be E7D3     		bcc	.L81
 1056              	.LVL98:
 1057              	.L78:
 268:../user/source/Uart.c **** }
 1058              		.loc 1 268 0 is_stmt 1
 1059 00c0 0398     		ldr	r0, [sp, #12]
 1060 00c2 00E0     		b	.L71
 1061              	.LVL99:
 1062              	.L82:
 233:../user/source/Uart.c ****     }
 1063              		.loc 1 233 0
 1064 00c4 0020     		movs	r0, #0
 1065              	.LVL100:
 1066              	.L71:
 269:../user/source/Uart.c **** 
 1067              		.loc 1 269 0
 1068 00c6 04B0     		add	sp, sp, #16
 1069              	.LCFI18:
 1070              		.cfi_def_cfa_offset 24
 1071              		@ sp needed
 1072 00c8 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1073              	.LVL101:
 1074              	.L86:
 1075              		.align	2
 1076              	.L85:
 1077 00cc 05010500 		.word	327941
 1078 00d0 10E000E0 		.word	-536813552
 1079 00d4 D34D6210 		.word	274877907
 1080              		.cfi_endproc
 1081              	.LFE119:
 1083              		.section	.text.Uart_OnceRead,"ax",%progbits
 1084              		.align	2
 1085              		.global	Uart_OnceRead
 1086              		.thumb
 1087              		.thumb_func
 1089              	Uart_OnceRead:
 1090              	.LFB120:
 279:../user/source/Uart.c ****     volatile uint32_t readlen = 0;
 1091              		.loc 1 279 0
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 29


 1092              		.cfi_startproc
 1093              		@ args = 0, pretend = 0, frame = 8
 1094              		@ frame_needed = 0, uses_anonymous_args = 0
 1095              	.LVL102:
 1096 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1097              	.LCFI19:
 1098              		.cfi_def_cfa_offset 24
 1099              		.cfi_offset 4, -24
 1100              		.cfi_offset 5, -20
 1101              		.cfi_offset 6, -16
 1102              		.cfi_offset 7, -12
 1103              		.cfi_offset 8, -8
 1104              		.cfi_offset 14, -4
 1105 0004 82B0     		sub	sp, sp, #8
 1106              	.LCFI20:
 1107              		.cfi_def_cfa_offset 32
 1108 0006 1E46     		mov	r6, r3
 280:../user/source/Uart.c ****     uint16_t i;
 1109              		.loc 1 280 0
 1110 0008 0023     		movs	r3, #0
 1111              	.LVL103:
 1112 000a 0193     		str	r3, [sp, #4]
 283:../user/source/Uart.c ****     {
 1113              		.loc 1 283 0
 1114 000c 531E     		subs	r3, r2, #1
 1115 000e B3F57A7F 		cmp	r3, #1000
 1116 0012 45D2     		bcs	.L97
 1117 0014 0446     		mov	r4, r0
 1118 0016 0D46     		mov	r5, r1
 1119 0018 1746     		mov	r7, r2
 287:../user/source/Uart.c ****     readlen = uwBuf_UnReadLen(puart->pRsvbuf);
 1120              		.loc 1 287 0
 1121 001a 0122     		movs	r2, #1
 1122              	.LVL104:
 1123 001c 2249     		ldr	r1, .L100
 1124              	.LVL105:
 1125 001e 0068     		ldr	r0, [r0]
 1126              	.LVL106:
 1127 0020 FFF7FEFF 		bl	USART_ITConfig
 1128              	.LVL107:
 288:../user/source/Uart.c ****     while (delay)
 1129              		.loc 1 288 0
 1130 0024 D4F80480 		ldr	r8, [r4, #4]
 1131 0028 4046     		mov	r0, r8
 1132 002a FFF7FEFF 		bl	uwBuf_UnReadLen
 1133              	.LVL108:
 1134 002e 0190     		str	r0, [sp, #4]
 289:../user/source/Uart.c ****     {
 1135              		.loc 1 289 0
 1136 0030 0CE0     		b	.L89
 1137              	.L92:
 291:../user/source/Uart.c ****         /*¶àÓàµÄ×Ö½Ú±¾´Î¶ªÆú£¬²¢µ÷ÓÃBufClear·ÀÖ¹ºóÃæÔÙ¶ÁÈ¡*/
 1138              		.loc 1 291 0
 1139 0032 4046     		mov	r0, r8
 1140 0034 FFF7FEFF 		bl	uwBuf_UnReadLen
 1141              	.LVL109:
 1142 0038 0190     		str	r0, [sp, #4]
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 30


 293:../user/source/Uart.c ****             break;
 1143              		.loc 1 293 0
 1144 003a 019B     		ldr	r3, [sp, #4]
 1145 003c 9F42     		cmp	r7, r3
 1146 003e 07D9     		bls	.L90
 295:../user/source/Uart.c ****         {
 1147              		.loc 1 295 0
 1148 0040 1A4B     		ldr	r3, .L100+4
 1149 0042 1B68     		ldr	r3, [r3]
 1150 0044 13F4803F 		tst	r3, #65536
 1151 0048 00D0     		beq	.L89
 297:../user/source/Uart.c ****         }
 1152              		.loc 1 297 0
 1153 004a 013E     		subs	r6, r6, #1
 1154              	.LVL110:
 1155              	.L89:
 289:../user/source/Uart.c ****     {
 1156              		.loc 1 289 0
 1157 004c 002E     		cmp	r6, #0
 1158 004e F0D1     		bne	.L92
 1159              	.L90:
 300:../user/source/Uart.c ****     if (readlen)
 1160              		.loc 1 300 0
 1161 0050 0022     		movs	r2, #0
 1162 0052 1549     		ldr	r1, .L100
 1163 0054 2068     		ldr	r0, [r4]
 1164 0056 FFF7FEFF 		bl	USART_ITConfig
 1165              	.LVL111:
 301:../user/source/Uart.c ****     {
 1166              		.loc 1 301 0
 1167 005a 019B     		ldr	r3, [sp, #4]
 1168 005c F3B1     		cbz	r3, .L93
 304:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 1169              		.loc 1 304 0
 1170 005e 019B     		ldr	r3, [sp, #4]
 1171 0060 9F42     		cmp	r7, r3
 1172 0062 00D9     		bls	.L94
 304:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 1173              		.loc 1 304 0 is_stmt 0 discriminator 1
 1174 0064 019F     		ldr	r7, [sp, #4]
 1175              	.LVL112:
 1176              	.L94:
 304:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 1177              		.loc 1 304 0 discriminator 4
 1178 0066 0197     		str	r7, [sp, #4]
 1179              	.LVL113:
 305:../user/source/Uart.c ****         {
 1180              		.loc 1 305 0 is_stmt 1 discriminator 4
 1181 0068 0022     		movs	r2, #0
 1182 006a 14E0     		b	.L95
 1183              	.LVL114:
 1184              	.L96:
 307:../user/source/Uart.c ****             puart->pRsvbuf->rd = (++puart->pRsvbuf->rd) % DRV_BUF_SIZE;
 1185              		.loc 1 307 0 discriminator 3
 1186 006c 6368     		ldr	r3, [r4, #4]
 1187 006e D3F8E813 		ldr	r1, [r3, #1000]
 1188 0072 5B5C     		ldrb	r3, [r3, r1]	@ zero_extendqisi2
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 31


 1189 0074 AB54     		strb	r3, [r5, r2]
 308:../user/source/Uart.c ****         }
 1190              		.loc 1 308 0 discriminator 3
 1191 0076 6068     		ldr	r0, [r4, #4]
 1192 0078 D0F8E813 		ldr	r1, [r0, #1000]
 1193 007c 0131     		adds	r1, r1, #1
 1194 007e 0C4B     		ldr	r3, .L100+8
 1195 0080 A3FB0163 		umull	r6, r3, r3, r1
 1196 0084 9B09     		lsrs	r3, r3, #6
 1197 0086 4FF47A76 		mov	r6, #1000
 1198 008a 06FB1313 		mls	r3, r6, r3, r1
 1199 008e C0F8E833 		str	r3, [r0, #1000]
 305:../user/source/Uart.c ****         {
 1200              		.loc 1 305 0 discriminator 3
 1201 0092 0132     		adds	r2, r2, #1
 1202              	.LVL115:
 1203 0094 92B2     		uxth	r2, r2
 1204              	.LVL116:
 1205              	.L95:
 305:../user/source/Uart.c ****         {
 1206              		.loc 1 305 0 is_stmt 0 discriminator 1
 1207 0096 019B     		ldr	r3, [sp, #4]
 1208 0098 9A42     		cmp	r2, r3
 1209 009a E7D3     		bcc	.L96
 1210              	.LVL117:
 1211              	.L93:
 311:../user/source/Uart.c **** }
 1212              		.loc 1 311 0 is_stmt 1
 1213 009c 0198     		ldr	r0, [sp, #4]
 1214 009e 00E0     		b	.L88
 1215              	.LVL118:
 1216              	.L97:
 285:../user/source/Uart.c ****     }
 1217              		.loc 1 285 0
 1218 00a0 0020     		movs	r0, #0
 1219              	.LVL119:
 1220              	.L88:
 312:../user/source/Uart.c **** 
 1221              		.loc 1 312 0
 1222 00a2 02B0     		add	sp, sp, #8
 1223              	.LCFI21:
 1224              		.cfi_def_cfa_offset 24
 1225              		@ sp needed
 1226 00a4 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1227              	.L101:
 1228              		.align	2
 1229              	.L100:
 1230 00a8 05010500 		.word	327941
 1231 00ac 10E000E0 		.word	-536813552
 1232 00b0 D34D6210 		.word	274877907
 1233              		.cfi_endproc
 1234              	.LFE120:
 1236              		.section	.text.Uart_Read,"ax",%progbits
 1237              		.align	2
 1238              		.global	Uart_Read
 1239              		.thumb
 1240              		.thumb_func
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 32


 1242              	Uart_Read:
 1243              	.LFB122:
 346:../user/source/Uart.c ****     volatile uint32_t readlen = 0;
 1244              		.loc 1 346 0
 1245              		.cfi_startproc
 1246              		@ args = 0, pretend = 0, frame = 8
 1247              		@ frame_needed = 0, uses_anonymous_args = 0
 1248              	.LVL120:
 1249 0000 70B5     		push	{r4, r5, r6, lr}
 1250              	.LCFI22:
 1251              		.cfi_def_cfa_offset 16
 1252              		.cfi_offset 4, -16
 1253              		.cfi_offset 5, -12
 1254              		.cfi_offset 6, -8
 1255              		.cfi_offset 14, -4
 1256 0002 82B0     		sub	sp, sp, #8
 1257              	.LCFI23:
 1258              		.cfi_def_cfa_offset 24
 347:../user/source/Uart.c ****     uint16_t i;
 1259              		.loc 1 347 0
 1260 0004 0023     		movs	r3, #0
 1261 0006 0193     		str	r3, [sp, #4]
 349:../user/source/Uart.c ****         return 0;
 1262              		.loc 1 349 0
 1263 0008 541E     		subs	r4, r2, #1
 1264 000a 4FF6FE73 		movw	r3, #65534
 1265 000e 9C42     		cmp	r4, r3
 1266 0010 2BD8     		bhi	.L108
 1267 0012 1446     		mov	r4, r2
 1268 0014 0E46     		mov	r6, r1
 1269 0016 0546     		mov	r5, r0
 351:../user/source/Uart.c ****     if (readlen)
 1270              		.loc 1 351 0
 1271 0018 4068     		ldr	r0, [r0, #4]
 1272              	.LVL121:
 1273 001a FFF7FEFF 		bl	uwBuf_UnReadLen
 1274              	.LVL122:
 1275 001e 0190     		str	r0, [sp, #4]
 352:../user/source/Uart.c ****     {
 1276              		.loc 1 352 0
 1277 0020 019B     		ldr	r3, [sp, #4]
 1278 0022 03B3     		cbz	r3, .L104
 355:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 1279              		.loc 1 355 0
 1280 0024 019B     		ldr	r3, [sp, #4]
 1281 0026 9C42     		cmp	r4, r3
 1282 0028 01D9     		bls	.L109
 355:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 1283              		.loc 1 355 0 is_stmt 0 discriminator 1
 1284 002a 019A     		ldr	r2, [sp, #4]
 1285 002c 00E0     		b	.L105
 1286              	.L109:
 355:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 1287              		.loc 1 355 0
 1288 002e 2246     		mov	r2, r4
 1289              	.L105:
 355:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 33


 1290              		.loc 1 355 0 discriminator 4
 1291 0030 0192     		str	r2, [sp, #4]
 1292              	.LVL123:
 356:../user/source/Uart.c ****         {
 1293              		.loc 1 356 0 is_stmt 1 discriminator 4
 1294 0032 0022     		movs	r2, #0
 1295 0034 14E0     		b	.L106
 1296              	.LVL124:
 1297              	.L107:
 358:../user/source/Uart.c ****             puart->pRsvbuf->rd = (++puart->pRsvbuf->rd) % DRV_BUF_SIZE;
 1298              		.loc 1 358 0 discriminator 3
 1299 0036 6B68     		ldr	r3, [r5, #4]
 1300 0038 D3F8E813 		ldr	r1, [r3, #1000]
 1301 003c 5B5C     		ldrb	r3, [r3, r1]	@ zero_extendqisi2
 1302 003e B354     		strb	r3, [r6, r2]
 359:../user/source/Uart.c ****         }
 1303              		.loc 1 359 0 discriminator 3
 1304 0040 6968     		ldr	r1, [r5, #4]
 1305 0042 D1F8E843 		ldr	r4, [r1, #1000]
 1306 0046 0134     		adds	r4, r4, #1
 1307 0048 094B     		ldr	r3, .L111
 1308 004a A3FB0403 		umull	r0, r3, r3, r4
 1309 004e 9B09     		lsrs	r3, r3, #6
 1310 0050 4FF47A70 		mov	r0, #1000
 1311 0054 00FB1343 		mls	r3, r0, r3, r4
 1312 0058 C1F8E833 		str	r3, [r1, #1000]
 356:../user/source/Uart.c ****         {
 1313              		.loc 1 356 0 discriminator 3
 1314 005c 0132     		adds	r2, r2, #1
 1315              	.LVL125:
 1316 005e 92B2     		uxth	r2, r2
 1317              	.LVL126:
 1318              	.L106:
 356:../user/source/Uart.c ****         {
 1319              		.loc 1 356 0 is_stmt 0 discriminator 1
 1320 0060 019B     		ldr	r3, [sp, #4]
 1321 0062 9A42     		cmp	r2, r3
 1322 0064 E7D3     		bcc	.L107
 1323              	.LVL127:
 1324              	.L104:
 362:../user/source/Uart.c **** }
 1325              		.loc 1 362 0 is_stmt 1
 1326 0066 0198     		ldr	r0, [sp, #4]
 1327 0068 00E0     		b	.L103
 1328              	.LVL128:
 1329              	.L108:
 350:../user/source/Uart.c ****     readlen = uwBuf_UnReadLen(puart->pRsvbuf);
 1330              		.loc 1 350 0
 1331 006a 0020     		movs	r0, #0
 1332              	.LVL129:
 1333              	.L103:
 363:../user/source/Uart.c **** /**********************************************
 1334              		.loc 1 363 0
 1335 006c 02B0     		add	sp, sp, #8
 1336              	.LCFI24:
 1337              		.cfi_def_cfa_offset 16
 1338              		@ sp needed
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 34


 1339 006e 70BD     		pop	{r4, r5, r6, pc}
 1340              	.L112:
 1341              		.align	2
 1342              	.L111:
 1343 0070 D34D6210 		.word	274877907
 1344              		.cfi_endproc
 1345              	.LFE122:
 1347              		.section	.text.vBuf_Clear,"ax",%progbits
 1348              		.align	2
 1349              		.global	vBuf_Clear
 1350              		.thumb
 1351              		.thumb_func
 1353              	vBuf_Clear:
 1354              	.LFB127:
 420:../user/source/Uart.c **** /********************************************************************
 421:../user/source/Uart.c **** * ¹¦    ÄÜ£ºÇå¿Õ»º´æ
 422:../user/source/Uart.c **** * Êä    Èë£ºÊý¾Ý»º´æ½á¹¹ÌåµØÖ·
 423:../user/source/Uart.c **** * Êä    ³ö£º
 424:../user/source/Uart.c **** *          
 425:../user/source/Uart.c **** * ±à Ð´ ÈË£º
 426:../user/source/Uart.c **** * ±àÐ´ÈÕÆÚ£º2016.6.28
 427:../user/source/Uart.c **** **********************************************************************/
 428:../user/source/Uart.c **** void vBuf_Clear(struct ucbuf *buf)
 429:../user/source/Uart.c **** {
 1355              		.loc 1 429 0
 1356              		.cfi_startproc
 1357              		@ args = 0, pretend = 0, frame = 0
 1358              		@ frame_needed = 0, uses_anonymous_args = 0
 1359              		@ link register save eliminated.
 1360              	.LVL130:
 430:../user/source/Uart.c ****     buf->rd = buf->wr;
 1361              		.loc 1 430 0
 1362 0000 D0F8EC33 		ldr	r3, [r0, #1004]
 1363 0004 C0F8E833 		str	r3, [r0, #1000]
 1364 0008 7047     		bx	lr
 1365              		.cfi_endproc
 1366              	.LFE127:
 1368 000a 00BF     		.section	.text.blBufchr,"ax",%progbits
 1369              		.align	2
 1370              		.global	blBufchr
 1371              		.thumb
 1372              		.thumb_func
 1374              	blBufchr:
 1375              	.LFB128:
 431:../user/source/Uart.c **** }
 432:../user/source/Uart.c **** 
 433:../user/source/Uart.c **** /********************************************************************
 434:../user/source/Uart.c **** * ¹¦    ÄÜ£º²éÕÒ»º´æÖÐÌØ¶¨×Ö·û
 435:../user/source/Uart.c **** * Êä    Èë£º»º´æ½á¹¹ÌåÖ¸Õëuc_buf£¬ÌØ¶¨×Ö·ûchr,»º´æÄÚ×Ö½ÚÊýln
 436:../user/source/Uart.c **** * Êä    ³ö£ºtrue/false
 437:../user/source/Uart.c **** * Ëµ    Ã÷£º¶ÁÖ¸ÕëÖ¸Ïò¸Ã×Ö·û           
 438:../user/source/Uart.c **** * ±à Ð´ ÈË£ºstragen
 439:../user/source/Uart.c **** * ±àÐ´ÈÕÆÚ£º2016.8.25
 440:../user/source/Uart.c **** **********************************************************************/
 441:../user/source/Uart.c **** bool blBufchr(struct ucbuf *uc_buf, uint8_t chr, uint16_t ln)
 442:../user/source/Uart.c **** {
 1376              		.loc 1 442 0
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 35


 1377              		.cfi_startproc
 1378              		@ args = 0, pretend = 0, frame = 0
 1379              		@ frame_needed = 0, uses_anonymous_args = 0
 1380              		@ link register save eliminated.
 1381              	.LVL131:
 1382 0000 30B4     		push	{r4, r5}
 1383              	.LCFI25:
 1384              		.cfi_def_cfa_offset 8
 1385              		.cfi_offset 4, -8
 1386              		.cfi_offset 5, -4
 443:../user/source/Uart.c ****     while (ln-- && (uc_buf->data[uc_buf->rd] != chr)) // &&(uc_buf->RD_Index != uc_buf->WR_Index))
 1387              		.loc 1 443 0
 1388 0002 0BE0     		b	.L115
 1389              	.LVL132:
 1390              	.L117:
 444:../user/source/Uart.c ****     {
 445:../user/source/Uart.c ****         uc_buf->rd = (uc_buf->rd + 1) % DRV_BUF_SIZE;
 1391              		.loc 1 445 0
 1392 0004 5A1C     		adds	r2, r3, #1
 1393 0006 0C4B     		ldr	r3, .L121
 1394 0008 A3FB0253 		umull	r5, r3, r3, r2
 1395 000c 9B09     		lsrs	r3, r3, #6
 1396 000e 4FF47A75 		mov	r5, #1000
 1397 0012 05FB1323 		mls	r3, r5, r3, r2
 1398 0016 C0F8E833 		str	r3, [r0, #1000]
 443:../user/source/Uart.c ****     while (ln-- && (uc_buf->data[uc_buf->rd] != chr)) // &&(uc_buf->RD_Index != uc_buf->WR_Index))
 1399              		.loc 1 443 0
 1400 001a 2246     		mov	r2, r4
 1401              	.LVL133:
 1402              	.L115:
 1403 001c 541E     		subs	r4, r2, #1
 1404 001e A4B2     		uxth	r4, r4
 1405              	.LVL134:
 1406 0020 22B1     		cbz	r2, .L116
 443:../user/source/Uart.c ****     while (ln-- && (uc_buf->data[uc_buf->rd] != chr)) // &&(uc_buf->RD_Index != uc_buf->WR_Index))
 1407              		.loc 1 443 0 is_stmt 0 discriminator 1
 1408 0022 D0F8E833 		ldr	r3, [r0, #1000]
 1409 0026 C25C     		ldrb	r2, [r0, r3]	@ zero_extendqisi2
 1410 0028 8A42     		cmp	r2, r1
 1411 002a EBD1     		bne	.L117
 1412              	.L116:
 446:../user/source/Uart.c ****     }
 447:../user/source/Uart.c ****     //return(ln ? true : false);						//¶ÁÖ¸Õë¿ÉÄÜÊÇ0
 448:../user/source/Uart.c ****     if (ln)
 1413              		.loc 1 448 0 is_stmt 1
 1414 002c 0CB1     		cbz	r4, .L119
 449:../user/source/Uart.c ****         return false;
 1415              		.loc 1 449 0
 1416 002e 0020     		movs	r0, #0
 1417              	.LVL135:
 1418 0030 00E0     		b	.L118
 1419              	.LVL136:
 1420              	.L119:
 450:../user/source/Uart.c ****     else
 451:../user/source/Uart.c ****         return true;
 1421              		.loc 1 451 0
 1422 0032 0120     		movs	r0, #1
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 36


 1423              	.LVL137:
 1424              	.L118:
 452:../user/source/Uart.c **** }
 1425              		.loc 1 452 0
 1426 0034 30BC     		pop	{r4, r5}
 1427              	.LCFI26:
 1428              		.cfi_restore 5
 1429              		.cfi_restore 4
 1430              		.cfi_def_cfa_offset 0
 1431              	.LVL138:
 1432 0036 7047     		bx	lr
 1433              	.L122:
 1434              		.align	2
 1435              	.L121:
 1436 0038 D34D6210 		.word	274877907
 1437              		.cfi_endproc
 1438              	.LFE128:
 1440              		.section	.text.blBufcmp,"ax",%progbits
 1441              		.align	2
 1442              		.global	blBufcmp
 1443              		.thumb
 1444              		.thumb_func
 1446              	blBufcmp:
 1447              	.LFB129:
 453:../user/source/Uart.c **** 
 454:../user/source/Uart.c **** /********************************************************************
 455:../user/source/Uart.c **** * ¹¦    ÄÜ£ºÅÐ¶Ï»º´æÖÐ×Ö·û´®ÊÇ·ñÊÇÌØ¶¨×Ö·û´®
 456:../user/source/Uart.c **** * Êä    Èë£º»º´æ½á¹¹ÌåµØÖ·uc_buf£¬×Ö·û´®Ö¸Õëptchr£¬×Ö·û´®³¤¶Èln
 457:../user/source/Uart.c **** * Êä    ³ö£ºtrue/false
 458:../user/source/Uart.c **** * Ëµ    Ã÷£º¶ÁÖ¸Õë²»¸Ä±ä
 459:../user/source/Uart.c **** * ±à Ð´ ÈË£ºstragen
 460:../user/source/Uart.c **** * ±àÐ´ÈÕÆÚ£º2016.8.25
 461:../user/source/Uart.c **** **********************************************************************/
 462:../user/source/Uart.c **** bool blBufcmp(struct ucbuf *uc_buf, char *ptchr, uint8_t ln)
 463:../user/source/Uart.c **** {
 1448              		.loc 1 463 0
 1449              		.cfi_startproc
 1450              		@ args = 0, pretend = 0, frame = 0
 1451              		@ frame_needed = 0, uses_anonymous_args = 0
 1452              		@ link register save eliminated.
 1453              	.LVL139:
 1454 0000 70B4     		push	{r4, r5, r6}
 1455              	.LCFI27:
 1456              		.cfi_def_cfa_offset 12
 1457              		.cfi_offset 4, -12
 1458              		.cfi_offset 5, -8
 1459              		.cfi_offset 6, -4
 464:../user/source/Uart.c ****     while (ln-- && (uc_buf->data[uc_buf->rd] == *(ptchr++)) && (uc_buf->rd != uc_buf->wr)) //·ÀÖ¹¶Á
 1460              		.loc 1 464 0
 1461 0002 0CE0     		b	.L124
 1462              	.LVL140:
 1463              	.L126:
 465:../user/source/Uart.c ****     {
 466:../user/source/Uart.c ****         uc_buf->rd = (uc_buf->rd + 1) % DRV_BUF_SIZE;
 1464              		.loc 1 466 0
 1465 0004 5A1C     		adds	r2, r3, #1
 1466 0006 0F4B     		ldr	r3, .L128
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 37


 1467 0008 A3FB0213 		umull	r1, r3, r3, r2
 1468 000c 9B09     		lsrs	r3, r3, #6
 1469 000e 4FF47A71 		mov	r1, #1000
 1470 0012 01FB1323 		mls	r3, r1, r3, r2
 1471 0016 C0F8E833 		str	r3, [r0, #1000]
 464:../user/source/Uart.c ****     while (ln-- && (uc_buf->data[uc_buf->rd] == *(ptchr++)) && (uc_buf->rd != uc_buf->wr)) //·ÀÖ¹¶Á
 1472              		.loc 1 464 0
 1473 001a 2246     		mov	r2, r4
 1474 001c 3146     		mov	r1, r6
 1475              	.LVL141:
 1476              	.L124:
 1477 001e 531E     		subs	r3, r2, #1
 1478 0020 DCB2     		uxtb	r4, r3
 1479              	.LVL142:
 1480 0022 52B1     		cbz	r2, .L125
 464:../user/source/Uart.c ****     while (ln-- && (uc_buf->data[uc_buf->rd] == *(ptchr++)) && (uc_buf->rd != uc_buf->wr)) //·ÀÖ¹¶Á
 1481              		.loc 1 464 0 is_stmt 0 discriminator 1
 1482 0024 D0F8E833 		ldr	r3, [r0, #1000]
 1483 0028 C55C     		ldrb	r5, [r0, r3]	@ zero_extendqisi2
 1484 002a 4E1C     		adds	r6, r1, #1
 1485              	.LVL143:
 1486 002c 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 1487 002e 9542     		cmp	r5, r2
 1488 0030 03D1     		bne	.L125
 464:../user/source/Uart.c ****     while (ln-- && (uc_buf->data[uc_buf->rd] == *(ptchr++)) && (uc_buf->rd != uc_buf->wr)) //·ÀÖ¹¶Á
 1489              		.loc 1 464 0 discriminator 2
 1490 0032 D0F8EC23 		ldr	r2, [r0, #1004]
 1491 0036 9342     		cmp	r3, r2
 1492 0038 E4D1     		bne	.L126
 1493              	.LVL144:
 1494              	.L125:
 467:../user/source/Uart.c ****     }
 468:../user/source/Uart.c ****     return (ln ? false : true);
 469:../user/source/Uart.c **** }
 1495              		.loc 1 469 0 is_stmt 1
 1496 003a B4FA84F0 		clz	r0, r4
 1497              	.LVL145:
 1498 003e 4009     		lsrs	r0, r0, #5
 1499 0040 70BC     		pop	{r4, r5, r6}
 1500              	.LCFI28:
 1501              		.cfi_restore 6
 1502              		.cfi_restore 5
 1503              		.cfi_restore 4
 1504              		.cfi_def_cfa_offset 0
 1505              	.LVL146:
 1506 0042 7047     		bx	lr
 1507              	.L129:
 1508              		.align	2
 1509              	.L128:
 1510 0044 D34D6210 		.word	274877907
 1511              		.cfi_endproc
 1512              	.LFE129:
 1514              		.text
 1515              	.Letext0:
 1516              		.file 2 "d:\\gcc-arm-none-eabi-5_4-2016q3-20160926-win32\\arm-none-eabi\\include\\machine\\_defaul
 1517              		.file 3 "d:\\gcc-arm-none-eabi-5_4-2016q3-20160926-win32\\arm-none-eabi\\include\\sys\\_stdint.h"
 1518              		.file 4 "../cmsis/include/core_cm4.h"
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 38


 1519              		.file 5 "../cmsis/include/stm32f37x.h"
 1520              		.file 6 "../stdperiph/include/stm32f37x_usart.h"
 1521              		.file 7 "../stdperiph/include/stm32f37x_misc.h"
 1522              		.file 8 "../user/include/Uart.h"
 1523              		.file 9 "../stdperiph/include/stm32f37x_rcc.h"
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 39


DEFINED SYMBOLS
                            *ABS*:00000000 Uart.c
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:22     .text.vIRQ_UART_Config:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:26     .text.vIRQ_UART_Config:00000000 vIRQ_UART_Config
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:84     .text.vUart_Init:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:89     .text.vUart_Init:00000000 vUart_Init
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:245    .text.vUart_Init:000000e8 $d
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:253    .text.blDrv_Buf_IsEmpty:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:258    .text.blDrv_Buf_IsEmpty:00000000 blDrv_Buf_IsEmpty
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:286    .text.blDrv_Buf_IsFull:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:291    .text.blDrv_Buf_IsFull:00000000 blDrv_Buf_IsFull
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:322    .text.blDrv_Buf_IsFull:00000028 $d
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:327    .text.Uart_DataPut:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:332    .text.Uart_DataPut:00000000 Uart_DataPut
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:353    .text.Uart_DataPut:0000000c $d
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:358    .text.Uart_idleReadEnable:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:363    .text.Uart_idleReadEnable:00000000 Uart_idleReadEnable
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:398    .text.Uart_idleReadEnable:0000001c $d
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:403    .text.Uart_idleReadDisable:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:408    .text.Uart_idleReadDisable:00000000 Uart_idleReadDisable
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:444    .text.Uart_idleReadDisable:00000020 $d
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:449    .text.uwBuf_EmpLen:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:454    .text.uwBuf_EmpLen:00000000 uwBuf_EmpLen
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:478    .text.uwBuf_EmpLen:00000020 $d
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:483    .text.Uart_Write:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:488    .text.Uart_Write:00000000 Uart_Write
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:568    .text.Uart_Write:00000054 $d
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:574    .text.uwBuf_UnReadLen:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:579    .text.uwBuf_UnReadLen:00000000 uwBuf_UnReadLen
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:603    .text.uwBuf_UnReadLen:00000020 $d
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:608    .text.ucDrv_Buf_GetBytes:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:613    .text.ucDrv_Buf_GetBytes:00000000 ucDrv_Buf_GetBytes
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:675    .text.ucDrv_Buf_GetBytes:00000048 $d
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:680    .text.ucDrv_Buf_PutBytes:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:685    .text.ucDrv_Buf_PutBytes:00000000 ucDrv_Buf_PutBytes
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:749    .text.ucDrv_Buf_PutBytes:00000048 $d
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:754    .text.Uart_OnceWrite:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:759    .text.Uart_OnceWrite:00000000 Uart_OnceWrite
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:900    .text.Uart_OnceWrite:000000a8 $d
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:907    .text.Uart_IdleRead:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:912    .text.Uart_IdleRead:00000000 Uart_IdleRead
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:1077   .text.Uart_IdleRead:000000cc $d
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:1084   .text.Uart_OnceRead:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:1089   .text.Uart_OnceRead:00000000 Uart_OnceRead
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:1230   .text.Uart_OnceRead:000000a8 $d
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:1237   .text.Uart_Read:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:1242   .text.Uart_Read:00000000 Uart_Read
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:1343   .text.Uart_Read:00000070 $d
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:1348   .text.vBuf_Clear:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:1353   .text.vBuf_Clear:00000000 vBuf_Clear
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:1369   .text.blBufchr:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:1374   .text.blBufchr:00000000 blBufchr
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:1436   .text.blBufchr:00000038 $d
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:1441   .text.blBufcmp:00000000 $t
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:1446   .text.blBufcmp:00000000 blBufcmp
C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s:1510   .text.blBufcmp:00000044 $d
                     .debug_frame:00000010 $d
ARM GAS  C:\Users\strag\AppData\Local\Temp\ccCHPcZ2.s 			page 40



UNDEFINED SYMBOLS
NVIC_Init
RCC_APB2PeriphClockCmd
USART_OverSampling8Cmd
USART_Init
RCC_APB1PeriphClockCmd
USART_ITConfig
USART_Cmd
USART_ClearITPendingBit
