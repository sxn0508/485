ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 1
   4              		.eabi_attribute 28, 1
   5              		.fpu fpv4-sp-d16
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.thumb
  16              		.syntax unified
  17              		.file	"Uart.c"
  18              		.text
  19              	.Ltext0:
  20              		.cfi_sections	.debug_frame
  21              		.section	.text.blDrv_Buf_IsEmpty,"ax",%progbits
  22              		.align	2
  23              		.global	blDrv_Buf_IsEmpty
  24              		.thumb
  25              		.thumb_func
  27              	blDrv_Buf_IsEmpty:
  28              	.LFB112:
  29              		.file 1 "../user/source/Uart.c"
   1:../user/source/Uart.c **** /*********************************************************************** 
   2:../user/source/Uart.c **** * Copyright (c) 2012,»ý³Éµç×Ó¹É·ÝÓÐÏÞ¹«Ë¾ All rights reserved.
   3:../user/source/Uart.c **** *
   4:../user/source/Uart.c **** * ÎÄ¼þÃû³Æ£º UART.c
   5:../user/source/Uart.c **** * Ãè    Êö£º ´®¿ÚÍ¨ÐÅ´úÂëÎÄ¼þ
   6:../user/source/Uart.c **** * 
   7:../user/source/Uart.c **** * ÐÞ¸Ä¼ÇÂ¼£º
   8:../user/source/Uart.c **** *
   9:../user/source/Uart.c **** * V1.0£¬2016.06.19£¬
  10:../user/source/Uart.c **** ***********************************************************************/
  11:../user/source/Uart.c **** 
  12:../user/source/Uart.c **** #include "Uart.h"
  13:../user/source/Uart.c **** #include "stm32f37x_it.h"
  14:../user/source/Uart.c **** 
  15:../user/source/Uart.c **** static void vIRQ_UART_Config(void); //´®¿ÚÖÐ¶Ï³õÊ¼»¯
  16:../user/source/Uart.c **** #if 0
  17:../user/source/Uart.c **** /********************************************************************
  18:../user/source/Uart.c **** * ¹¦    ÄÜ£º´®¿Ú³õÊ¼»¯º¯Êý
  19:../user/source/Uart.c **** * Êä    Èë£ºNone
  20:../user/source/Uart.c **** * Êä    ³ö£ºNone
  21:../user/source/Uart.c **** *           
  22:../user/source/Uart.c **** * ±à Ð´ ÈË£º
  23:../user/source/Uart.c **** * ±àÐ´ÈÕÆÚ£º2016.6.23
  24:../user/source/Uart.c **** **********************************************************************/
  25:../user/source/Uart.c **** void vUart_Init(void)
  26:../user/source/Uart.c **** {
  27:../user/source/Uart.c ****     USART_InitTypeDef USART_Initstruc;
  28:../user/source/Uart.c ****     /*USART1ÅäÖÃ*/
  29:../user/source/Uart.c ****     RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART1, ENABLE);
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 2


  30:../user/source/Uart.c ****     USART_OverSampling8Cmd(USART1, ENABLE);
  31:../user/source/Uart.c ****     USART_Initstruc.USART_BaudRate = 2400;
  32:../user/source/Uart.c ****     USART_Initstruc.USART_Mode = (USART_Mode_Rx | USART_Mode_Tx);
  33:../user/source/Uart.c ****     USART_Initstruc.USART_WordLength = USART_WordLength_9b;
  34:../user/source/Uart.c ****     USART_Initstruc.USART_Parity = USART_Parity_Even;
  35:../user/source/Uart.c ****     USART_Initstruc.USART_StopBits = USART_StopBits_1;
  36:../user/source/Uart.c ****     USART_Initstruc.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
  37:../user/source/Uart.c ****     USART_Init(USART1, &USART_Initstruc);
  38:../user/source/Uart.c ****     /*USART3ÅäÖÃ*/
  39:../user/source/Uart.c ****     RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART3, ENABLE);
  40:../user/source/Uart.c ****     USART_OverSampling8Cmd(USART3, ENABLE);
  41:../user/source/Uart.c ****     USART_Initstruc.USART_BaudRate = 2400;
  42:../user/source/Uart.c ****     USART_Initstruc.USART_Mode = (USART_Mode_Rx | USART_Mode_Tx);
  43:../user/source/Uart.c ****     USART_Initstruc.USART_WordLength = USART_WordLength_9b;
  44:../user/source/Uart.c ****     USART_Initstruc.USART_Parity = USART_Parity_Even;
  45:../user/source/Uart.c ****     USART_Initstruc.USART_StopBits = USART_StopBits_1;
  46:../user/source/Uart.c ****     USART_Initstruc.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
  47:../user/source/Uart.c ****     USART_Init(USART3, &USART_Initstruc);
  48:../user/source/Uart.c ****     /*USART2ÅäÖÃÎª±ê×¼´®¿Ú*/
  49:../user/source/Uart.c ****     RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART2, ENABLE);
  50:../user/source/Uart.c ****     USART_OverSampling8Cmd(USART2, ENABLE);
  51:../user/source/Uart.c ****     USART_Initstruc.USART_BaudRate = 1200;
  52:../user/source/Uart.c ****     USART_Initstruc.USART_WordLength = USART_WordLength_9b;
  53:../user/source/Uart.c ****     USART_Initstruc.USART_StopBits = USART_StopBits_1;
  54:../user/source/Uart.c ****     USART_Initstruc.USART_Parity = USART_Parity_Even;
  55:../user/source/Uart.c ****     USART_Initstruc.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
  56:../user/source/Uart.c ****     USART_Initstruc.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;
  57:../user/source/Uart.c ****     USART_Init(USART2, &USART_Initstruc);
  58:../user/source/Uart.c ****     vIRQ_UART_Config(); //ÖÐ¶ÏÅäÖÃ,Ê¹ÄÜ
  59:../user/source/Uart.c ****     USART_ITConfig(USART1, USART_IT_RXNE, ENABLE);
  60:../user/source/Uart.c ****     USART_ITConfig(USART3, USART_IT_RXNE, ENABLE);
  61:../user/source/Uart.c ****     USART_ITConfig(USART2, USART_IT_RXNE, ENABLE);
  62:../user/source/Uart.c ****     USART_Cmd(USART1, ENABLE);
  63:../user/source/Uart.c ****     USART_Cmd(USART3, ENABLE);
  64:../user/source/Uart.c ****     USART_Cmd(USART2, ENABLE);
  65:../user/source/Uart.c **** }
  66:../user/source/Uart.c **** #endif
  67:../user/source/Uart.c **** /********************************************************************
  68:../user/source/Uart.c ****   * @brief ´®¿ÚÖÐ¶Ï³õÊ¼»¯º¯Êý
  69:../user/source/Uart.c ****   * @param  None
  70:../user/source/Uart.c ****   * @retval None
  71:../user/source/Uart.c ****   *******************************************************************/
  72:../user/source/Uart.c **** void vIRQ_UART_Config(void)
  73:../user/source/Uart.c **** {
  74:../user/source/Uart.c ****     /*¶¨ÒåÖÐ¶Ï½á¹¹Ìå*/
  75:../user/source/Uart.c ****     NVIC_InitTypeDef NVIC_Initstruc;
  76:../user/source/Uart.c ****     /*ÅäÖÃ´®¿Ú1ÖÐ¶Ï*/
  77:../user/source/Uart.c ****     NVIC_Initstruc.NVIC_IRQChannel = USART1_IRQn;
  78:../user/source/Uart.c ****     NVIC_Initstruc.NVIC_IRQChannelPreemptionPriority = 1;
  79:../user/source/Uart.c ****     NVIC_Initstruc.NVIC_IRQChannelSubPriority = 1;
  80:../user/source/Uart.c ****     NVIC_Initstruc.NVIC_IRQChannelCmd = ENABLE;
  81:../user/source/Uart.c ****     NVIC_Init(&NVIC_Initstruc);
  82:../user/source/Uart.c ****     /*ÅäÖÃ´®¿Ú3ÖÐ¶Ï*/
  83:../user/source/Uart.c ****     NVIC_Initstruc.NVIC_IRQChannel = USART3_IRQn;
  84:../user/source/Uart.c ****     NVIC_Initstruc.NVIC_IRQChannelSubPriority = 0;
  85:../user/source/Uart.c ****     NVIC_Init(&NVIC_Initstruc);
  86:../user/source/Uart.c ****     /*ÅäÖÃ´®¿Ú2ÖÐ¶Ï*/
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 3


  87:../user/source/Uart.c ****     NVIC_Initstruc.NVIC_IRQChannel = USART2_IRQn;
  88:../user/source/Uart.c ****     NVIC_Initstruc.NVIC_IRQChannelSubPriority = 2;
  89:../user/source/Uart.c ****     NVIC_Init(&NVIC_Initstruc);
  90:../user/source/Uart.c **** }
  91:../user/source/Uart.c **** /********************************************************************
  92:../user/source/Uart.c **** * ¹¦    ÄÜ£ºÅÐ¶ÏÇý¶¯²ã»º´æÊÇ·ñÎª¿Õ
  93:../user/source/Uart.c **** * Êä    Èë£ºÇý¶¯²ã»º´æ½á¹¹ÌåµØÖ·
  94:../user/source/Uart.c **** * Êä    ³ö£ºtrue/false
  95:../user/source/Uart.c **** *           
  96:../user/source/Uart.c **** * ±à Ð´ ÈË£º
  97:../user/source/Uart.c **** * ±àÐ´ÈÕÆÚ£º2016.6.28
  98:../user/source/Uart.c **** **********************************************************************/
  99:../user/source/Uart.c **** bool blDrv_Buf_IsEmpty(const struct ucbuf *ucdrv_buf)
 100:../user/source/Uart.c **** {
  30              		.loc 1 100 0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
  35              	.LVL0:
 101:../user/source/Uart.c ****     if (ucdrv_buf->rd == ucdrv_buf->wr)
  36              		.loc 1 101 0
  37 0000 D0F8E823 		ldr	r2, [r0, #1000]
  38 0004 D0F8EC33 		ldr	r3, [r0, #1004]
  39 0008 9A42     		cmp	r2, r3
  40 000a 01D1     		bne	.L3
 102:../user/source/Uart.c ****         return true;
  41              		.loc 1 102 0
  42 000c 0120     		movs	r0, #1
  43              	.LVL1:
  44 000e 7047     		bx	lr
  45              	.LVL2:
  46              	.L3:
 103:../user/source/Uart.c ****     else
 104:../user/source/Uart.c ****         return false;
  47              		.loc 1 104 0
  48 0010 0020     		movs	r0, #0
  49              	.LVL3:
 105:../user/source/Uart.c **** }
  50              		.loc 1 105 0
  51 0012 7047     		bx	lr
  52              		.cfi_endproc
  53              	.LFE112:
  55              		.section	.text.blDrv_Buf_IsFull,"ax",%progbits
  56              		.align	2
  57              		.global	blDrv_Buf_IsFull
  58              		.thumb
  59              		.thumb_func
  61              	blDrv_Buf_IsFull:
  62              	.LFB113:
 106:../user/source/Uart.c **** /********************************************************************
 107:../user/source/Uart.c **** * ¹¦    ÄÜ£ºÅÐ¶ÏÇý¶¯²ã»º´æÊÇ·ñÂú
 108:../user/source/Uart.c **** * Êä    Èë£ºÇý¶¯²ã»º´æ½á¹¹ÌåµØÖ·
 109:../user/source/Uart.c **** * Êä    ³ö£ºtrue/false
 110:../user/source/Uart.c **** *           
 111:../user/source/Uart.c **** * ±à Ð´ ÈË£º
 112:../user/source/Uart.c **** * ±àÐ´ÈÕÆÚ£º2016.6.28
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 4


 113:../user/source/Uart.c **** **********************************************************************/
 114:../user/source/Uart.c **** bool blDrv_Buf_IsFull(const struct ucbuf *ucdrv_buf)
 115:../user/source/Uart.c **** {
  63              		.loc 1 115 0
  64              		.cfi_startproc
  65              		@ args = 0, pretend = 0, frame = 0
  66              		@ frame_needed = 0, uses_anonymous_args = 0
  67              		@ link register save eliminated.
  68              	.LVL4:
 116:../user/source/Uart.c ****     if (ucdrv_buf->rd == (ucdrv_buf->wr + 1) % DRV_BUF_SIZE)
  69              		.loc 1 116 0
  70 0000 D0F8E813 		ldr	r1, [r0, #1000]
  71 0004 D0F8EC23 		ldr	r2, [r0, #1004]
  72 0008 0132     		adds	r2, r2, #1
  73 000a 074B     		ldr	r3, .L7
  74 000c A3FB0203 		umull	r0, r3, r3, r2
  75              	.LVL5:
  76 0010 9B09     		lsrs	r3, r3, #6
  77 0012 4FF47A70 		mov	r0, #1000
  78 0016 00FB1323 		mls	r3, r0, r3, r2
  79 001a 9942     		cmp	r1, r3
  80 001c 01D1     		bne	.L6
 117:../user/source/Uart.c ****         return true;
  81              		.loc 1 117 0
  82 001e 0120     		movs	r0, #1
  83 0020 7047     		bx	lr
  84              	.L6:
 118:../user/source/Uart.c ****     else
 119:../user/source/Uart.c ****         return false;
  85              		.loc 1 119 0
  86 0022 0020     		movs	r0, #0
 120:../user/source/Uart.c **** }
  87              		.loc 1 120 0
  88 0024 7047     		bx	lr
  89              	.L8:
  90 0026 00BF     		.align	2
  91              	.L7:
  92 0028 D34D6210 		.word	274877907
  93              		.cfi_endproc
  94              	.LFE113:
  96              		.section	.text.Uart_DataPut,"ax",%progbits
  97              		.align	2
  98              		.global	Uart_DataPut
  99              		.thumb
 100              		.thumb_func
 102              	Uart_DataPut:
 103              	.LFB116:
 121:../user/source/Uart.c **** /********************************************************************
 122:../user/source/Uart.c **** * ¹¦    ÄÜ£º´ÓÇý¶¯»º´æ¶ÁÈ¡Ö¸¶¨ÊýÁ¿µÄ×Ö½Ú
 123:../user/source/Uart.c **** * Êä    Èë£ºÇý¶¯»º´æ½á¹¹ÌåµØÖ·£¬Êý¾Ý»º´æ½á¹¹ÌåµØÖ·£¬¶ÁÈ¡×Ö½ÚÊý
 124:../user/source/Uart.c **** * Êä    ³ö£ºtrue/false
 125:../user/source/Uart.c **** *          
 126:../user/source/Uart.c **** * ±à Ð´ ÈË£ºÍõ¾ýÁú
 127:../user/source/Uart.c **** * ±àÐ´ÈÕÆÚ£º2016.6.28
 128:../user/source/Uart.c **** **********************************************************************/
 129:../user/source/Uart.c **** bool ucDrv_Buf_GetBytes(struct ucbuf *ucdrv_buf, uint8_t *ucdata_buf, uint16_t length)
 130:../user/source/Uart.c **** {
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 5


 131:../user/source/Uart.c ****     uint16_t i;
 132:../user/source/Uart.c ****     if (uwBuf_UnReadLen(ucdrv_buf) >= length)
 133:../user/source/Uart.c ****     {
 134:../user/source/Uart.c ****         for (i = 0; i < length; i++)
 135:../user/source/Uart.c ****         {
 136:../user/source/Uart.c ****             *(ucdata_buf + i) = ucdrv_buf->data[ucdrv_buf->rd];
 137:../user/source/Uart.c ****             ucdrv_buf->rd = (ucdrv_buf->rd + 1) % DRV_BUF_SIZE;
 138:../user/source/Uart.c ****         }
 139:../user/source/Uart.c ****         return true;
 140:../user/source/Uart.c ****     }
 141:../user/source/Uart.c ****     else
 142:../user/source/Uart.c ****         return false;
 143:../user/source/Uart.c **** }
 144:../user/source/Uart.c **** /********************************************************************
 145:../user/source/Uart.c **** * ¹¦    ÄÜ£ºÏòÇý¶¯»º´æÐ´Ö¸¶¨ÊýÁ¿µÄ×Ö½Ú
 146:../user/source/Uart.c **** * Êä    Èë£ºÊý¾Ý»º´æ½á¹¹ÌåµØÖ·£¬Çý¶¯»º´æ½á¹¹ÌåµØÖ·£¬Ð´×Ö½ÚÊý
 147:../user/source/Uart.c **** * Êä    ³ö£ºtrue/false
 148:../user/source/Uart.c **** *          
 149:../user/source/Uart.c **** * ±à Ð´ ÈË£ºÍõ¾ýÁú
 150:../user/source/Uart.c **** * ±àÐ´ÈÕÆÚ£º2017.3.14
 151:../user/source/Uart.c **** **********************************************************************/
 152:../user/source/Uart.c **** bool ucDrv_Buf_PutBytes(uint8_t *ucdata_buf, struct ucbuf *ucdrv_buf, uint16_t length)
 153:../user/source/Uart.c **** {
 154:../user/source/Uart.c ****     uint16_t i;
 155:../user/source/Uart.c ****     if (DRV_BUF_SIZE >= uwBuf_UnReadLen(ucdrv_buf) + length)
 156:../user/source/Uart.c ****     {
 157:../user/source/Uart.c ****         for (i = 0; i < length; i++)
 158:../user/source/Uart.c ****         {
 159:../user/source/Uart.c ****             ucdrv_buf->data[ucdrv_buf->wr] = *(ucdata_buf + i);
 160:../user/source/Uart.c ****             ucdrv_buf->wr = (ucdrv_buf->wr + 1) % DRV_BUF_SIZE;
 161:../user/source/Uart.c ****         }
 162:../user/source/Uart.c ****         return true;
 163:../user/source/Uart.c ****     }
 164:../user/source/Uart.c ****     else
 165:../user/source/Uart.c ****         return false;
 166:../user/source/Uart.c **** }
 167:../user/source/Uart.c **** /********************************************************************
 168:../user/source/Uart.c **** * ¹¦    ÄÜ£º´®¿Ú·¢ËÍ£¨Ê¹ÓÃÖÐ¶Ï¹¦ÄÜ£©
 169:../user/source/Uart.c **** * Êä    Èë£ºUSART_X
 170:../user/source/Uart.c **** * Êä    ³ö£ºvoid
 171:../user/source/Uart.c **** *           
 172:../user/source/Uart.c **** * ±à Ð´ ÈË£º
 173:../user/source/Uart.c **** * ±àÐ´ÈÕÆÚ£º2016.6.28
 174:../user/source/Uart.c **** **********************************************************************/
 175:../user/source/Uart.c **** void Uart_DataPut(USART_TypeDef *USART_X)
 176:../user/source/Uart.c **** {
 104              		.loc 1 176 0
 105              		.cfi_startproc
 106              		@ args = 0, pretend = 0, frame = 0
 107              		@ frame_needed = 0, uses_anonymous_args = 0
 108              	.LVL6:
 109 0000 08B5     		push	{r3, lr}
 110              	.LCFI0:
 111              		.cfi_def_cfa_offset 8
 112              		.cfi_offset 3, -8
 113              		.cfi_offset 14, -4
 177:../user/source/Uart.c ****     USART_ITConfig(USART_X, USART_IT_TXE, ENABLE);
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 6


 114              		.loc 1 177 0
 115 0002 0122     		movs	r2, #1
 116 0004 0149     		ldr	r1, .L11
 117 0006 FFF7FEFF 		bl	USART_ITConfig
 118              	.LVL7:
 119 000a 08BD     		pop	{r3, pc}
 120              	.L12:
 121              		.align	2
 122              	.L11:
 123 000c 07010700 		.word	459015
 124              		.cfi_endproc
 125              	.LFE116:
 127              		.section	.text.Uart_idleReadEnable,"ax",%progbits
 128              		.align	2
 129              		.global	Uart_idleReadEnable
 130              		.thumb
 131              		.thumb_func
 133              	Uart_idleReadEnable:
 134              	.LFB122:
 178:../user/source/Uart.c **** }
 179:../user/source/Uart.c **** 
 180:../user/source/Uart.c **** #if 1
 181:../user/source/Uart.c **** /***************************************************************
 182:../user/source/Uart.c **** * º¯ÊýÃû³Æ: Uart_Write
 183:../user/source/Uart.c **** * ¹¦ÄÜÃèÊö: Ð´´®¿Ú£¬ÖÐ¶Ï·¢ËÍ£¬×î´ó·¢ËÍÊ±³¤delay
 184:../user/source/Uart.c **** * ÊäÈë²ÎÊý: uart£ºÏµÍ³´®¿Ú  buf:´æ´¢Î»ÖÃ   count£º·¢ËÍÊýÁ¿
 185:../user/source/Uart.c **** * Êä³ö²ÎÊý: ÎÞ
 186:../user/source/Uart.c **** * ·µ »Ø Öµ: > 0£ºÊµ¼Ê·¢ËÍµÄÊýÁ¿   -1£º·¢ËÍÊ§°Ü
 187:../user/source/Uart.c **** ****************************************************************/
 188:../user/source/Uart.c **** int32_t Uart_OnceWrite(UartDef *puart, const uint8_t *pbuf, uint32_t count, uint32_t ticks)
 189:../user/source/Uart.c **** {
 190:../user/source/Uart.c ****     uint32_t sendlen = 0;
 191:../user/source/Uart.c ****     uint16_t i;
 192:../user/source/Uart.c ****     //±£Ö¤count²»Îª0£¬¿ÉÖÁÉÙ¿ªÆôÒ»´Î·¢ËÍÖÐ¶Ï
 193:../user/source/Uart.c ****     if (!count || count > uwBuf_EmpLen(puart->pSndbuf))
 194:../user/source/Uart.c ****         return -1;
 195:../user/source/Uart.c ****     for (i = 0; i < count; i++)
 196:../user/source/Uart.c ****     {
 197:../user/source/Uart.c ****         puart->pSndbuf->data[puart->pSndbuf->wr] = *(pbuf + i);
 198:../user/source/Uart.c ****         puart->pSndbuf->wr = (++puart->pSndbuf->wr) % DRV_BUF_SIZE;
 199:../user/source/Uart.c ****     }
 200:../user/source/Uart.c ****     sendlen = puart->pSndbuf->rd;
 201:../user/source/Uart.c ****     //LL_USART_EnableIT_TXE(puart->handler);
 202:../user/source/Uart.c ****     USART_ITConfig(puart->handler, USART_IT_TXE, ENABLE);
 203:../user/source/Uart.c ****     while (ticks)
 204:../user/source/Uart.c ****     {
 205:../user/source/Uart.c ****         /*·¢ËÍÍê³É*/
 206:../user/source/Uart.c ****         if (!uwBuf_UnReadLen(puart->pSndbuf))
 207:../user/source/Uart.c ****             break;
 208:../user/source/Uart.c ****         if ((SysTick->CTRL & SysTick_CTRL_COUNTFLAG_Msk) != 0U)
 209:../user/source/Uart.c ****         {
 210:../user/source/Uart.c ****             ticks--;
 211:../user/source/Uart.c ****         }
 212:../user/source/Uart.c ****     }
 213:../user/source/Uart.c ****     /*¹æ¶¨Ê±¼äÄÚÎ´·¢ËÍÍê³É£¬Ò²Òª¹Ø±ÕÖÐ¶Ï*/
 214:../user/source/Uart.c ****     //LL_USART_DisableIT_TXE(puart->handler);
 215:../user/source/Uart.c ****     USART_ITConfig(puart->handler, USART_IT_TXE, DISABLE);
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 7


 216:../user/source/Uart.c ****     return (puart->pSndbuf->rd - sendlen + DRV_BUF_SIZE) % DRV_BUF_SIZE;
 217:../user/source/Uart.c **** }
 218:../user/source/Uart.c **** 
 219:../user/source/Uart.c **** /**********************************************
 220:../user/source/Uart.c ****     * º¯ÊýÃû³Æ: Uart_IdleRead
 221:../user/source/Uart.c ****     * ¹¦ÄÜÃèÊö: ¶Á´®¿Ú,×Ö½Ú¼ä¸ô´óÓÚidleMs£¬»òÕß¶ÁÈ¡ÊýÁ¿´ïµ½countÊ±½áÊø½ÓÊÕ
 222:../user/source/Uart.c ****     * ÊäÈë²ÎÊý: puart£º´®¿Ú½á¹¹ÌåÖ¸Õë  buf:´æ´¢Î»ÖÃ   count£º¶ÁÈ¡ÊýÁ¿  idle£º×Ö½Ú³¬Ê±Ê±¼äms£¬¿ÉÒÔÎª
 223:../user/source/Uart.c ****     * Êä³ö²ÎÊý: ÎÞ
 224:../user/source/Uart.c ****     * ·µ »Ø Öµ: > 0£ºÊµ¼Ê¶ÁÈ¡µÄÊýÁ¿   0£ºÎÞÊý¾Ý»òcount==0»ò´íÎó 
 225:../user/source/Uart.c ****     ****************************************************************/
 226:../user/source/Uart.c **** uint32_t Uart_IdleRead(UartDef *puart, uint8_t *buf, uint32_t count, uint32_t tickCount)
 227:../user/source/Uart.c **** {
 228:../user/source/Uart.c ****     volatile uint32_t readlen = 0;
 229:../user/source/Uart.c ****     volatile uint32_t readlenow = 0;
 230:../user/source/Uart.c ****     volatile idleTickCount;
 231:../user/source/Uart.c ****     uint16_t i;
 232:../user/source/Uart.c ****     /*¶ÁÈ¡ÊýÁ¿> 0£¬<»º´æ³¤¶È*/
 233:../user/source/Uart.c ****     if (!count || count > DRV_BUF_SIZE)
 234:../user/source/Uart.c ****     {
 235:../user/source/Uart.c ****         return 0;
 236:../user/source/Uart.c ****     }
 237:../user/source/Uart.c ****     /*±£Ö¤×îÐ¡ÑÓÊ±*/
 238:../user/source/Uart.c ****     if (tickCount < 0xFFFFFFFF)
 239:../user/source/Uart.c ****     {
 240:../user/source/Uart.c ****         idleTickCount = ++tickCount;
 241:../user/source/Uart.c ****     }
 242:../user/source/Uart.c ****     //USART_ITConfig(puart->handler, USART_IT_RXNE, ENABLE);
 243:../user/source/Uart.c ****     readlenow = uwBuf_UnReadLen(puart->pRsvbuf);
 244:../user/source/Uart.c ****     while (readlenow < count && idleTickCount > 0)
 245:../user/source/Uart.c ****     {
 246:../user/source/Uart.c ****         /*idleTickCount¼ÆÊ±ÀÛ¼õ*/
 247:../user/source/Uart.c ****         if ((SysTick->CTRL & SysTick_CTRL_COUNTFLAG_Msk) != 0U)
 248:../user/source/Uart.c ****         {
 249:../user/source/Uart.c ****             idleTickCount--;
 250:../user/source/Uart.c ****         }
 251:../user/source/Uart.c ****         readlenow = uwBuf_UnReadLen(puart->pRsvbuf);
 252:../user/source/Uart.c ****         /*readlennow ÓÐ±ä»¯£¬idleTickCountÖØÔØ*/
 253:../user/source/Uart.c ****         if (readlenow > readlen)
 254:../user/source/Uart.c ****         {
 255:../user/source/Uart.c ****             idleTickCount = tickCount;
 256:../user/source/Uart.c ****             readlen = readlenow;
 257:../user/source/Uart.c ****         }
 258:../user/source/Uart.c ****     }
 259:../user/source/Uart.c ****     //USART_ITConfig(puart->handler, USART_IT_RXNE, DISABLE);
 260:../user/source/Uart.c ****     if (readlen)
 261:../user/source/Uart.c ****     {
 262:../user/source/Uart.c ****         /*Êµ¼Ê¶Áµ½µÄ³¤¶È*/
 263:../user/source/Uart.c ****         readlen = (readlen < count ? readlen : count);
 264:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 265:../user/source/Uart.c ****         {
 266:../user/source/Uart.c ****             *(buf + i) = puart->pRsvbuf->data[puart->pRsvbuf->rd];
 267:../user/source/Uart.c ****             puart->pRsvbuf->rd = (++puart->pRsvbuf->rd) % DRV_BUF_SIZE;
 268:../user/source/Uart.c ****         }
 269:../user/source/Uart.c ****     }
 270:../user/source/Uart.c ****     return readlen;
 271:../user/source/Uart.c **** }
 272:../user/source/Uart.c **** 
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 8


 273:../user/source/Uart.c **** /**********************************************
 274:../user/source/Uart.c ****     * º¯ÊýÃû³Æ: Uart_OnceRead
 275:../user/source/Uart.c ****     * ¹¦ÄÜÃèÊö: ¶Á´®¿Ú,¶Áµ½Ö¸¶¨ÊýÁ¿»ò¶ÁÈ¡Ê±¼ä³¬Ê±ºóÍË³ö
 276:../user/source/Uart.c ****     * ÊäÈë²ÎÊý: puart£º´®¿Ú½á¹¹ÌåÖ¸Õë  buf:´æ´¢Î»ÖÃ   count£º¶ÁÈ¡ÊýÁ¿  delay£º×Ö½Ú³¬Ê±Ê±¼äms£¬¿ÉÒÔÎ
 277:../user/source/Uart.c ****     * Êä³ö²ÎÊý: ÎÞ
 278:../user/source/Uart.c ****     * ·µ »Ø Öµ: > 0£ºÊµ¼Ê¶ÁÈ¡µÄÊýÁ¿   0£ºÎÞÊý¾Ý»òcount==0»ò´íÎó 
 279:../user/source/Uart.c ****     ****************************************************************/
 280:../user/source/Uart.c **** uint32_t Uart_OnceRead(UartDef *puart, uint8_t *buf, uint32_t count, uint32_t tickCount)
 281:../user/source/Uart.c **** {
 282:../user/source/Uart.c ****     volatile uint32_t readlen = 0;
 283:../user/source/Uart.c ****     uint16_t i;
 284:../user/source/Uart.c ****     /*¶ÁÈ¡ÊýÁ¿> 0£¬<»º´æ³¤¶È*/
 285:../user/source/Uart.c ****     if (!count || count > DRV_BUF_SIZE)
 286:../user/source/Uart.c ****     {
 287:../user/source/Uart.c ****         return 0;
 288:../user/source/Uart.c ****     }
 289:../user/source/Uart.c ****     USART_ITConfig(puart->handler, USART_IT_RXNE, ENABLE);
 290:../user/source/Uart.c ****     readlen = uwBuf_UnReadLen(puart->pRsvbuf);
 291:../user/source/Uart.c ****     while (tickCount)
 292:../user/source/Uart.c ****     {
 293:../user/source/Uart.c ****         readlen = uwBuf_UnReadLen(puart->pRsvbuf);
 294:../user/source/Uart.c ****         /*¶àÓàµÄ×Ö½Ú±¾´Î¶ªÆú£¬²¢µ÷ÓÃBufClear·ÀÖ¹ºóÃæÔÙ¶ÁÈ¡*/
 295:../user/source/Uart.c ****         if (readlen >= count)
 296:../user/source/Uart.c ****             break;
 297:../user/source/Uart.c ****         if ((SysTick->CTRL & SysTick_CTRL_COUNTFLAG_Msk) != 0U)
 298:../user/source/Uart.c ****         {
 299:../user/source/Uart.c ****             tickCount--;
 300:../user/source/Uart.c ****         }
 301:../user/source/Uart.c ****     }
 302:../user/source/Uart.c ****     USART_ITConfig(puart->handler, USART_IT_RXNE, DISABLE);
 303:../user/source/Uart.c ****     if (readlen)
 304:../user/source/Uart.c ****     {
 305:../user/source/Uart.c ****         /*Êµ¼Ê¶Áµ½µÄ³¤¶È*/
 306:../user/source/Uart.c ****         readlen = (readlen < count ? readlen : count);
 307:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 308:../user/source/Uart.c ****         {
 309:../user/source/Uart.c ****             *(buf + i) = puart->pRsvbuf->data[puart->pRsvbuf->rd];
 310:../user/source/Uart.c ****             puart->pRsvbuf->rd = (++puart->pRsvbuf->rd) % DRV_BUF_SIZE;
 311:../user/source/Uart.c ****         }
 312:../user/source/Uart.c ****     }
 313:../user/source/Uart.c ****     return readlen;
 314:../user/source/Uart.c **** }
 315:../user/source/Uart.c **** 
 316:../user/source/Uart.c **** /***************************************************************
 317:../user/source/Uart.c **** * º¯ÊýÃû³Æ: Uart_Write
 318:../user/source/Uart.c **** * ¹¦ÄÜÃèÊö: Ð´´®¿Ú
 319:../user/source/Uart.c **** * ÊäÈë²ÎÊý: uart£ºÏµÍ³´®¿Ú  buf:´æ´¢Î»ÖÃ   count£º·¢ËÍÊýÁ¿
 320:../user/source/Uart.c **** * Êä³ö²ÎÊý: ÎÞ
 321:../user/source/Uart.c **** * ·µ »Ø Öµ: > 0£ºÊµ¼Ê·¢ËÍµÄÊýÁ¿   -1£º·¢ËÍÊ§°Ü
 322:../user/source/Uart.c **** ****************************************************************/
 323:../user/source/Uart.c **** 
 324:../user/source/Uart.c **** void Uart_Write(UartDef *puart, const uint8_t *pbuf, uint32_t count)
 325:../user/source/Uart.c **** {
 326:../user/source/Uart.c ****     uint32_t sendlen = 0;
 327:../user/source/Uart.c ****     uint16_t i;
 328:../user/source/Uart.c ****     //±£Ö¤count²»Îª0£¬¿ÉÖÁÉÙ¿ªÆôÒ»´Î·¢ËÍÖÐ¶Ï
 329:../user/source/Uart.c ****     if (!count || count > uwBuf_EmpLen(puart->pSndbuf))
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 9


 330:../user/source/Uart.c ****         return;
 331:../user/source/Uart.c ****     for (i = 0; i < count; i++)
 332:../user/source/Uart.c ****     {
 333:../user/source/Uart.c ****         puart->pSndbuf->data[puart->pSndbuf->wr] = *(pbuf + i);
 334:../user/source/Uart.c ****         puart->pSndbuf->wr = (++puart->pSndbuf->wr) % DRV_BUF_SIZE;
 335:../user/source/Uart.c ****     }
 336:../user/source/Uart.c ****     sendlen = puart->pSndbuf->rd;
 337:../user/source/Uart.c ****     USART_ITConfig(puart->handler, USART_IT_TXE, ENABLE);
 338:../user/source/Uart.c **** }
 339:../user/source/Uart.c **** 
 340:../user/source/Uart.c **** /**********************************************
 341:../user/source/Uart.c ****     * º¯ÊýÃû³Æ: Uart_Read
 342:../user/source/Uart.c ****     * ¹¦ÄÜÃèÊö: ¶Á´®¿Ú£¬Ö±½Ó´Ó»º´æ¶ÁÈ¡£¬»º´æ×Ô¶¯½ÓÊÕ
 343:../user/source/Uart.c ****     * ÊäÈë²ÎÊý: puart£º´®¿Ú½á¹¹ÌåÖ¸Õë  buf:´æ´¢Î»ÖÃ   count£º¶ÁÈ¡ÊýÁ¿
 344:../user/source/Uart.c ****     * Êä³ö²ÎÊý: ÎÞ
 345:../user/source/Uart.c ****     * ·µ »Ø Öµ: > 0£ºÊµ¼Ê¶ÁÈ¡µÄÊýÁ¿   0£ºÎÞÊý¾Ý»òcount==0»ò´íÎó 
 346:../user/source/Uart.c ****     ****************************************************************/
 347:../user/source/Uart.c **** uint32_t Uart_Read(UartDef *puart, uint8_t *buf, uint32_t count)
 348:../user/source/Uart.c **** {
 349:../user/source/Uart.c ****     volatile uint32_t readlen = 0;
 350:../user/source/Uart.c ****     uint16_t i;
 351:../user/source/Uart.c ****     if (!count || count > 0xFFFF)
 352:../user/source/Uart.c ****         return 0;
 353:../user/source/Uart.c ****     readlen = uwBuf_UnReadLen(puart->pRsvbuf);
 354:../user/source/Uart.c ****     if (readlen)
 355:../user/source/Uart.c ****     {
 356:../user/source/Uart.c ****         /*Êµ¼Ê¶Áµ½µÄ³¤¶È*/
 357:../user/source/Uart.c ****         readlen = (readlen < count ? readlen : count);
 358:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 359:../user/source/Uart.c ****         {
 360:../user/source/Uart.c ****             *(buf + i) = puart->pRsvbuf->data[puart->pRsvbuf->rd];
 361:../user/source/Uart.c ****             puart->pRsvbuf->rd = (++puart->pRsvbuf->rd) % DRV_BUF_SIZE;
 362:../user/source/Uart.c ****         }
 363:../user/source/Uart.c ****     }
 364:../user/source/Uart.c ****     return readlen;
 365:../user/source/Uart.c **** }
 366:../user/source/Uart.c **** /**********************************************
 367:../user/source/Uart.c **** * º¯ÊýÃû³Æ: Uart_ReadITEnable
 368:../user/source/Uart.c **** * ¹¦ÄÜÃèÊö: ´®¿ÚIdleÖÐ¶Ï·½Ê½Á¬Ðø½ÓÊÕÊÇ·ñÊ¹ÄÜ
 369:../user/source/Uart.c **** * ÊäÈë²ÎÊý: puart£º´®¿Ú½á¹¹ÌåÖ¸Õë cmd:EN/DEN 
 370:../user/source/Uart.c **** * Êä³ö²ÎÊý: 
 371:../user/source/Uart.c **** * ·µ »Ø Öµ: 
 372:../user/source/Uart.c **** ****************************************************************/
 373:../user/source/Uart.c **** void Uart_idleReadEnable(UartDef *puart)
 374:../user/source/Uart.c **** {
 135              		.loc 1 374 0
 136              		.cfi_startproc
 137              		@ args = 0, pretend = 0, frame = 0
 138              		@ frame_needed = 0, uses_anonymous_args = 0
 139              	.LVL8:
 140 0000 38B5     		push	{r3, r4, r5, lr}
 141              	.LCFI1:
 142              		.cfi_def_cfa_offset 16
 143              		.cfi_offset 3, -16
 144              		.cfi_offset 4, -12
 145              		.cfi_offset 5, -8
 146              		.cfi_offset 14, -4
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 10


 147 0002 0446     		mov	r4, r0
 375:../user/source/Uart.c ****     uint32_t regClear;
 376:../user/source/Uart.c ****     //USART_ITConfig(puart->handler, USART_IT_RXNE, ENABLE);
 377:../user/source/Uart.c ****     regClear = puart->handler->ISR;
 148              		.loc 1 377 0
 149 0004 0068     		ldr	r0, [r0]
 150              	.LVL9:
 151 0006 C369     		ldr	r3, [r0, #28]
 378:../user/source/Uart.c ****     USART_ClearITPendingBit(puart->handler, USART_IT_IDLE);
 152              		.loc 1 378 0
 153 0008 044D     		ldr	r5, .L15
 154 000a 2946     		mov	r1, r5
 155 000c FFF7FEFF 		bl	USART_ClearITPendingBit
 156              	.LVL10:
 379:../user/source/Uart.c ****     USART_ITConfig(puart->handler, USART_IT_IDLE, ENABLE);
 157              		.loc 1 379 0
 158 0010 0122     		movs	r2, #1
 159 0012 2946     		mov	r1, r5
 160 0014 2068     		ldr	r0, [r4]
 161 0016 FFF7FEFF 		bl	USART_ITConfig
 162              	.LVL11:
 163 001a 38BD     		pop	{r3, r4, r5, pc}
 164              	.LVL12:
 165              	.L16:
 166              		.align	2
 167              	.L15:
 168 001c 04010400 		.word	262404
 169              		.cfi_endproc
 170              	.LFE122:
 172              		.section	.text.Uart_idleReadDisable,"ax",%progbits
 173              		.align	2
 174              		.global	Uart_idleReadDisable
 175              		.thumb
 176              		.thumb_func
 178              	Uart_idleReadDisable:
 179              	.LFB123:
 380:../user/source/Uart.c **** }
 381:../user/source/Uart.c **** /**********************************************
 382:../user/source/Uart.c **** * º¯ÊýÃû³Æ: Uart_ReadITdisable
 383:../user/source/Uart.c **** * ¹¦ÄÜÃèÊö: ´®¿ÚIdleÖÐ¶Ï·½Ê½Á¬Ðø½ÓÊÕÊÇ·ñÊ¹ÄÜ
 384:../user/source/Uart.c **** * ÊäÈë²ÎÊý: puart£º´®¿Ú½á¹¹ÌåÖ¸Õë cmd:EN/DEN 
 385:../user/source/Uart.c **** * Êä³ö²ÎÊý: 
 386:../user/source/Uart.c **** * ·µ »Ø Öµ: 
 387:../user/source/Uart.c **** ****************************************************************/
 388:../user/source/Uart.c **** void Uart_idleReadDisable(UartDef *puart)
 389:../user/source/Uart.c **** {
 180              		.loc 1 389 0
 181              		.cfi_startproc
 182              		@ args = 0, pretend = 0, frame = 0
 183              		@ frame_needed = 0, uses_anonymous_args = 0
 184              	.LVL13:
 185 0000 38B5     		push	{r3, r4, r5, lr}
 186              	.LCFI2:
 187              		.cfi_def_cfa_offset 16
 188              		.cfi_offset 3, -16
 189              		.cfi_offset 4, -12
 190              		.cfi_offset 5, -8
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 11


 191              		.cfi_offset 14, -4
 192 0002 0446     		mov	r4, r0
 390:../user/source/Uart.c ****     uint32_t regClear;
 391:../user/source/Uart.c ****     //USART_ITConfig(puart->handler, USART_IT_RXNE, DISABLE);
 392:../user/source/Uart.c ****     USART_ITConfig(puart->handler, USART_IT_IDLE, DISABLE);
 193              		.loc 1 392 0
 194 0004 064D     		ldr	r5, .L19
 195 0006 0022     		movs	r2, #0
 196 0008 2946     		mov	r1, r5
 197 000a 0068     		ldr	r0, [r0]
 198              	.LVL14:
 199 000c FFF7FEFF 		bl	USART_ITConfig
 200              	.LVL15:
 393:../user/source/Uart.c ****     USART_ClearITPendingBit(puart->handler, USART_IT_IDLE);
 201              		.loc 1 393 0
 202 0010 2946     		mov	r1, r5
 203 0012 2068     		ldr	r0, [r4]
 204 0014 FFF7FEFF 		bl	USART_ClearITPendingBit
 205              	.LVL16:
 394:../user/source/Uart.c ****     regClear = puart->handler->ISR;
 206              		.loc 1 394 0
 207 0018 2368     		ldr	r3, [r4]
 208 001a DB69     		ldr	r3, [r3, #28]
 209 001c 38BD     		pop	{r3, r4, r5, pc}
 210              	.LVL17:
 211              	.L20:
 212 001e 00BF     		.align	2
 213              	.L19:
 214 0020 04010400 		.word	262404
 215              		.cfi_endproc
 216              	.LFE123:
 218              		.section	.text.uwBuf_EmpLen,"ax",%progbits
 219              		.align	2
 220              		.global	uwBuf_EmpLen
 221              		.thumb
 222              		.thumb_func
 224              	uwBuf_EmpLen:
 225              	.LFB124:
 395:../user/source/Uart.c **** }
 396:../user/source/Uart.c **** 
 397:../user/source/Uart.c **** /*******************************************************
 398:../user/source/Uart.c **** * ¹¦    ÄÜ£º²éÑ¯Çý¶¯²ã»º´æÊ£Óà¿Õ¼ä
 399:../user/source/Uart.c **** * Êä    Èë£ºÊý¾Ý»º´æ½á¹¹ÌåµØÖ·
 400:../user/source/Uart.c **** * Êä    ³ö£ºuint32_t
 401:../user/source/Uart.c **** *           
 402:../user/source/Uart.c **** * ±à Ð´ ÈË£º
 403:../user/source/Uart.c **** * ±àÐ´ÈÕÆÚ£º2018Äê9ÔÂ7ÈÕ11:04:55
 404:../user/source/Uart.c **** **********************************************************************/
 405:../user/source/Uart.c **** uint32_t uwBuf_EmpLen(const struct ucbuf *buf)
 406:../user/source/Uart.c **** {
 226              		.loc 1 406 0
 227              		.cfi_startproc
 228              		@ args = 0, pretend = 0, frame = 0
 229              		@ frame_needed = 0, uses_anonymous_args = 0
 230              		@ link register save eliminated.
 231              	.LVL18:
 407:../user/source/Uart.c ****     /*return ((buf->rd + BUF_SIZE - buf->wr) % BUF_SIZE -1);*/
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 12


 408:../user/source/Uart.c ****     return ((buf->rd + DRV_BUF_SIZE - buf->wr - 1) % DRV_BUF_SIZE);
 232              		.loc 1 408 0
 233 0000 D0F8E833 		ldr	r3, [r0, #1000]
 234 0004 D0F8EC03 		ldr	r0, [r0, #1004]
 235              	.LVL19:
 236 0008 1B1A     		subs	r3, r3, r0
 237 000a 03F2E733 		addw	r3, r3, #999
 238 000e 044A     		ldr	r2, .L22
 239 0010 A2FB0312 		umull	r1, r2, r2, r3
 240 0014 9209     		lsrs	r2, r2, #6
 409:../user/source/Uart.c **** }
 241              		.loc 1 409 0
 242 0016 4FF47A70 		mov	r0, #1000
 243 001a 00FB1230 		mls	r0, r0, r2, r3
 244 001e 7047     		bx	lr
 245              	.L23:
 246              		.align	2
 247              	.L22:
 248 0020 D34D6210 		.word	274877907
 249              		.cfi_endproc
 250              	.LFE124:
 252              		.section	.text.Uart_Write,"ax",%progbits
 253              		.align	2
 254              		.global	Uart_Write
 255              		.thumb
 256              		.thumb_func
 258              	Uart_Write:
 259              	.LFB120:
 325:../user/source/Uart.c ****     uint32_t sendlen = 0;
 260              		.loc 1 325 0
 261              		.cfi_startproc
 262              		@ args = 0, pretend = 0, frame = 0
 263              		@ frame_needed = 0, uses_anonymous_args = 0
 264              	.LVL20:
 329:../user/source/Uart.c ****         return;
 265              		.loc 1 329 0
 266 0000 3AB3     		cbz	r2, .L29
 325:../user/source/Uart.c ****     uint32_t sendlen = 0;
 267              		.loc 1 325 0 discriminator 1
 268 0002 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 269              	.LCFI3:
 270              		.cfi_def_cfa_offset 24
 271              		.cfi_offset 3, -24
 272              		.cfi_offset 4, -20
 273              		.cfi_offset 5, -16
 274              		.cfi_offset 6, -12
 275              		.cfi_offset 7, -8
 276              		.cfi_offset 14, -4
 277 0004 1646     		mov	r6, r2
 278 0006 0F46     		mov	r7, r1
 279 0008 0546     		mov	r5, r0
 329:../user/source/Uart.c ****         return;
 280              		.loc 1 329 0 discriminator 1
 281 000a 8068     		ldr	r0, [r0, #8]
 282              	.LVL21:
 283 000c FFF7FEFF 		bl	uwBuf_EmpLen
 284              	.LVL22:
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 13


 285 0010 8642     		cmp	r6, r0
 286 0012 1DD8     		bhi	.L24
 287 0014 0024     		movs	r4, #0
 288 0016 14E0     		b	.L26
 289              	.LVL23:
 290              	.L27:
 333:../user/source/Uart.c ****         puart->pSndbuf->wr = (++puart->pSndbuf->wr) % DRV_BUF_SIZE;
 291              		.loc 1 333 0 discriminator 3
 292 0018 AB68     		ldr	r3, [r5, #8]
 293 001a D3F8EC23 		ldr	r2, [r3, #1004]
 294 001e 395D     		ldrb	r1, [r7, r4]	@ zero_extendqisi2
 295 0020 9954     		strb	r1, [r3, r2]
 334:../user/source/Uart.c ****     }
 296              		.loc 1 334 0 discriminator 3
 297 0022 A968     		ldr	r1, [r5, #8]
 298 0024 D1F8EC23 		ldr	r2, [r1, #1004]
 299 0028 0132     		adds	r2, r2, #1
 300 002a 0A4B     		ldr	r3, .L30
 301 002c A3FB0203 		umull	r0, r3, r3, r2
 302 0030 9B09     		lsrs	r3, r3, #6
 303 0032 4FF47A70 		mov	r0, #1000
 304 0036 00FB1323 		mls	r3, r0, r3, r2
 305 003a C1F8EC33 		str	r3, [r1, #1004]
 331:../user/source/Uart.c ****     {
 306              		.loc 1 331 0 discriminator 3
 307 003e 0134     		adds	r4, r4, #1
 308              	.LVL24:
 309 0040 A4B2     		uxth	r4, r4
 310              	.LVL25:
 311              	.L26:
 331:../user/source/Uart.c ****     {
 312              		.loc 1 331 0 is_stmt 0 discriminator 1
 313 0042 A642     		cmp	r6, r4
 314 0044 E8D8     		bhi	.L27
 315              	.LVL26:
 337:../user/source/Uart.c **** }
 316              		.loc 1 337 0 is_stmt 1
 317 0046 0122     		movs	r2, #1
 318 0048 0349     		ldr	r1, .L30+4
 319 004a 2868     		ldr	r0, [r5]
 320 004c FFF7FEFF 		bl	USART_ITConfig
 321              	.LVL27:
 322              	.L24:
 323 0050 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 324              	.LVL28:
 325              	.L29:
 326              	.LCFI4:
 327              		.cfi_def_cfa_offset 0
 328              		.cfi_restore 3
 329              		.cfi_restore 4
 330              		.cfi_restore 5
 331              		.cfi_restore 6
 332              		.cfi_restore 7
 333              		.cfi_restore 14
 334 0052 7047     		bx	lr
 335              	.L31:
 336              		.align	2
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 14


 337              	.L30:
 338 0054 D34D6210 		.word	274877907
 339 0058 07010700 		.word	459015
 340              		.cfi_endproc
 341              	.LFE120:
 343              		.section	.text.uwBuf_UnReadLen,"ax",%progbits
 344              		.align	2
 345              		.global	uwBuf_UnReadLen
 346              		.thumb
 347              		.thumb_func
 349              	uwBuf_UnReadLen:
 350              	.LFB125:
 410:../user/source/Uart.c **** /********************************************************************
 411:../user/source/Uart.c **** * ¹¦    ÄÜ£º²éÑ¯»º´æÖÐÎ´¶ÁµÄ×Ö½ÚÊý
 412:../user/source/Uart.c **** * Êä    Èë£ºÊý¾Ý»º´æ½á¹¹ÌåµØÖ·
 413:../user/source/Uart.c **** * Êä    ³ö£ºuint32_t
 414:../user/source/Uart.c **** *          
 415:../user/source/Uart.c **** * ±à Ð´ ÈË£º
 416:../user/source/Uart.c **** * ±àÐ´ÈÕÆÚ£º2016.6.28
 417:../user/source/Uart.c **** **********************************************************************/
 418:../user/source/Uart.c **** uint32_t uwBuf_UnReadLen(const struct ucbuf *buf)
 419:../user/source/Uart.c **** {
 351              		.loc 1 419 0
 352              		.cfi_startproc
 353              		@ args = 0, pretend = 0, frame = 0
 354              		@ frame_needed = 0, uses_anonymous_args = 0
 355              		@ link register save eliminated.
 356              	.LVL29:
 420:../user/source/Uart.c ****     return (buf->wr - buf->rd + DRV_BUF_SIZE) % DRV_BUF_SIZE;
 357              		.loc 1 420 0
 358 0000 D0F8EC33 		ldr	r3, [r0, #1004]
 359 0004 D0F8E803 		ldr	r0, [r0, #1000]
 360              	.LVL30:
 361 0008 1B1A     		subs	r3, r3, r0
 362 000a 03F57A73 		add	r3, r3, #1000
 363 000e 044A     		ldr	r2, .L33
 364 0010 A2FB0312 		umull	r1, r2, r2, r3
 365 0014 9209     		lsrs	r2, r2, #6
 421:../user/source/Uart.c **** }
 366              		.loc 1 421 0
 367 0016 4FF47A70 		mov	r0, #1000
 368 001a 00FB1230 		mls	r0, r0, r2, r3
 369 001e 7047     		bx	lr
 370              	.L34:
 371              		.align	2
 372              	.L33:
 373 0020 D34D6210 		.word	274877907
 374              		.cfi_endproc
 375              	.LFE125:
 377              		.section	.text.ucDrv_Buf_GetBytes,"ax",%progbits
 378              		.align	2
 379              		.global	ucDrv_Buf_GetBytes
 380              		.thumb
 381              		.thumb_func
 383              	ucDrv_Buf_GetBytes:
 384              	.LFB114:
 130:../user/source/Uart.c ****     uint16_t i;
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 15


 385              		.loc 1 130 0
 386              		.cfi_startproc
 387              		@ args = 0, pretend = 0, frame = 0
 388              		@ frame_needed = 0, uses_anonymous_args = 0
 389              	.LVL31:
 390 0000 70B5     		push	{r4, r5, r6, lr}
 391              	.LCFI5:
 392              		.cfi_def_cfa_offset 16
 393              		.cfi_offset 4, -16
 394              		.cfi_offset 5, -12
 395              		.cfi_offset 6, -8
 396              		.cfi_offset 14, -4
 397 0002 0446     		mov	r4, r0
 398 0004 0E46     		mov	r6, r1
 399 0006 1546     		mov	r5, r2
 132:../user/source/Uart.c ****     {
 400              		.loc 1 132 0
 401 0008 FFF7FEFF 		bl	uwBuf_UnReadLen
 402              	.LVL32:
 403 000c A842     		cmp	r0, r5
 404 000e 15D2     		bcs	.L39
 142:../user/source/Uart.c **** }
 405              		.loc 1 142 0
 406 0010 0020     		movs	r0, #0
 407 0012 70BD     		pop	{r4, r5, r6, pc}
 408              	.LVL33:
 409              	.L38:
 136:../user/source/Uart.c ****             ucdrv_buf->rd = (ucdrv_buf->rd + 1) % DRV_BUF_SIZE;
 410              		.loc 1 136 0 discriminator 3
 411 0014 D4F8E833 		ldr	r3, [r4, #1000]
 412 0018 E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 413 001a B354     		strb	r3, [r6, r2]
 137:../user/source/Uart.c ****         }
 414              		.loc 1 137 0 discriminator 3
 415 001c D4F8E813 		ldr	r1, [r4, #1000]
 416 0020 0131     		adds	r1, r1, #1
 417 0022 094B     		ldr	r3, .L41
 418 0024 A3FB0103 		umull	r0, r3, r3, r1
 419 0028 9B09     		lsrs	r3, r3, #6
 420 002a 4FF47A70 		mov	r0, #1000
 421 002e 00FB1313 		mls	r3, r0, r3, r1
 422 0032 C4F8E833 		str	r3, [r4, #1000]
 134:../user/source/Uart.c ****         {
 423              		.loc 1 134 0 discriminator 3
 424 0036 0132     		adds	r2, r2, #1
 425              	.LVL34:
 426 0038 92B2     		uxth	r2, r2
 427              	.LVL35:
 428 003a 00E0     		b	.L36
 429              	.LVL36:
 430              	.L39:
 431 003c 0022     		movs	r2, #0
 432              	.L36:
 433              	.LVL37:
 134:../user/source/Uart.c ****         {
 434              		.loc 1 134 0 is_stmt 0 discriminator 1
 435 003e AA42     		cmp	r2, r5
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 16


 436 0040 E8D3     		bcc	.L38
 139:../user/source/Uart.c ****     }
 437              		.loc 1 139 0 is_stmt 1
 438 0042 0120     		movs	r0, #1
 143:../user/source/Uart.c **** /********************************************************************
 439              		.loc 1 143 0
 440 0044 70BD     		pop	{r4, r5, r6, pc}
 441              	.LVL38:
 442              	.L42:
 443 0046 00BF     		.align	2
 444              	.L41:
 445 0048 D34D6210 		.word	274877907
 446              		.cfi_endproc
 447              	.LFE114:
 449              		.section	.text.ucDrv_Buf_PutBytes,"ax",%progbits
 450              		.align	2
 451              		.global	ucDrv_Buf_PutBytes
 452              		.thumb
 453              		.thumb_func
 455              	ucDrv_Buf_PutBytes:
 456              	.LFB115:
 153:../user/source/Uart.c ****     uint16_t i;
 457              		.loc 1 153 0
 458              		.cfi_startproc
 459              		@ args = 0, pretend = 0, frame = 0
 460              		@ frame_needed = 0, uses_anonymous_args = 0
 461              	.LVL39:
 462 0000 70B5     		push	{r4, r5, r6, lr}
 463              	.LCFI6:
 464              		.cfi_def_cfa_offset 16
 465              		.cfi_offset 4, -16
 466              		.cfi_offset 5, -12
 467              		.cfi_offset 6, -8
 468              		.cfi_offset 14, -4
 469 0002 0646     		mov	r6, r0
 470 0004 0C46     		mov	r4, r1
 471 0006 1546     		mov	r5, r2
 155:../user/source/Uart.c ****     {
 472              		.loc 1 155 0
 473 0008 0846     		mov	r0, r1
 474              	.LVL40:
 475 000a FFF7FEFF 		bl	uwBuf_UnReadLen
 476              	.LVL41:
 477 000e 2844     		add	r0, r0, r5
 478 0010 B0F57A7F 		cmp	r0, #1000
 479 0014 13D9     		bls	.L47
 165:../user/source/Uart.c **** }
 480              		.loc 1 165 0
 481 0016 0020     		movs	r0, #0
 482 0018 70BD     		pop	{r4, r5, r6, pc}
 483              	.LVL42:
 484              	.L46:
 159:../user/source/Uart.c ****             ucdrv_buf->wr = (ucdrv_buf->wr + 1) % DRV_BUF_SIZE;
 485              		.loc 1 159 0 discriminator 3
 486 001a D4F8EC13 		ldr	r1, [r4, #1004]
 487 001e B35C     		ldrb	r3, [r6, r2]	@ zero_extendqisi2
 488 0020 6354     		strb	r3, [r4, r1]
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 17


 160:../user/source/Uart.c ****         }
 489              		.loc 1 160 0 discriminator 3
 490 0022 0131     		adds	r1, r1, #1
 491 0024 084B     		ldr	r3, .L49
 492 0026 A3FB0103 		umull	r0, r3, r3, r1
 493 002a 9B09     		lsrs	r3, r3, #6
 494 002c 4FF47A70 		mov	r0, #1000
 495 0030 00FB1313 		mls	r3, r0, r3, r1
 496 0034 C4F8EC33 		str	r3, [r4, #1004]
 157:../user/source/Uart.c ****         {
 497              		.loc 1 157 0 discriminator 3
 498 0038 0132     		adds	r2, r2, #1
 499              	.LVL43:
 500 003a 92B2     		uxth	r2, r2
 501              	.LVL44:
 502 003c 00E0     		b	.L44
 503              	.LVL45:
 504              	.L47:
 505 003e 0022     		movs	r2, #0
 506              	.L44:
 507              	.LVL46:
 157:../user/source/Uart.c ****         {
 508              		.loc 1 157 0 is_stmt 0 discriminator 1
 509 0040 AA42     		cmp	r2, r5
 510 0042 EAD3     		bcc	.L46
 162:../user/source/Uart.c ****     }
 511              		.loc 1 162 0 is_stmt 1
 512 0044 0120     		movs	r0, #1
 166:../user/source/Uart.c **** /********************************************************************
 513              		.loc 1 166 0
 514 0046 70BD     		pop	{r4, r5, r6, pc}
 515              	.LVL47:
 516              	.L50:
 517              		.align	2
 518              	.L49:
 519 0048 D34D6210 		.word	274877907
 520              		.cfi_endproc
 521              	.LFE115:
 523              		.section	.text.Uart_OnceWrite,"ax",%progbits
 524              		.align	2
 525              		.global	Uart_OnceWrite
 526              		.thumb
 527              		.thumb_func
 529              	Uart_OnceWrite:
 530              	.LFB117:
 189:../user/source/Uart.c ****     uint32_t sendlen = 0;
 531              		.loc 1 189 0
 532              		.cfi_startproc
 533              		@ args = 0, pretend = 0, frame = 0
 534              		@ frame_needed = 0, uses_anonymous_args = 0
 535              	.LVL48:
 193:../user/source/Uart.c ****         return -1;
 536              		.loc 1 193 0
 537 0000 002A     		cmp	r2, #0
 538 0002 4BD0     		beq	.L59
 189:../user/source/Uart.c ****     uint32_t sendlen = 0;
 539              		.loc 1 189 0 discriminator 1
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 18


 540 0004 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 541              	.LCFI7:
 542              		.cfi_def_cfa_offset 24
 543              		.cfi_offset 3, -24
 544              		.cfi_offset 4, -20
 545              		.cfi_offset 5, -16
 546              		.cfi_offset 6, -12
 547              		.cfi_offset 7, -8
 548              		.cfi_offset 14, -4
 549 0006 0446     		mov	r4, r0
 550 0008 0F46     		mov	r7, r1
 551 000a 1D46     		mov	r5, r3
 552 000c 1646     		mov	r6, r2
 193:../user/source/Uart.c ****         return -1;
 553              		.loc 1 193 0 discriminator 1
 554 000e 8068     		ldr	r0, [r0, #8]
 555              	.LVL49:
 556 0010 FFF7FEFF 		bl	uwBuf_EmpLen
 557              	.LVL50:
 558 0014 8642     		cmp	r6, r0
 559 0016 44D8     		bhi	.L60
 560 0018 0022     		movs	r2, #0
 561 001a 14E0     		b	.L53
 562              	.LVL51:
 563              	.L54:
 197:../user/source/Uart.c ****         puart->pSndbuf->wr = (++puart->pSndbuf->wr) % DRV_BUF_SIZE;
 564              		.loc 1 197 0 discriminator 3
 565 001c A368     		ldr	r3, [r4, #8]
 566 001e D3F8EC13 		ldr	r1, [r3, #1004]
 567 0022 B85C     		ldrb	r0, [r7, r2]	@ zero_extendqisi2
 568 0024 5854     		strb	r0, [r3, r1]
 198:../user/source/Uart.c ****     }
 569              		.loc 1 198 0 discriminator 3
 570 0026 A068     		ldr	r0, [r4, #8]
 571 0028 D0F8EC13 		ldr	r1, [r0, #1004]
 572 002c 0131     		adds	r1, r1, #1
 573 002e 1E4B     		ldr	r3, .L62
 574 0030 A3FB01E3 		umull	lr, r3, r3, r1
 575 0034 9B09     		lsrs	r3, r3, #6
 576 0036 4FF47A7E 		mov	lr, #1000
 577 003a 0EFB1313 		mls	r3, lr, r3, r1
 578 003e C0F8EC33 		str	r3, [r0, #1004]
 195:../user/source/Uart.c ****     {
 579              		.loc 1 195 0 discriminator 3
 580 0042 0132     		adds	r2, r2, #1
 581              	.LVL52:
 582 0044 92B2     		uxth	r2, r2
 583              	.LVL53:
 584              	.L53:
 195:../user/source/Uart.c ****     {
 585              		.loc 1 195 0 is_stmt 0 discriminator 1
 586 0046 9642     		cmp	r6, r2
 587 0048 E8D8     		bhi	.L54
 200:../user/source/Uart.c ****     //LL_USART_EnableIT_TXE(puart->handler);
 588              		.loc 1 200 0 is_stmt 1
 589 004a A368     		ldr	r3, [r4, #8]
 590 004c D3F8E863 		ldr	r6, [r3, #1000]
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 19


 591              	.LVL54:
 202:../user/source/Uart.c ****     while (ticks)
 592              		.loc 1 202 0
 593 0050 0122     		movs	r2, #1
 594              	.LVL55:
 595 0052 1649     		ldr	r1, .L62+4
 596 0054 2068     		ldr	r0, [r4]
 597 0056 FFF7FEFF 		bl	USART_ITConfig
 598              	.LVL56:
 203:../user/source/Uart.c ****     {
 599              		.loc 1 203 0
 600 005a 09E0     		b	.L57
 601              	.L58:
 206:../user/source/Uart.c ****             break;
 602              		.loc 1 206 0
 603 005c A068     		ldr	r0, [r4, #8]
 604 005e FFF7FEFF 		bl	uwBuf_UnReadLen
 605              	.LVL57:
 606 0062 38B1     		cbz	r0, .L56
 208:../user/source/Uart.c ****         {
 607              		.loc 1 208 0
 608 0064 124B     		ldr	r3, .L62+8
 609 0066 1B68     		ldr	r3, [r3]
 610 0068 13F4803F 		tst	r3, #65536
 611 006c 00D0     		beq	.L57
 210:../user/source/Uart.c ****         }
 612              		.loc 1 210 0
 613 006e 013D     		subs	r5, r5, #1
 614              	.LVL58:
 615              	.L57:
 203:../user/source/Uart.c ****     {
 616              		.loc 1 203 0
 617 0070 002D     		cmp	r5, #0
 618 0072 F3D1     		bne	.L58
 619              	.L56:
 215:../user/source/Uart.c ****     return (puart->pSndbuf->rd - sendlen + DRV_BUF_SIZE) % DRV_BUF_SIZE;
 620              		.loc 1 215 0
 621 0074 0022     		movs	r2, #0
 622 0076 0D49     		ldr	r1, .L62+4
 623 0078 2068     		ldr	r0, [r4]
 624 007a FFF7FEFF 		bl	USART_ITConfig
 625              	.LVL59:
 216:../user/source/Uart.c **** }
 626              		.loc 1 216 0
 627 007e A368     		ldr	r3, [r4, #8]
 628 0080 D3F8E823 		ldr	r2, [r3, #1000]
 629 0084 921B     		subs	r2, r2, r6
 630 0086 02F57A72 		add	r2, r2, #1000
 631 008a 074B     		ldr	r3, .L62
 632 008c A3FB0213 		umull	r1, r3, r3, r2
 633 0090 9B09     		lsrs	r3, r3, #6
 634 0092 4FF47A70 		mov	r0, #1000
 635 0096 00FB1320 		mls	r0, r0, r3, r2
 636 009a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 637              	.LVL60:
 638              	.L59:
 639              	.LCFI8:
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 20


 640              		.cfi_def_cfa_offset 0
 641              		.cfi_restore 3
 642              		.cfi_restore 4
 643              		.cfi_restore 5
 644              		.cfi_restore 6
 645              		.cfi_restore 7
 646              		.cfi_restore 14
 194:../user/source/Uart.c ****     for (i = 0; i < count; i++)
 647              		.loc 1 194 0
 648 009c 4FF0FF30 		mov	r0, #-1
 649              	.LVL61:
 217:../user/source/Uart.c **** 
 650              		.loc 1 217 0
 651 00a0 7047     		bx	lr
 652              	.LVL62:
 653              	.L60:
 654              	.LCFI9:
 655              		.cfi_def_cfa_offset 24
 656              		.cfi_offset 3, -24
 657              		.cfi_offset 4, -20
 658              		.cfi_offset 5, -16
 659              		.cfi_offset 6, -12
 660              		.cfi_offset 7, -8
 661              		.cfi_offset 14, -4
 194:../user/source/Uart.c ****     for (i = 0; i < count; i++)
 662              		.loc 1 194 0
 663 00a2 4FF0FF30 		mov	r0, #-1
 217:../user/source/Uart.c **** 
 664              		.loc 1 217 0
 665 00a6 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 666              	.LVL63:
 667              	.L63:
 668              		.align	2
 669              	.L62:
 670 00a8 D34D6210 		.word	274877907
 671 00ac 07010700 		.word	459015
 672 00b0 10E000E0 		.word	-536813552
 673              		.cfi_endproc
 674              	.LFE117:
 676              		.section	.text.Uart_IdleRead,"ax",%progbits
 677              		.align	2
 678              		.global	Uart_IdleRead
 679              		.thumb
 680              		.thumb_func
 682              	Uart_IdleRead:
 683              	.LFB118:
 227:../user/source/Uart.c ****     volatile uint32_t readlen = 0;
 684              		.loc 1 227 0
 685              		.cfi_startproc
 686              		@ args = 0, pretend = 0, frame = 16
 687              		@ frame_needed = 0, uses_anonymous_args = 0
 688              	.LVL64:
 689 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 690              	.LCFI10:
 691              		.cfi_def_cfa_offset 24
 692              		.cfi_offset 4, -24
 693              		.cfi_offset 5, -20
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 21


 694              		.cfi_offset 6, -16
 695              		.cfi_offset 7, -12
 696              		.cfi_offset 8, -8
 697              		.cfi_offset 14, -4
 698 0004 84B0     		sub	sp, sp, #16
 699              	.LCFI11:
 700              		.cfi_def_cfa_offset 40
 701 0006 9846     		mov	r8, r3
 228:../user/source/Uart.c ****     volatile uint32_t readlenow = 0;
 702              		.loc 1 228 0
 703 0008 0023     		movs	r3, #0
 704              	.LVL65:
 705 000a 0393     		str	r3, [sp, #12]
 229:../user/source/Uart.c ****     volatile idleTickCount;
 706              		.loc 1 229 0
 707 000c 0293     		str	r3, [sp, #8]
 233:../user/source/Uart.c ****     {
 708              		.loc 1 233 0
 709 000e 531E     		subs	r3, r2, #1
 710 0010 B3F57A7F 		cmp	r3, #1000
 711 0014 4CD2     		bcs	.L76
 712 0016 0446     		mov	r4, r0
 713 0018 0D46     		mov	r5, r1
 714 001a 1646     		mov	r6, r2
 238:../user/source/Uart.c ****     {
 715              		.loc 1 238 0
 716 001c B8F1FF3F 		cmp	r8, #-1
 717 0020 03D0     		beq	.L66
 240:../user/source/Uart.c ****     }
 718              		.loc 1 240 0
 719 0022 08F10108 		add	r8, r8, #1
 720              	.LVL66:
 721 0026 CDF80480 		str	r8, [sp, #4]
 722              	.L66:
 243:../user/source/Uart.c ****     while (readlenow < count && idleTickCount > 0)
 723              		.loc 1 243 0
 724 002a 6768     		ldr	r7, [r4, #4]
 725 002c 3846     		mov	r0, r7
 726              	.LVL67:
 727 002e FFF7FEFF 		bl	uwBuf_UnReadLen
 728              	.LVL68:
 729 0032 0290     		str	r0, [sp, #8]
 244:../user/source/Uart.c ****     {
 730              		.loc 1 244 0
 731 0034 13E0     		b	.L69
 732              	.L71:
 247:../user/source/Uart.c ****         {
 733              		.loc 1 247 0
 734 0036 204B     		ldr	r3, .L79
 735 0038 1B68     		ldr	r3, [r3]
 736 003a 13F4803F 		tst	r3, #65536
 737 003e 02D0     		beq	.L68
 249:../user/source/Uart.c ****         }
 738              		.loc 1 249 0
 739 0040 019B     		ldr	r3, [sp, #4]
 740 0042 013B     		subs	r3, r3, #1
 741 0044 0193     		str	r3, [sp, #4]
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 22


 742              	.L68:
 251:../user/source/Uart.c ****         /*readlennow ÓÐ±ä»¯£¬idleTickCountÖØÔØ*/
 743              		.loc 1 251 0
 744 0046 3846     		mov	r0, r7
 745 0048 FFF7FEFF 		bl	uwBuf_UnReadLen
 746              	.LVL69:
 747 004c 0290     		str	r0, [sp, #8]
 253:../user/source/Uart.c ****         {
 748              		.loc 1 253 0
 749 004e 029A     		ldr	r2, [sp, #8]
 750 0050 039B     		ldr	r3, [sp, #12]
 751 0052 9A42     		cmp	r2, r3
 752 0054 03D9     		bls	.L69
 255:../user/source/Uart.c ****             readlen = readlenow;
 753              		.loc 1 255 0
 754 0056 CDF80480 		str	r8, [sp, #4]
 256:../user/source/Uart.c ****         }
 755              		.loc 1 256 0
 756 005a 029B     		ldr	r3, [sp, #8]
 757 005c 0393     		str	r3, [sp, #12]
 758              	.L69:
 244:../user/source/Uart.c ****     {
 759              		.loc 1 244 0
 760 005e 029B     		ldr	r3, [sp, #8]
 761 0060 9E42     		cmp	r6, r3
 762 0062 02D9     		bls	.L70
 244:../user/source/Uart.c ****     {
 763              		.loc 1 244 0 is_stmt 0 discriminator 1
 764 0064 019B     		ldr	r3, [sp, #4]
 765 0066 002B     		cmp	r3, #0
 766 0068 E5DC     		bgt	.L71
 767              	.L70:
 260:../user/source/Uart.c ****     {
 768              		.loc 1 260 0 is_stmt 1
 769 006a 039B     		ldr	r3, [sp, #12]
 770 006c F3B1     		cbz	r3, .L72
 263:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 771              		.loc 1 263 0
 772 006e 039B     		ldr	r3, [sp, #12]
 773 0070 9E42     		cmp	r6, r3
 774 0072 00D9     		bls	.L73
 263:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 775              		.loc 1 263 0 is_stmt 0 discriminator 1
 776 0074 039E     		ldr	r6, [sp, #12]
 777              	.LVL70:
 778              	.L73:
 263:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 779              		.loc 1 263 0 discriminator 4
 780 0076 0396     		str	r6, [sp, #12]
 781              	.LVL71:
 264:../user/source/Uart.c ****         {
 782              		.loc 1 264 0 is_stmt 1 discriminator 4
 783 0078 0022     		movs	r2, #0
 784 007a 14E0     		b	.L74
 785              	.LVL72:
 786              	.L75:
 266:../user/source/Uart.c ****             puart->pRsvbuf->rd = (++puart->pRsvbuf->rd) % DRV_BUF_SIZE;
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 23


 787              		.loc 1 266 0 discriminator 3
 788 007c 6368     		ldr	r3, [r4, #4]
 789 007e D3F8E813 		ldr	r1, [r3, #1000]
 790 0082 5B5C     		ldrb	r3, [r3, r1]	@ zero_extendqisi2
 791 0084 AB54     		strb	r3, [r5, r2]
 267:../user/source/Uart.c ****         }
 792              		.loc 1 267 0 discriminator 3
 793 0086 6068     		ldr	r0, [r4, #4]
 794 0088 D0F8E813 		ldr	r1, [r0, #1000]
 795 008c 0131     		adds	r1, r1, #1
 796 008e 0B4B     		ldr	r3, .L79+4
 797 0090 A3FB0163 		umull	r6, r3, r3, r1
 798 0094 9B09     		lsrs	r3, r3, #6
 799 0096 4FF47A76 		mov	r6, #1000
 800 009a 06FB1313 		mls	r3, r6, r3, r1
 801 009e C0F8E833 		str	r3, [r0, #1000]
 264:../user/source/Uart.c ****         {
 802              		.loc 1 264 0 discriminator 3
 803 00a2 0132     		adds	r2, r2, #1
 804              	.LVL73:
 805 00a4 92B2     		uxth	r2, r2
 806              	.LVL74:
 807              	.L74:
 264:../user/source/Uart.c ****         {
 808              		.loc 1 264 0 is_stmt 0 discriminator 1
 809 00a6 039B     		ldr	r3, [sp, #12]
 810 00a8 9A42     		cmp	r2, r3
 811 00aa E7D3     		bcc	.L75
 812              	.LVL75:
 813              	.L72:
 270:../user/source/Uart.c **** }
 814              		.loc 1 270 0 is_stmt 1
 815 00ac 0398     		ldr	r0, [sp, #12]
 816 00ae 00E0     		b	.L65
 817              	.LVL76:
 818              	.L76:
 235:../user/source/Uart.c ****     }
 819              		.loc 1 235 0
 820 00b0 0020     		movs	r0, #0
 821              	.LVL77:
 822              	.L65:
 271:../user/source/Uart.c **** 
 823              		.loc 1 271 0
 824 00b2 04B0     		add	sp, sp, #16
 825              	.LCFI12:
 826              		.cfi_def_cfa_offset 24
 827              		@ sp needed
 828 00b4 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 829              	.LVL78:
 830              	.L80:
 831              		.align	2
 832              	.L79:
 833 00b8 10E000E0 		.word	-536813552
 834 00bc D34D6210 		.word	274877907
 835              		.cfi_endproc
 836              	.LFE118:
 838              		.section	.text.Uart_OnceRead,"ax",%progbits
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 24


 839              		.align	2
 840              		.global	Uart_OnceRead
 841              		.thumb
 842              		.thumb_func
 844              	Uart_OnceRead:
 845              	.LFB119:
 281:../user/source/Uart.c ****     volatile uint32_t readlen = 0;
 846              		.loc 1 281 0
 847              		.cfi_startproc
 848              		@ args = 0, pretend = 0, frame = 8
 849              		@ frame_needed = 0, uses_anonymous_args = 0
 850              	.LVL79:
 851 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 852              	.LCFI13:
 853              		.cfi_def_cfa_offset 24
 854              		.cfi_offset 4, -24
 855              		.cfi_offset 5, -20
 856              		.cfi_offset 6, -16
 857              		.cfi_offset 7, -12
 858              		.cfi_offset 8, -8
 859              		.cfi_offset 14, -4
 860 0004 82B0     		sub	sp, sp, #8
 861              	.LCFI14:
 862              		.cfi_def_cfa_offset 32
 863 0006 1E46     		mov	r6, r3
 282:../user/source/Uart.c ****     uint16_t i;
 864              		.loc 1 282 0
 865 0008 0023     		movs	r3, #0
 866              	.LVL80:
 867 000a 0193     		str	r3, [sp, #4]
 285:../user/source/Uart.c ****     {
 868              		.loc 1 285 0
 869 000c 531E     		subs	r3, r2, #1
 870 000e B3F57A7F 		cmp	r3, #1000
 871 0012 45D2     		bcs	.L91
 872 0014 0446     		mov	r4, r0
 873 0016 0D46     		mov	r5, r1
 874 0018 1746     		mov	r7, r2
 289:../user/source/Uart.c ****     readlen = uwBuf_UnReadLen(puart->pRsvbuf);
 875              		.loc 1 289 0
 876 001a 0122     		movs	r2, #1
 877              	.LVL81:
 878 001c 2249     		ldr	r1, .L94
 879              	.LVL82:
 880 001e 0068     		ldr	r0, [r0]
 881              	.LVL83:
 882 0020 FFF7FEFF 		bl	USART_ITConfig
 883              	.LVL84:
 290:../user/source/Uart.c ****     while (tickCount)
 884              		.loc 1 290 0
 885 0024 D4F80480 		ldr	r8, [r4, #4]
 886 0028 4046     		mov	r0, r8
 887 002a FFF7FEFF 		bl	uwBuf_UnReadLen
 888              	.LVL85:
 889 002e 0190     		str	r0, [sp, #4]
 291:../user/source/Uart.c ****     {
 890              		.loc 1 291 0
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 25


 891 0030 0CE0     		b	.L83
 892              	.L86:
 293:../user/source/Uart.c ****         /*¶àÓàµÄ×Ö½Ú±¾´Î¶ªÆú£¬²¢µ÷ÓÃBufClear·ÀÖ¹ºóÃæÔÙ¶ÁÈ¡*/
 893              		.loc 1 293 0
 894 0032 4046     		mov	r0, r8
 895 0034 FFF7FEFF 		bl	uwBuf_UnReadLen
 896              	.LVL86:
 897 0038 0190     		str	r0, [sp, #4]
 295:../user/source/Uart.c ****             break;
 898              		.loc 1 295 0
 899 003a 019B     		ldr	r3, [sp, #4]
 900 003c 9F42     		cmp	r7, r3
 901 003e 07D9     		bls	.L84
 297:../user/source/Uart.c ****         {
 902              		.loc 1 297 0
 903 0040 1A4B     		ldr	r3, .L94+4
 904 0042 1B68     		ldr	r3, [r3]
 905 0044 13F4803F 		tst	r3, #65536
 906 0048 00D0     		beq	.L83
 299:../user/source/Uart.c ****         }
 907              		.loc 1 299 0
 908 004a 013E     		subs	r6, r6, #1
 909              	.LVL87:
 910              	.L83:
 291:../user/source/Uart.c ****     {
 911              		.loc 1 291 0
 912 004c 002E     		cmp	r6, #0
 913 004e F0D1     		bne	.L86
 914              	.L84:
 302:../user/source/Uart.c ****     if (readlen)
 915              		.loc 1 302 0
 916 0050 0022     		movs	r2, #0
 917 0052 1549     		ldr	r1, .L94
 918 0054 2068     		ldr	r0, [r4]
 919 0056 FFF7FEFF 		bl	USART_ITConfig
 920              	.LVL88:
 303:../user/source/Uart.c ****     {
 921              		.loc 1 303 0
 922 005a 019B     		ldr	r3, [sp, #4]
 923 005c F3B1     		cbz	r3, .L87
 306:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 924              		.loc 1 306 0
 925 005e 019B     		ldr	r3, [sp, #4]
 926 0060 9F42     		cmp	r7, r3
 927 0062 00D9     		bls	.L88
 306:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 928              		.loc 1 306 0 is_stmt 0 discriminator 1
 929 0064 019F     		ldr	r7, [sp, #4]
 930              	.LVL89:
 931              	.L88:
 306:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 932              		.loc 1 306 0 discriminator 4
 933 0066 0197     		str	r7, [sp, #4]
 934              	.LVL90:
 307:../user/source/Uart.c ****         {
 935              		.loc 1 307 0 is_stmt 1 discriminator 4
 936 0068 0022     		movs	r2, #0
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 26


 937 006a 14E0     		b	.L89
 938              	.LVL91:
 939              	.L90:
 309:../user/source/Uart.c ****             puart->pRsvbuf->rd = (++puart->pRsvbuf->rd) % DRV_BUF_SIZE;
 940              		.loc 1 309 0 discriminator 3
 941 006c 6368     		ldr	r3, [r4, #4]
 942 006e D3F8E813 		ldr	r1, [r3, #1000]
 943 0072 5B5C     		ldrb	r3, [r3, r1]	@ zero_extendqisi2
 944 0074 AB54     		strb	r3, [r5, r2]
 310:../user/source/Uart.c ****         }
 945              		.loc 1 310 0 discriminator 3
 946 0076 6068     		ldr	r0, [r4, #4]
 947 0078 D0F8E813 		ldr	r1, [r0, #1000]
 948 007c 0131     		adds	r1, r1, #1
 949 007e 0C4B     		ldr	r3, .L94+8
 950 0080 A3FB0163 		umull	r6, r3, r3, r1
 951 0084 9B09     		lsrs	r3, r3, #6
 952 0086 4FF47A76 		mov	r6, #1000
 953 008a 06FB1313 		mls	r3, r6, r3, r1
 954 008e C0F8E833 		str	r3, [r0, #1000]
 307:../user/source/Uart.c ****         {
 955              		.loc 1 307 0 discriminator 3
 956 0092 0132     		adds	r2, r2, #1
 957              	.LVL92:
 958 0094 92B2     		uxth	r2, r2
 959              	.LVL93:
 960              	.L89:
 307:../user/source/Uart.c ****         {
 961              		.loc 1 307 0 is_stmt 0 discriminator 1
 962 0096 019B     		ldr	r3, [sp, #4]
 963 0098 9A42     		cmp	r2, r3
 964 009a E7D3     		bcc	.L90
 965              	.LVL94:
 966              	.L87:
 313:../user/source/Uart.c **** }
 967              		.loc 1 313 0 is_stmt 1
 968 009c 0198     		ldr	r0, [sp, #4]
 969 009e 00E0     		b	.L82
 970              	.LVL95:
 971              	.L91:
 287:../user/source/Uart.c ****     }
 972              		.loc 1 287 0
 973 00a0 0020     		movs	r0, #0
 974              	.LVL96:
 975              	.L82:
 314:../user/source/Uart.c **** 
 976              		.loc 1 314 0
 977 00a2 02B0     		add	sp, sp, #8
 978              	.LCFI15:
 979              		.cfi_def_cfa_offset 24
 980              		@ sp needed
 981 00a4 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 982              	.L95:
 983              		.align	2
 984              	.L94:
 985 00a8 05010500 		.word	327941
 986 00ac 10E000E0 		.word	-536813552
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 27


 987 00b0 D34D6210 		.word	274877907
 988              		.cfi_endproc
 989              	.LFE119:
 991              		.section	.text.Uart_Read,"ax",%progbits
 992              		.align	2
 993              		.global	Uart_Read
 994              		.thumb
 995              		.thumb_func
 997              	Uart_Read:
 998              	.LFB121:
 348:../user/source/Uart.c ****     volatile uint32_t readlen = 0;
 999              		.loc 1 348 0
 1000              		.cfi_startproc
 1001              		@ args = 0, pretend = 0, frame = 8
 1002              		@ frame_needed = 0, uses_anonymous_args = 0
 1003              	.LVL97:
 1004 0000 70B5     		push	{r4, r5, r6, lr}
 1005              	.LCFI16:
 1006              		.cfi_def_cfa_offset 16
 1007              		.cfi_offset 4, -16
 1008              		.cfi_offset 5, -12
 1009              		.cfi_offset 6, -8
 1010              		.cfi_offset 14, -4
 1011 0002 82B0     		sub	sp, sp, #8
 1012              	.LCFI17:
 1013              		.cfi_def_cfa_offset 24
 349:../user/source/Uart.c ****     uint16_t i;
 1014              		.loc 1 349 0
 1015 0004 0023     		movs	r3, #0
 1016 0006 0193     		str	r3, [sp, #4]
 351:../user/source/Uart.c ****         return 0;
 1017              		.loc 1 351 0
 1018 0008 541E     		subs	r4, r2, #1
 1019 000a 4FF6FE73 		movw	r3, #65534
 1020 000e 9C42     		cmp	r4, r3
 1021 0010 2BD8     		bhi	.L102
 1022 0012 1446     		mov	r4, r2
 1023 0014 0E46     		mov	r6, r1
 1024 0016 0546     		mov	r5, r0
 353:../user/source/Uart.c ****     if (readlen)
 1025              		.loc 1 353 0
 1026 0018 4068     		ldr	r0, [r0, #4]
 1027              	.LVL98:
 1028 001a FFF7FEFF 		bl	uwBuf_UnReadLen
 1029              	.LVL99:
 1030 001e 0190     		str	r0, [sp, #4]
 354:../user/source/Uart.c ****     {
 1031              		.loc 1 354 0
 1032 0020 019B     		ldr	r3, [sp, #4]
 1033 0022 03B3     		cbz	r3, .L98
 357:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 1034              		.loc 1 357 0
 1035 0024 019B     		ldr	r3, [sp, #4]
 1036 0026 9C42     		cmp	r4, r3
 1037 0028 01D9     		bls	.L103
 357:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 1038              		.loc 1 357 0 is_stmt 0 discriminator 1
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 28


 1039 002a 019A     		ldr	r2, [sp, #4]
 1040 002c 00E0     		b	.L99
 1041              	.L103:
 357:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 1042              		.loc 1 357 0
 1043 002e 2246     		mov	r2, r4
 1044              	.L99:
 357:../user/source/Uart.c ****         for (i = 0; i < readlen; i++)
 1045              		.loc 1 357 0 discriminator 4
 1046 0030 0192     		str	r2, [sp, #4]
 1047              	.LVL100:
 358:../user/source/Uart.c ****         {
 1048              		.loc 1 358 0 is_stmt 1 discriminator 4
 1049 0032 0022     		movs	r2, #0
 1050 0034 14E0     		b	.L100
 1051              	.LVL101:
 1052              	.L101:
 360:../user/source/Uart.c ****             puart->pRsvbuf->rd = (++puart->pRsvbuf->rd) % DRV_BUF_SIZE;
 1053              		.loc 1 360 0 discriminator 3
 1054 0036 6B68     		ldr	r3, [r5, #4]
 1055 0038 D3F8E813 		ldr	r1, [r3, #1000]
 1056 003c 5B5C     		ldrb	r3, [r3, r1]	@ zero_extendqisi2
 1057 003e B354     		strb	r3, [r6, r2]
 361:../user/source/Uart.c ****         }
 1058              		.loc 1 361 0 discriminator 3
 1059 0040 6968     		ldr	r1, [r5, #4]
 1060 0042 D1F8E843 		ldr	r4, [r1, #1000]
 1061 0046 0134     		adds	r4, r4, #1
 1062 0048 094B     		ldr	r3, .L105
 1063 004a A3FB0403 		umull	r0, r3, r3, r4
 1064 004e 9B09     		lsrs	r3, r3, #6
 1065 0050 4FF47A70 		mov	r0, #1000
 1066 0054 00FB1343 		mls	r3, r0, r3, r4
 1067 0058 C1F8E833 		str	r3, [r1, #1000]
 358:../user/source/Uart.c ****         {
 1068              		.loc 1 358 0 discriminator 3
 1069 005c 0132     		adds	r2, r2, #1
 1070              	.LVL102:
 1071 005e 92B2     		uxth	r2, r2
 1072              	.LVL103:
 1073              	.L100:
 358:../user/source/Uart.c ****         {
 1074              		.loc 1 358 0 is_stmt 0 discriminator 1
 1075 0060 019B     		ldr	r3, [sp, #4]
 1076 0062 9A42     		cmp	r2, r3
 1077 0064 E7D3     		bcc	.L101
 1078              	.LVL104:
 1079              	.L98:
 364:../user/source/Uart.c **** }
 1080              		.loc 1 364 0 is_stmt 1
 1081 0066 0198     		ldr	r0, [sp, #4]
 1082 0068 00E0     		b	.L97
 1083              	.LVL105:
 1084              	.L102:
 352:../user/source/Uart.c ****     readlen = uwBuf_UnReadLen(puart->pRsvbuf);
 1085              		.loc 1 352 0
 1086 006a 0020     		movs	r0, #0
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 29


 1087              	.LVL106:
 1088              	.L97:
 365:../user/source/Uart.c **** /**********************************************
 1089              		.loc 1 365 0
 1090 006c 02B0     		add	sp, sp, #8
 1091              	.LCFI18:
 1092              		.cfi_def_cfa_offset 16
 1093              		@ sp needed
 1094 006e 70BD     		pop	{r4, r5, r6, pc}
 1095              	.L106:
 1096              		.align	2
 1097              	.L105:
 1098 0070 D34D6210 		.word	274877907
 1099              		.cfi_endproc
 1100              	.LFE121:
 1102              		.section	.text.vBuf_Clear,"ax",%progbits
 1103              		.align	2
 1104              		.global	vBuf_Clear
 1105              		.thumb
 1106              		.thumb_func
 1108              	vBuf_Clear:
 1109              	.LFB126:
 422:../user/source/Uart.c **** /********************************************************************
 423:../user/source/Uart.c **** * ¹¦    ÄÜ£ºÇå¿Õ»º´æ
 424:../user/source/Uart.c **** * Êä    Èë£ºÊý¾Ý»º´æ½á¹¹ÌåµØÖ·
 425:../user/source/Uart.c **** * Êä    ³ö£º
 426:../user/source/Uart.c **** *          
 427:../user/source/Uart.c **** * ±à Ð´ ÈË£º
 428:../user/source/Uart.c **** * ±àÐ´ÈÕÆÚ£º2016.6.28
 429:../user/source/Uart.c **** **********************************************************************/
 430:../user/source/Uart.c **** void vBuf_Clear(struct ucbuf *buf)
 431:../user/source/Uart.c **** {
 1110              		.loc 1 431 0
 1111              		.cfi_startproc
 1112              		@ args = 0, pretend = 0, frame = 0
 1113              		@ frame_needed = 0, uses_anonymous_args = 0
 1114              		@ link register save eliminated.
 1115              	.LVL107:
 432:../user/source/Uart.c ****     buf->rd = buf->wr;
 1116              		.loc 1 432 0
 1117 0000 D0F8EC33 		ldr	r3, [r0, #1004]
 1118 0004 C0F8E833 		str	r3, [r0, #1000]
 1119 0008 7047     		bx	lr
 1120              		.cfi_endproc
 1121              	.LFE126:
 1123 000a 00BF     		.section	.text.blBufchr,"ax",%progbits
 1124              		.align	2
 1125              		.global	blBufchr
 1126              		.thumb
 1127              		.thumb_func
 1129              	blBufchr:
 1130              	.LFB127:
 433:../user/source/Uart.c **** }
 434:../user/source/Uart.c **** 
 435:../user/source/Uart.c **** /********************************************************************
 436:../user/source/Uart.c **** * ¹¦    ÄÜ£º²éÕÒ»º´æÖÐÌØ¶¨×Ö·û
 437:../user/source/Uart.c **** * Êä    Èë£º»º´æ½á¹¹ÌåÖ¸Õëuc_buf£¬ÌØ¶¨×Ö·ûchr,»º´æÄÚ×Ö½ÚÊýln
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 30


 438:../user/source/Uart.c **** * Êä    ³ö£ºtrue/false
 439:../user/source/Uart.c **** * Ëµ    Ã÷£º¶ÁÖ¸ÕëÖ¸Ïò¸Ã×Ö·û           
 440:../user/source/Uart.c **** * ±à Ð´ ÈË£ºstragen
 441:../user/source/Uart.c **** * ±àÐ´ÈÕÆÚ£º2016.8.25
 442:../user/source/Uart.c **** **********************************************************************/
 443:../user/source/Uart.c **** bool blBufchr(struct ucbuf *uc_buf, uint8_t chr, uint16_t ln)
 444:../user/source/Uart.c **** {
 1131              		.loc 1 444 0
 1132              		.cfi_startproc
 1133              		@ args = 0, pretend = 0, frame = 0
 1134              		@ frame_needed = 0, uses_anonymous_args = 0
 1135              		@ link register save eliminated.
 1136              	.LVL108:
 1137 0000 30B4     		push	{r4, r5}
 1138              	.LCFI19:
 1139              		.cfi_def_cfa_offset 8
 1140              		.cfi_offset 4, -8
 1141              		.cfi_offset 5, -4
 445:../user/source/Uart.c ****     while (ln-- && (uc_buf->data[uc_buf->rd] != chr)) // &&(uc_buf->RD_Index != uc_buf->WR_Index))
 1142              		.loc 1 445 0
 1143 0002 0BE0     		b	.L109
 1144              	.LVL109:
 1145              	.L111:
 446:../user/source/Uart.c ****     {
 447:../user/source/Uart.c ****         uc_buf->rd = (uc_buf->rd + 1) % DRV_BUF_SIZE;
 1146              		.loc 1 447 0
 1147 0004 5A1C     		adds	r2, r3, #1
 1148 0006 0C4B     		ldr	r3, .L115
 1149 0008 A3FB0253 		umull	r5, r3, r3, r2
 1150 000c 9B09     		lsrs	r3, r3, #6
 1151 000e 4FF47A75 		mov	r5, #1000
 1152 0012 05FB1323 		mls	r3, r5, r3, r2
 1153 0016 C0F8E833 		str	r3, [r0, #1000]
 445:../user/source/Uart.c ****     while (ln-- && (uc_buf->data[uc_buf->rd] != chr)) // &&(uc_buf->RD_Index != uc_buf->WR_Index))
 1154              		.loc 1 445 0
 1155 001a 2246     		mov	r2, r4
 1156              	.LVL110:
 1157              	.L109:
 1158 001c 541E     		subs	r4, r2, #1
 1159 001e A4B2     		uxth	r4, r4
 1160              	.LVL111:
 1161 0020 22B1     		cbz	r2, .L110
 445:../user/source/Uart.c ****     while (ln-- && (uc_buf->data[uc_buf->rd] != chr)) // &&(uc_buf->RD_Index != uc_buf->WR_Index))
 1162              		.loc 1 445 0 is_stmt 0 discriminator 1
 1163 0022 D0F8E833 		ldr	r3, [r0, #1000]
 1164 0026 C25C     		ldrb	r2, [r0, r3]	@ zero_extendqisi2
 1165 0028 8A42     		cmp	r2, r1
 1166 002a EBD1     		bne	.L111
 1167              	.L110:
 448:../user/source/Uart.c ****     }
 449:../user/source/Uart.c ****     //return(ln ? true : false);						//¶ÁÖ¸Õë¿ÉÄÜÊÇ0
 450:../user/source/Uart.c ****     if (ln)
 1168              		.loc 1 450 0 is_stmt 1
 1169 002c 0CB1     		cbz	r4, .L113
 451:../user/source/Uart.c ****         return false;
 1170              		.loc 1 451 0
 1171 002e 0020     		movs	r0, #0
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 31


 1172              	.LVL112:
 1173 0030 00E0     		b	.L112
 1174              	.LVL113:
 1175              	.L113:
 452:../user/source/Uart.c ****     else
 453:../user/source/Uart.c ****         return true;
 1176              		.loc 1 453 0
 1177 0032 0120     		movs	r0, #1
 1178              	.LVL114:
 1179              	.L112:
 454:../user/source/Uart.c **** }
 1180              		.loc 1 454 0
 1181 0034 30BC     		pop	{r4, r5}
 1182              	.LCFI20:
 1183              		.cfi_restore 5
 1184              		.cfi_restore 4
 1185              		.cfi_def_cfa_offset 0
 1186              	.LVL115:
 1187 0036 7047     		bx	lr
 1188              	.L116:
 1189              		.align	2
 1190              	.L115:
 1191 0038 D34D6210 		.word	274877907
 1192              		.cfi_endproc
 1193              	.LFE127:
 1195              		.section	.text.blBufcmp,"ax",%progbits
 1196              		.align	2
 1197              		.global	blBufcmp
 1198              		.thumb
 1199              		.thumb_func
 1201              	blBufcmp:
 1202              	.LFB128:
 455:../user/source/Uart.c **** 
 456:../user/source/Uart.c **** /********************************************************************
 457:../user/source/Uart.c **** * ¹¦    ÄÜ£ºÅÐ¶Ï»º´æÖÐ×Ö·û´®ÊÇ·ñÊÇÌØ¶¨×Ö·û´®
 458:../user/source/Uart.c **** * Êä    Èë£º»º´æ½á¹¹ÌåµØÖ·uc_buf£¬×Ö·û´®Ö¸Õëptchr£¬×Ö·û´®³¤¶Èln
 459:../user/source/Uart.c **** * Êä    ³ö£ºtrue/false
 460:../user/source/Uart.c **** * Ëµ    Ã÷£º¶ÁÖ¸Õë²»¸Ä±ä
 461:../user/source/Uart.c **** * ±à Ð´ ÈË£ºstragen
 462:../user/source/Uart.c **** * ±àÐ´ÈÕÆÚ£º2016.8.25
 463:../user/source/Uart.c **** **********************************************************************/
 464:../user/source/Uart.c **** bool blBufcmp(struct ucbuf *uc_buf, char *ptchr, uint8_t ln)
 465:../user/source/Uart.c **** {
 1203              		.loc 1 465 0
 1204              		.cfi_startproc
 1205              		@ args = 0, pretend = 0, frame = 0
 1206              		@ frame_needed = 0, uses_anonymous_args = 0
 1207              		@ link register save eliminated.
 1208              	.LVL116:
 1209 0000 70B4     		push	{r4, r5, r6}
 1210              	.LCFI21:
 1211              		.cfi_def_cfa_offset 12
 1212              		.cfi_offset 4, -12
 1213              		.cfi_offset 5, -8
 1214              		.cfi_offset 6, -4
 466:../user/source/Uart.c ****     while (ln-- && (uc_buf->data[uc_buf->rd] == *(ptchr++)) && (uc_buf->rd != uc_buf->wr)) //·ÀÖ¹¶Á
 1215              		.loc 1 466 0
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 32


 1216 0002 0CE0     		b	.L118
 1217              	.LVL117:
 1218              	.L120:
 467:../user/source/Uart.c ****     {
 468:../user/source/Uart.c ****         uc_buf->rd = (uc_buf->rd + 1) % DRV_BUF_SIZE;
 1219              		.loc 1 468 0
 1220 0004 5A1C     		adds	r2, r3, #1
 1221 0006 0F4B     		ldr	r3, .L122
 1222 0008 A3FB0213 		umull	r1, r3, r3, r2
 1223 000c 9B09     		lsrs	r3, r3, #6
 1224 000e 4FF47A71 		mov	r1, #1000
 1225 0012 01FB1323 		mls	r3, r1, r3, r2
 1226 0016 C0F8E833 		str	r3, [r0, #1000]
 466:../user/source/Uart.c ****     while (ln-- && (uc_buf->data[uc_buf->rd] == *(ptchr++)) && (uc_buf->rd != uc_buf->wr)) //·ÀÖ¹¶Á
 1227              		.loc 1 466 0
 1228 001a 2246     		mov	r2, r4
 1229 001c 3146     		mov	r1, r6
 1230              	.LVL118:
 1231              	.L118:
 1232 001e 531E     		subs	r3, r2, #1
 1233 0020 DCB2     		uxtb	r4, r3
 1234              	.LVL119:
 1235 0022 52B1     		cbz	r2, .L119
 466:../user/source/Uart.c ****     while (ln-- && (uc_buf->data[uc_buf->rd] == *(ptchr++)) && (uc_buf->rd != uc_buf->wr)) //·ÀÖ¹¶Á
 1236              		.loc 1 466 0 is_stmt 0 discriminator 1
 1237 0024 D0F8E833 		ldr	r3, [r0, #1000]
 1238 0028 C55C     		ldrb	r5, [r0, r3]	@ zero_extendqisi2
 1239 002a 4E1C     		adds	r6, r1, #1
 1240              	.LVL120:
 1241 002c 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 1242 002e 9542     		cmp	r5, r2
 1243 0030 03D1     		bne	.L119
 466:../user/source/Uart.c ****     while (ln-- && (uc_buf->data[uc_buf->rd] == *(ptchr++)) && (uc_buf->rd != uc_buf->wr)) //·ÀÖ¹¶Á
 1244              		.loc 1 466 0 discriminator 2
 1245 0032 D0F8EC23 		ldr	r2, [r0, #1004]
 1246 0036 9342     		cmp	r3, r2
 1247 0038 E4D1     		bne	.L120
 1248              	.LVL121:
 1249              	.L119:
 469:../user/source/Uart.c ****     }
 470:../user/source/Uart.c ****     return (ln ? false : true);
 471:../user/source/Uart.c **** }
 1250              		.loc 1 471 0 is_stmt 1
 1251 003a B4FA84F0 		clz	r0, r4
 1252              	.LVL122:
 1253 003e 4009     		lsrs	r0, r0, #5
 1254 0040 70BC     		pop	{r4, r5, r6}
 1255              	.LCFI22:
 1256              		.cfi_restore 6
 1257              		.cfi_restore 5
 1258              		.cfi_restore 4
 1259              		.cfi_def_cfa_offset 0
 1260              	.LVL123:
 1261 0042 7047     		bx	lr
 1262              	.L123:
 1263              		.align	2
 1264              	.L122:
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 33


 1265 0044 D34D6210 		.word	274877907
 1266              		.cfi_endproc
 1267              	.LFE128:
 1269              		.section	.text.vUart_EnableBaudrate,"ax",%progbits
 1270              		.align	2
 1271              		.global	vUart_EnableBaudrate
 1272              		.thumb
 1273              		.thumb_func
 1275              	vUart_EnableBaudrate:
 1276              	.LFB129:
 472:../user/source/Uart.c **** 
 473:../user/source/Uart.c **** #endif
 474:../user/source/Uart.c **** /********************************************************************
 475:../user/source/Uart.c **** * ¹¦    ÄÜ£º´®¿Ú³õÊ¼»¯º¯Êý
 476:../user/source/Uart.c **** * Êä    Èë£º´®¿Ú½á¹¹ÌåÖ¸Õë£¬²¨ÌØÂÊbaudrate
 477:../user/source/Uart.c **** * Êä    ³ö£ºNone
 478:../user/source/Uart.c **** *           
 479:../user/source/Uart.c **** * ±à Ð´ ÈË£º
 480:../user/source/Uart.c **** * ±àÐ´ÈÕÆÚ£º2018.9.4
 481:../user/source/Uart.c **** **********************************************************************/
 482:../user/source/Uart.c **** void vUart_EnableBaudrate(UartDef *puart, uint32_t baudrate)
 483:../user/source/Uart.c **** {
 1277              		.loc 1 483 0
 1278              		.cfi_startproc
 1279              		@ args = 0, pretend = 0, frame = 40
 1280              		@ frame_needed = 0, uses_anonymous_args = 0
 1281              	.LVL124:
 1282 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1283              	.LCFI23:
 1284              		.cfi_def_cfa_offset 20
 1285              		.cfi_offset 4, -20
 1286              		.cfi_offset 5, -16
 1287              		.cfi_offset 6, -12
 1288              		.cfi_offset 7, -8
 1289              		.cfi_offset 14, -4
 1290 0002 8BB0     		sub	sp, sp, #44
 1291              	.LCFI24:
 1292              		.cfi_def_cfa_offset 64
 1293 0004 0446     		mov	r4, r0
 1294 0006 0D46     		mov	r5, r1
 484:../user/source/Uart.c ****     GPIO_InitTypeDef GPIO_Initstruc;
 485:../user/source/Uart.c ****     USART_InitTypeDef USART_Initstruct;
 486:../user/source/Uart.c ****     NVIC_InitTypeDef NVIC_Initstruct;
 487:../user/source/Uart.c **** 
 488:../user/source/Uart.c ****     USART_DeInit(puart->handler);
 1295              		.loc 1 488 0
 1296 0008 0068     		ldr	r0, [r0]
 1297              	.LVL125:
 1298 000a FFF7FEFF 		bl	USART_DeInit
 1299              	.LVL126:
 489:../user/source/Uart.c **** 
 490:../user/source/Uart.c ****     /*´®¿Ú»ù±¾²ÎÊýÅäÖÃ*/
 491:../user/source/Uart.c ****     if (puart->handler == USART1)
 1300              		.loc 1 491 0
 1301 000e 2368     		ldr	r3, [r4]
 1302 0010 464A     		ldr	r2, .L130
 1303 0012 9342     		cmp	r3, r2
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 34


 1304 0014 27D1     		bne	.L125
 492:../user/source/Uart.c ****     {
 493:../user/source/Uart.c ****         /*PB6 PB7×÷Îª´®¿Ú1*/
 494:../user/source/Uart.c ****         RCC_AHBPeriphClockCmd(RCC_AHBPeriph_GPIOB, ENABLE);
 1305              		.loc 1 494 0
 1306 0016 0121     		movs	r1, #1
 1307 0018 4FF48020 		mov	r0, #262144
 1308 001c FFF7FEFF 		bl	RCC_AHBPeriphClockCmd
 1309              	.LVL127:
 495:../user/source/Uart.c ****         GPIO_PinAFConfig(GPIOB, GPIO_PinSource6, GPIO_AF_7);
 1310              		.loc 1 495 0
 1311 0020 434E     		ldr	r6, .L130+4
 1312 0022 0722     		movs	r2, #7
 1313 0024 0621     		movs	r1, #6
 1314 0026 3046     		mov	r0, r6
 1315 0028 FFF7FEFF 		bl	GPIO_PinAFConfig
 1316              	.LVL128:
 496:../user/source/Uart.c ****         GPIO_PinAFConfig(GPIOB, GPIO_PinSource7, GPIO_AF_7);
 1317              		.loc 1 496 0
 1318 002c 0722     		movs	r2, #7
 1319 002e 1146     		mov	r1, r2
 1320 0030 3046     		mov	r0, r6
 1321 0032 FFF7FEFF 		bl	GPIO_PinAFConfig
 1322              	.LVL129:
 497:../user/source/Uart.c ****         GPIO_Initstruc.GPIO_Mode = GPIO_Mode_AF;
 1323              		.loc 1 497 0
 1324 0036 0223     		movs	r3, #2
 1325 0038 8DF82430 		strb	r3, [sp, #36]
 498:../user/source/Uart.c ****         GPIO_Initstruc.GPIO_OType = GPIO_OType_PP;
 1326              		.loc 1 498 0
 1327 003c 0022     		movs	r2, #0
 1328 003e 8DF82620 		strb	r2, [sp, #38]
 499:../user/source/Uart.c ****         GPIO_Initstruc.GPIO_PuPd = GPIO_PuPd_UP;
 1329              		.loc 1 499 0
 1330 0042 0127     		movs	r7, #1
 1331 0044 8DF82770 		strb	r7, [sp, #39]
 500:../user/source/Uart.c ****         GPIO_Initstruc.GPIO_Speed = GPIO_Speed_2MHz;
 1332              		.loc 1 500 0
 1333 0048 8DF82530 		strb	r3, [sp, #37]
 501:../user/source/Uart.c ****         GPIO_Initstruc.GPIO_Pin = GPIO_Pin_6 | GPIO_Pin_7;
 1334              		.loc 1 501 0
 1335 004c 0AA9     		add	r1, sp, #40
 1336 004e C023     		movs	r3, #192
 1337 0050 41F8083D 		str	r3, [r1, #-8]!
 502:../user/source/Uart.c ****         GPIO_Init(GPIOB, &GPIO_Initstruc);
 1338              		.loc 1 502 0
 1339 0054 3046     		mov	r0, r6
 1340 0056 FFF7FEFF 		bl	GPIO_Init
 1341              	.LVL130:
 503:../user/source/Uart.c ****         /*¿ªÆô´®¿ÚÊ±ÖÓ*/
 504:../user/source/Uart.c ****         RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART1, ENABLE);
 1342              		.loc 1 504 0
 1343 005a 3946     		mov	r1, r7
 1344 005c 4FF48040 		mov	r0, #16384
 1345 0060 FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
 1346              	.LVL131:
 1347 0064 2AE0     		b	.L126
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 35


 1348              	.L125:
 505:../user/source/Uart.c ****     }
 506:../user/source/Uart.c ****     else if (puart->handler == USART3)
 1349              		.loc 1 506 0
 1350 0066 334A     		ldr	r2, .L130+8
 1351 0068 9342     		cmp	r3, r2
 1352 006a 27D1     		bne	.L126
 507:../user/source/Uart.c ****     {
 508:../user/source/Uart.c ****         /*PB8 PB9×÷Îª´®¿Ú3*/
 509:../user/source/Uart.c ****         RCC_AHBPeriphClockCmd(RCC_AHBPeriph_GPIOB, ENABLE);
 1353              		.loc 1 509 0
 1354 006c 0121     		movs	r1, #1
 1355 006e 4FF48020 		mov	r0, #262144
 1356 0072 FFF7FEFF 		bl	RCC_AHBPeriphClockCmd
 1357              	.LVL132:
 510:../user/source/Uart.c ****         GPIO_PinAFConfig(GPIOB, GPIO_PinSource8, GPIO_AF_7);
 1358              		.loc 1 510 0
 1359 0076 2E4E     		ldr	r6, .L130+4
 1360 0078 0722     		movs	r2, #7
 1361 007a 0821     		movs	r1, #8
 1362 007c 3046     		mov	r0, r6
 1363 007e FFF7FEFF 		bl	GPIO_PinAFConfig
 1364              	.LVL133:
 511:../user/source/Uart.c ****         GPIO_PinAFConfig(GPIOB, GPIO_PinSource9, GPIO_AF_7);
 1365              		.loc 1 511 0
 1366 0082 0722     		movs	r2, #7
 1367 0084 0921     		movs	r1, #9
 1368 0086 3046     		mov	r0, r6
 1369 0088 FFF7FEFF 		bl	GPIO_PinAFConfig
 1370              	.LVL134:
 512:../user/source/Uart.c ****         GPIO_Initstruc.GPIO_Mode = GPIO_Mode_AF;
 1371              		.loc 1 512 0
 1372 008c 0223     		movs	r3, #2
 1373 008e 8DF82430 		strb	r3, [sp, #36]
 513:../user/source/Uart.c ****         GPIO_Initstruc.GPIO_OType = GPIO_OType_PP;
 1374              		.loc 1 513 0
 1375 0092 0022     		movs	r2, #0
 1376 0094 8DF82620 		strb	r2, [sp, #38]
 514:../user/source/Uart.c ****         GPIO_Initstruc.GPIO_PuPd = GPIO_PuPd_UP;
 1377              		.loc 1 514 0
 1378 0098 0127     		movs	r7, #1
 1379 009a 8DF82770 		strb	r7, [sp, #39]
 515:../user/source/Uart.c ****         GPIO_Initstruc.GPIO_Speed = GPIO_Speed_2MHz;
 1380              		.loc 1 515 0
 1381 009e 8DF82530 		strb	r3, [sp, #37]
 516:../user/source/Uart.c ****         GPIO_Initstruc.GPIO_Pin = GPIO_Pin_8 | GPIO_Pin_9;
 1382              		.loc 1 516 0
 1383 00a2 0AA9     		add	r1, sp, #40
 1384 00a4 4FF44073 		mov	r3, #768
 1385 00a8 41F8083D 		str	r3, [r1, #-8]!
 517:../user/source/Uart.c ****         GPIO_Init(GPIOB, &GPIO_Initstruc);
 1386              		.loc 1 517 0
 1387 00ac 3046     		mov	r0, r6
 1388 00ae FFF7FEFF 		bl	GPIO_Init
 1389              	.LVL135:
 518:../user/source/Uart.c ****         /*¿ªÆô´®¿ÚÊ±ÖÓ*/
 519:../user/source/Uart.c ****         RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART3, ENABLE);
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 36


 1390              		.loc 1 519 0
 1391 00b2 3946     		mov	r1, r7
 1392 00b4 4FF48020 		mov	r0, #262144
 1393 00b8 FFF7FEFF 		bl	RCC_APB1PeriphClockCmd
 1394              	.LVL136:
 1395              	.L126:
 520:../user/source/Uart.c ****     }
 521:../user/source/Uart.c ****     USART_Initstruct.USART_BaudRate = baudrate;
 1396              		.loc 1 521 0
 1397 00bc 0295     		str	r5, [sp, #8]
 522:../user/source/Uart.c ****     USART_Initstruct.USART_Mode = (USART_Mode_Rx | USART_Mode_Tx);
 1398              		.loc 1 522 0
 1399 00be 0C23     		movs	r3, #12
 1400 00c0 0693     		str	r3, [sp, #24]
 523:../user/source/Uart.c ****     USART_Initstruct.USART_WordLength = USART_WordLength_9b;
 1401              		.loc 1 523 0
 1402 00c2 4FF48053 		mov	r3, #4096
 1403 00c6 0393     		str	r3, [sp, #12]
 524:../user/source/Uart.c ****     USART_Initstruct.USART_Parity = USART_Parity_Even;
 1404              		.loc 1 524 0
 1405 00c8 4FF48063 		mov	r3, #1024
 1406 00cc 0593     		str	r3, [sp, #20]
 525:../user/source/Uart.c ****     USART_Initstruct.USART_StopBits = USART_StopBits_1;
 1407              		.loc 1 525 0
 1408 00ce 0023     		movs	r3, #0
 1409 00d0 0493     		str	r3, [sp, #16]
 526:../user/source/Uart.c ****     USART_Initstruct.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
 1410              		.loc 1 526 0
 1411 00d2 0793     		str	r3, [sp, #28]
 527:../user/source/Uart.c ****     USART_OverSampling8Cmd(puart->handler, ENABLE);
 1412              		.loc 1 527 0
 1413 00d4 0121     		movs	r1, #1
 1414 00d6 2068     		ldr	r0, [r4]
 1415 00d8 FFF7FEFF 		bl	USART_OverSampling8Cmd
 1416              	.LVL137:
 528:../user/source/Uart.c ****     USART_Init(puart->handler, &USART_Initstruct);
 1417              		.loc 1 528 0
 1418 00dc 02A9     		add	r1, sp, #8
 1419 00de 2068     		ldr	r0, [r4]
 1420 00e0 FFF7FEFF 		bl	USART_Init
 1421              	.LVL138:
 529:../user/source/Uart.c **** 
 530:../user/source/Uart.c ****     /*ÅäÖÃÖÐ¶ÏÓÅÏÈ¼¶*/
 531:../user/source/Uart.c ****     if (puart->handler == USART1)
 1422              		.loc 1 531 0
 1423 00e4 2368     		ldr	r3, [r4]
 1424 00e6 114A     		ldr	r2, .L130
 1425 00e8 9342     		cmp	r3, r2
 1426 00ea 03D1     		bne	.L127
 532:../user/source/Uart.c ****     {
 533:../user/source/Uart.c ****         NVIC_Initstruct.NVIC_IRQChannel = USART1_IRQn;
 1427              		.loc 1 533 0
 1428 00ec 2523     		movs	r3, #37
 1429 00ee 8DF80430 		strb	r3, [sp, #4]
 1430 00f2 05E0     		b	.L128
 1431              	.L127:
 534:../user/source/Uart.c ****         //NVIC_Initstruct.NVIC_IRQChannelSubPriority = 1;
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 37


 535:../user/source/Uart.c ****     }
 536:../user/source/Uart.c ****     else if (puart->handler == USART3)
 1432              		.loc 1 536 0
 1433 00f4 0F4A     		ldr	r2, .L130+8
 1434 00f6 9342     		cmp	r3, r2
 1435 00f8 02D1     		bne	.L128
 537:../user/source/Uart.c ****     {
 538:../user/source/Uart.c ****         NVIC_Initstruct.NVIC_IRQChannel = USART3_IRQn;
 1436              		.loc 1 538 0
 1437 00fa 2723     		movs	r3, #39
 1438 00fc 8DF80430 		strb	r3, [sp, #4]
 1439              	.L128:
 539:../user/source/Uart.c ****         //NVIC_Initstruct.NVIC_IRQChannelSubPriority = 0;
 540:../user/source/Uart.c ****     }
 541:../user/source/Uart.c ****     NVIC_Initstruct.NVIC_IRQChannelSubPriority = 0;
 1440              		.loc 1 541 0
 1441 0100 0023     		movs	r3, #0
 1442 0102 8DF80630 		strb	r3, [sp, #6]
 542:../user/source/Uart.c ****     NVIC_Initstruct.NVIC_IRQChannelPreemptionPriority = 1;
 1443              		.loc 1 542 0
 1444 0106 0125     		movs	r5, #1
 1445              	.LVL139:
 1446 0108 8DF80550 		strb	r5, [sp, #5]
 543:../user/source/Uart.c ****     NVIC_Initstruct.NVIC_IRQChannelCmd = ENABLE;
 1447              		.loc 1 543 0
 1448 010c 8DF80750 		strb	r5, [sp, #7]
 544:../user/source/Uart.c ****     NVIC_Init(&NVIC_Initstruct);
 1449              		.loc 1 544 0
 1450 0110 01A8     		add	r0, sp, #4
 1451 0112 FFF7FEFF 		bl	NVIC_Init
 1452              	.LVL140:
 545:../user/source/Uart.c ****     /*Ê¹ÄÜ½ÓÊÕÖÐ¶Ï*/
 546:../user/source/Uart.c ****     USART_ITConfig(puart->handler, USART_IT_RXNE, ENABLE);
 1453              		.loc 1 546 0
 1454 0116 2A46     		mov	r2, r5
 1455 0118 0749     		ldr	r1, .L130+12
 1456 011a 2068     		ldr	r0, [r4]
 1457 011c FFF7FEFF 		bl	USART_ITConfig
 1458              	.LVL141:
 547:../user/source/Uart.c ****     USART_Cmd(puart->handler, ENABLE);
 1459              		.loc 1 547 0
 1460 0120 2946     		mov	r1, r5
 1461 0122 2068     		ldr	r0, [r4]
 1462 0124 FFF7FEFF 		bl	USART_Cmd
 1463              	.LVL142:
 548:../user/source/Uart.c **** }
 1464              		.loc 1 548 0
 1465 0128 0BB0     		add	sp, sp, #44
 1466              	.LCFI25:
 1467              		.cfi_def_cfa_offset 20
 1468              		@ sp needed
 1469 012a F0BD     		pop	{r4, r5, r6, r7, pc}
 1470              	.LVL143:
 1471              	.L131:
 1472              		.align	2
 1473              	.L130:
 1474 012c 00380140 		.word	1073821696
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 38


 1475 0130 00040048 		.word	1207960576
 1476 0134 00480040 		.word	1073760256
 1477 0138 05010500 		.word	327941
 1478              		.cfi_endproc
 1479              	.LFE129:
 1481              		.text
 1482              	.Letext0:
 1483              		.file 2 "d:\\gcc-arm-none-eabi-5_4-2016q3-20160926-win32\\arm-none-eabi\\include\\machine\\_defaul
 1484              		.file 3 "d:\\gcc-arm-none-eabi-5_4-2016q3-20160926-win32\\arm-none-eabi\\include\\sys\\_stdint.h"
 1485              		.file 4 "../cmsis/include/core_cm4.h"
 1486              		.file 5 "../cmsis/include/stm32f37x.h"
 1487              		.file 6 "../stdperiph/include/stm32f37x_gpio.h"
 1488              		.file 7 "../stdperiph/include/stm32f37x_usart.h"
 1489              		.file 8 "../stdperiph/include/stm32f37x_misc.h"
 1490              		.file 9 "../user/include/Uart.h"
 1491              		.file 10 "../stdperiph/include/stm32f37x_rcc.h"
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 39


DEFINED SYMBOLS
                            *ABS*:00000000 Uart.c
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:22     .text.blDrv_Buf_IsEmpty:00000000 $t
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:27     .text.blDrv_Buf_IsEmpty:00000000 blDrv_Buf_IsEmpty
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:56     .text.blDrv_Buf_IsFull:00000000 $t
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:61     .text.blDrv_Buf_IsFull:00000000 blDrv_Buf_IsFull
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:92     .text.blDrv_Buf_IsFull:00000028 $d
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:97     .text.Uart_DataPut:00000000 $t
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:102    .text.Uart_DataPut:00000000 Uart_DataPut
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:123    .text.Uart_DataPut:0000000c $d
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:128    .text.Uart_idleReadEnable:00000000 $t
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:133    .text.Uart_idleReadEnable:00000000 Uart_idleReadEnable
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:168    .text.Uart_idleReadEnable:0000001c $d
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:173    .text.Uart_idleReadDisable:00000000 $t
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:178    .text.Uart_idleReadDisable:00000000 Uart_idleReadDisable
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:214    .text.Uart_idleReadDisable:00000020 $d
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:219    .text.uwBuf_EmpLen:00000000 $t
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:224    .text.uwBuf_EmpLen:00000000 uwBuf_EmpLen
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:248    .text.uwBuf_EmpLen:00000020 $d
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:253    .text.Uart_Write:00000000 $t
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:258    .text.Uart_Write:00000000 Uart_Write
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:338    .text.Uart_Write:00000054 $d
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:344    .text.uwBuf_UnReadLen:00000000 $t
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:349    .text.uwBuf_UnReadLen:00000000 uwBuf_UnReadLen
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:373    .text.uwBuf_UnReadLen:00000020 $d
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:378    .text.ucDrv_Buf_GetBytes:00000000 $t
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:383    .text.ucDrv_Buf_GetBytes:00000000 ucDrv_Buf_GetBytes
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:445    .text.ucDrv_Buf_GetBytes:00000048 $d
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:450    .text.ucDrv_Buf_PutBytes:00000000 $t
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:455    .text.ucDrv_Buf_PutBytes:00000000 ucDrv_Buf_PutBytes
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:519    .text.ucDrv_Buf_PutBytes:00000048 $d
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:524    .text.Uart_OnceWrite:00000000 $t
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:529    .text.Uart_OnceWrite:00000000 Uart_OnceWrite
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:670    .text.Uart_OnceWrite:000000a8 $d
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:677    .text.Uart_IdleRead:00000000 $t
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:682    .text.Uart_IdleRead:00000000 Uart_IdleRead
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:833    .text.Uart_IdleRead:000000b8 $d
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:839    .text.Uart_OnceRead:00000000 $t
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:844    .text.Uart_OnceRead:00000000 Uart_OnceRead
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:985    .text.Uart_OnceRead:000000a8 $d
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:992    .text.Uart_Read:00000000 $t
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:997    .text.Uart_Read:00000000 Uart_Read
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:1098   .text.Uart_Read:00000070 $d
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:1103   .text.vBuf_Clear:00000000 $t
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:1108   .text.vBuf_Clear:00000000 vBuf_Clear
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:1124   .text.blBufchr:00000000 $t
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:1129   .text.blBufchr:00000000 blBufchr
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:1191   .text.blBufchr:00000038 $d
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:1196   .text.blBufcmp:00000000 $t
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:1201   .text.blBufcmp:00000000 blBufcmp
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:1265   .text.blBufcmp:00000044 $d
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:1270   .text.vUart_EnableBaudrate:00000000 $t
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:1275   .text.vUart_EnableBaudrate:00000000 vUart_EnableBaudrate
C:\Users\strag\AppData\Local\Temp\cc96voZD.s:1474   .text.vUart_EnableBaudrate:0000012c $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc96voZD.s 			page 40


USART_ITConfig
USART_ClearITPendingBit
USART_DeInit
RCC_AHBPeriphClockCmd
GPIO_PinAFConfig
GPIO_Init
RCC_APB2PeriphClockCmd
RCC_APB1PeriphClockCmd
USART_OverSampling8Cmd
USART_Init
NVIC_Init
USART_Cmd
